["^ ","~:output",["^ ","~:js","goog.provide('huginn.mqtt');\ngoog.require('cljs.core');\ngoog.require('promesa.core');\ngoog.require('clojure.string');\ngoog.require('huginn.jwt');\ngoog.require('shadow.js.shim.module$gcic_mqtt_client');\ngoog.require('orchestra_cljs.spec.test');\ngoog.require('huginn.config');\ngoog.require('taoensso.timbre');\ngoog.require('cljs.core.async');\ngoog.require('shadow.js.shim.module$systeminformation');\ngoog.require('cljs.spec.alpha');\ngoog.require('cljs.nodejs');\nvar opts4841_5032 = null;\ncljs.core.reduce.cljs$core$IFn$_invoke$arity$3(((function (opts4841_5032){\nreturn (function (ret__1869__auto__,p__4842){\nvar vec__4843 = p__4842;\nvar ___1870__auto__ = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__4843,(0),null);\nvar f__1871__auto__ = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__4843,(1),null);\nvar sym__1872__auto__ = (f__1871__auto__.cljs$core$IFn$_invoke$arity$0 ? f__1871__auto__.cljs$core$IFn$_invoke$arity$0() : f__1871__auto__.call(null));\nvar G__4846 = ret__1869__auto__;\nif(cljs.core.truth_(sym__1872__auto__)){\nreturn cljs.core.conj.cljs$core$IFn$_invoke$arity$2(G__4846,sym__1872__auto__);\n} else {\nreturn G__4846;\n}\n});})(opts4841_5032))\n,cljs.core.PersistentVector.EMPTY,orchestra_cljs.spec.test.distinct_by(cljs.core.first,cljs.core.filter.cljs$core$IFn$_invoke$arity$2(((function (opts4841_5032){\nreturn (function (p1__1868__1873__auto__){\nvar G__4848 = cljs.core.first(p1__1868__1873__auto__);\nvar fexpr__4847 = orchestra_cljs.spec.test.instrumentable_syms.cljs$core$IFn$_invoke$arity$1(opts4841_5032);\nreturn (fexpr__4847.cljs$core$IFn$_invoke$arity$1 ? fexpr__4847.cljs$core$IFn$_invoke$arity$1(G__4848) : fexpr__4847.call(null,G__4848));\n});})(opts4841_5032))\n,cljs.core.zipmap(cljs.core.PersistentVector.EMPTY,cljs.core.PersistentVector.EMPTY))));\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\"huginn.mqtt\",\"projectId\",\"huginn.mqtt/projectId\",-2109218287),new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null),cljs.core.string_QMARK_);\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\"huginn.mqtt\",\"registryId\",\"huginn.mqtt/registryId\",970901079),new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null),cljs.core.string_QMARK_);\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\"huginn.mqtt\",\"cloudRegion\",\"huginn.mqtt/cloudRegion\",-1432542491),new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null),cljs.core.string_QMARK_);\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\"huginn.mqtt\",\"deviceId\",\"huginn.mqtt/deviceId\",1335615099),new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null),cljs.core.string_QMARK_);\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null),cljs.core.any_QMARK_);\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\"huginn.mqtt\",\"topic-type\",\"huginn.mqtt/topic-type\",-1269163830),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [\"events\",null,\"state\",null], null), null),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [\"events\",null,\"state\",null], null), null));\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"keys\",\"cljs.spec.alpha/keys\",1109346032,null),new cljs.core.Keyword(null,\"req-un\",\"req-un\",1074571008),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"projectId\",\"huginn.mqtt/projectId\",-2109218287),new cljs.core.Keyword(\"huginn.mqtt\",\"registryId\",\"huginn.mqtt/registryId\",970901079),new cljs.core.Keyword(\"huginn.mqtt\",\"cloudRegion\",\"huginn.mqtt/cloudRegion\",-1432542491),new cljs.core.Keyword(\"huginn.mqtt\",\"deviceId\",\"huginn.mqtt/deviceId\",1335615099)], null)),cljs.spec.alpha.map_spec_impl(cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,\"req-un\",\"req-un\",1074571008),new cljs.core.Keyword(null,\"opt-un\",\"opt-un\",883442496),new cljs.core.Keyword(null,\"gfn\",\"gfn\",791517474),new cljs.core.Keyword(null,\"pred-exprs\",\"pred-exprs\",1792271395),new cljs.core.Keyword(null,\"keys-pred\",\"keys-pred\",858984739),new cljs.core.Keyword(null,\"opt-keys\",\"opt-keys\",1262688261),new cljs.core.Keyword(null,\"req-specs\",\"req-specs\",553962313),new cljs.core.Keyword(null,\"req\",\"req\",-326448303),new cljs.core.Keyword(null,\"req-keys\",\"req-keys\",514319221),new cljs.core.Keyword(null,\"opt-specs\",\"opt-specs\",-384905450),new cljs.core.Keyword(null,\"pred-forms\",\"pred-forms\",172611832),new cljs.core.Keyword(null,\"opt\",\"opt\",-794706369)],[new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"projectId\",\"huginn.mqtt/projectId\",-2109218287),new cljs.core.Keyword(\"huginn.mqtt\",\"registryId\",\"huginn.mqtt/registryId\",970901079),new cljs.core.Keyword(\"huginn.mqtt\",\"cloudRegion\",\"huginn.mqtt/cloudRegion\",-1432542491),new cljs.core.Keyword(\"huginn.mqtt\",\"deviceId\",\"huginn.mqtt/deviceId\",1335615099)], null),null,null,new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [(function (G__4849){\nreturn cljs.core.map_QMARK_(G__4849);\n}),(function (G__4849){\nreturn cljs.core.contains_QMARK_(G__4849,new cljs.core.Keyword(null,\"projectId\",\"projectId\",-1551013096));\n}),(function (G__4849){\nreturn cljs.core.contains_QMARK_(G__4849,new cljs.core.Keyword(null,\"registryId\",\"registryId\",-1767694006));\n}),(function (G__4849){\nreturn cljs.core.contains_QMARK_(G__4849,new cljs.core.Keyword(null,\"cloudRegion\",\"cloudRegion\",-857757214));\n}),(function (G__4849){\nreturn cljs.core.contains_QMARK_(G__4849,new cljs.core.Keyword(null,\"deviceId\",\"deviceId\",1909987208));\n})], null),(function (G__4849){\nreturn ((cljs.core.map_QMARK_(G__4849)) && (cljs.core.contains_QMARK_(G__4849,new cljs.core.Keyword(null,\"projectId\",\"projectId\",-1551013096))) && (cljs.core.contains_QMARK_(G__4849,new cljs.core.Keyword(null,\"registryId\",\"registryId\",-1767694006))) && (cljs.core.contains_QMARK_(G__4849,new cljs.core.Keyword(null,\"cloudRegion\",\"cloudRegion\",-857757214))) && (cljs.core.contains_QMARK_(G__4849,new cljs.core.Keyword(null,\"deviceId\",\"deviceId\",1909987208))));\n}),cljs.core.PersistentVector.EMPTY,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"projectId\",\"huginn.mqtt/projectId\",-2109218287),new cljs.core.Keyword(\"huginn.mqtt\",\"registryId\",\"huginn.mqtt/registryId\",970901079),new cljs.core.Keyword(\"huginn.mqtt\",\"cloudRegion\",\"huginn.mqtt/cloudRegion\",-1432542491),new cljs.core.Keyword(\"huginn.mqtt\",\"deviceId\",\"huginn.mqtt/deviceId\",1335615099)], null),null,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"projectId\",\"projectId\",-1551013096),new cljs.core.Keyword(null,\"registryId\",\"registryId\",-1767694006),new cljs.core.Keyword(null,\"cloudRegion\",\"cloudRegion\",-857757214),new cljs.core.Keyword(null,\"deviceId\",\"deviceId\",1909987208)], null),cljs.core.PersistentVector.EMPTY,new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"fn\",\"cljs.core/fn\",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"map?\",\"cljs.core/map?\",-1390345523,null),new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null))),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"fn\",\"cljs.core/fn\",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"contains?\",\"cljs.core/contains?\",-976526835,null),new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null),new cljs.core.Keyword(null,\"projectId\",\"projectId\",-1551013096))),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"fn\",\"cljs.core/fn\",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"contains?\",\"cljs.core/contains?\",-976526835,null),new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null),new cljs.core.Keyword(null,\"registryId\",\"registryId\",-1767694006))),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"fn\",\"cljs.core/fn\",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"contains?\",\"cljs.core/contains?\",-976526835,null),new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null),new cljs.core.Keyword(null,\"cloudRegion\",\"cloudRegion\",-857757214))),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"fn\",\"cljs.core/fn\",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"contains?\",\"cljs.core/contains?\",-976526835,null),new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null),new cljs.core.Keyword(null,\"deviceId\",\"deviceId\",1909987208)))], null),null])));\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\"huginn.mqtt\",\"payload\",\"huginn.mqtt/payload\",-916460991),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"and\",\"cljs.spec.alpha/and\",-2060279705,null),new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null),cljs.core.list(new cljs.core.Symbol(null,\"fn*\",\"fn*\",-752876845,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"p1__4850#\",\"p1__4850#\",-1046419033,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"<\",\"cljs.core/<\",1677496129,null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"count\",\"cljs.core/count\",-921270233,null),new cljs.core.Symbol(null,\"p1__4850#\",\"p1__4850#\",-1046419033,null)),(200000)))),cljs.spec.alpha.and_spec_impl(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"fn\",\"cljs.core/fn\",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"<\",\"cljs.core/<\",1677496129,null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"count\",\"cljs.core/count\",-921270233,null),new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)),(200000)))], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.string_QMARK_,(function (p1__4850_SHARP_){\nreturn (cljs.core.count(p1__4850_SHARP_) < (200000));\n})], null),null));\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\"huginn.mqtt\",\"subfolder\",\"huginn.mqtt/subfolder\",754461404),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"and\",\"cljs.spec.alpha/and\",-2060279705,null),new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null),cljs.core.list(new cljs.core.Symbol(null,\"fn*\",\"fn*\",-752876845,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"p1__4851#\",\"p1__4851#\",1931714886,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"<\",\"cljs.core/<\",1677496129,null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"count\",\"cljs.core/count\",-921270233,null),new cljs.core.Symbol(null,\"p1__4851#\",\"p1__4851#\",1931714886,null)),(200)))),cljs.spec.alpha.and_spec_impl(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"fn\",\"cljs.core/fn\",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"<\",\"cljs.core/<\",1677496129,null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"count\",\"cljs.core/count\",-921270233,null),new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)),(200)))], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.string_QMARK_,(function (p1__4851_SHARP_){\nreturn (cljs.core.count(p1__4851_SHARP_) < (200));\n})], null),null));\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\"huginn.mqtt\",\"ts\",\"huginn.mqtt/ts\",2127118637),new cljs.core.Symbol(\"cljs.core\",\"float?\",\"cljs.core/float?\",-941017745,null),cljs.core.float_QMARK_);\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\"huginn.mqtt\",\"qos\",\"huginn.mqtt/qos\",-601553370),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [(0),null,(1),null], null), null),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [(0),null,(1),null], null), null));\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\"huginn.mqtt\",\"mqtt-packet\",\"huginn.mqtt/mqtt-packet\",1651733234),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"keys\",\"cljs.spec.alpha/keys\",1109346032,null),new cljs.core.Keyword(null,\"req-un\",\"req-un\",1074571008),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"payload\",\"huginn.mqtt/payload\",-916460991),new cljs.core.Keyword(\"huginn.mqtt\",\"subfolder\",\"huginn.mqtt/subfolder\",754461404),new cljs.core.Keyword(\"huginn.mqtt\",\"qos\",\"huginn.mqtt/qos\",-601553370),new cljs.core.Keyword(\"huginn.mqtt\",\"ts\",\"huginn.mqtt/ts\",2127118637)], null)),cljs.spec.alpha.map_spec_impl(cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,\"req-un\",\"req-un\",1074571008),new cljs.core.Keyword(null,\"opt-un\",\"opt-un\",883442496),new cljs.core.Keyword(null,\"gfn\",\"gfn\",791517474),new cljs.core.Keyword(null,\"pred-exprs\",\"pred-exprs\",1792271395),new cljs.core.Keyword(null,\"keys-pred\",\"keys-pred\",858984739),new cljs.core.Keyword(null,\"opt-keys\",\"opt-keys\",1262688261),new cljs.core.Keyword(null,\"req-specs\",\"req-specs\",553962313),new cljs.core.Keyword(null,\"req\",\"req\",-326448303),new cljs.core.Keyword(null,\"req-keys\",\"req-keys\",514319221),new cljs.core.Keyword(null,\"opt-specs\",\"opt-specs\",-384905450),new cljs.core.Keyword(null,\"pred-forms\",\"pred-forms\",172611832),new cljs.core.Keyword(null,\"opt\",\"opt\",-794706369)],[new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"payload\",\"huginn.mqtt/payload\",-916460991),new cljs.core.Keyword(\"huginn.mqtt\",\"subfolder\",\"huginn.mqtt/subfolder\",754461404),new cljs.core.Keyword(\"huginn.mqtt\",\"qos\",\"huginn.mqtt/qos\",-601553370),new cljs.core.Keyword(\"huginn.mqtt\",\"ts\",\"huginn.mqtt/ts\",2127118637)], null),null,null,new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [(function (G__4852){\nreturn cljs.core.map_QMARK_(G__4852);\n}),(function (G__4852){\nreturn cljs.core.contains_QMARK_(G__4852,new cljs.core.Keyword(null,\"payload\",\"payload\",-383036092));\n}),(function (G__4852){\nreturn cljs.core.contains_QMARK_(G__4852,new cljs.core.Keyword(null,\"subfolder\",\"subfolder\",1044158439));\n}),(function (G__4852){\nreturn cljs.core.contains_QMARK_(G__4852,new cljs.core.Keyword(null,\"qos\",\"qos\",-2124292319));\n}),(function (G__4852){\nreturn cljs.core.contains_QMARK_(G__4852,new cljs.core.Keyword(null,\"ts\",\"ts\",1617209904));\n})], null),(function (G__4852){\nreturn ((cljs.core.map_QMARK_(G__4852)) && (cljs.core.contains_QMARK_(G__4852,new cljs.core.Keyword(null,\"payload\",\"payload\",-383036092))) && (cljs.core.contains_QMARK_(G__4852,new cljs.core.Keyword(null,\"subfolder\",\"subfolder\",1044158439))) && (cljs.core.contains_QMARK_(G__4852,new cljs.core.Keyword(null,\"qos\",\"qos\",-2124292319))) && (cljs.core.contains_QMARK_(G__4852,new cljs.core.Keyword(null,\"ts\",\"ts\",1617209904))));\n}),cljs.core.PersistentVector.EMPTY,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"payload\",\"huginn.mqtt/payload\",-916460991),new cljs.core.Keyword(\"huginn.mqtt\",\"subfolder\",\"huginn.mqtt/subfolder\",754461404),new cljs.core.Keyword(\"huginn.mqtt\",\"qos\",\"huginn.mqtt/qos\",-601553370),new cljs.core.Keyword(\"huginn.mqtt\",\"ts\",\"huginn.mqtt/ts\",2127118637)], null),null,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"payload\",\"payload\",-383036092),new cljs.core.Keyword(null,\"subfolder\",\"subfolder\",1044158439),new cljs.core.Keyword(null,\"qos\",\"qos\",-2124292319),new cljs.core.Keyword(null,\"ts\",\"ts\",1617209904)], null),cljs.core.PersistentVector.EMPTY,new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"fn\",\"cljs.core/fn\",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"map?\",\"cljs.core/map?\",-1390345523,null),new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null))),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"fn\",\"cljs.core/fn\",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"contains?\",\"cljs.core/contains?\",-976526835,null),new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null),new cljs.core.Keyword(null,\"payload\",\"payload\",-383036092))),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"fn\",\"cljs.core/fn\",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"contains?\",\"cljs.core/contains?\",-976526835,null),new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null),new cljs.core.Keyword(null,\"subfolder\",\"subfolder\",1044158439))),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"fn\",\"cljs.core/fn\",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"contains?\",\"cljs.core/contains?\",-976526835,null),new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null),new cljs.core.Keyword(null,\"qos\",\"qos\",-2124292319))),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"fn\",\"cljs.core/fn\",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"contains?\",\"cljs.core/contains?\",-976526835,null),new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null),new cljs.core.Keyword(null,\"ts\",\"ts\",1617209904)))], null),null])));\ncljs.spec.alpha.def_impl(new cljs.core.Symbol(\"huginn.mqtt\",\"client-id\",\"huginn.mqtt/client-id\",1699900680,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"fspec\",\"cljs.spec.alpha/fspec\",-1289128341,null),new cljs.core.Keyword(null,\"args\",\"args\",1315556576),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(null,\"ret\",\"ret\",-468222814),new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null)),cljs.spec.alpha.fspec_impl(cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),null,null),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null),cljs.core.string_QMARK_,null,null),new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null),null,null,null));\n/**\n * Builds a client id used to identify the device this message is\n *   comming from\n */\nhuginn.mqtt.client_id = (function huginn$mqtt$client_id(p__4853){\nvar map__4854 = p__4853;\nvar map__4854__$1 = ((((!((map__4854 == null)))?(((((map__4854.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__4854.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__4854):map__4854);\nvar opts = map__4854__$1;\nvar projectId = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__4854__$1,new cljs.core.Keyword(null,\"projectId\",\"projectId\",-1551013096));\nvar registryId = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__4854__$1,new cljs.core.Keyword(null,\"registryId\",\"registryId\",-1767694006));\nvar cloudRegion = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__4854__$1,new cljs.core.Keyword(null,\"cloudRegion\",\"cloudRegion\",-857757214));\nvar deviceId = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__4854__$1,new cljs.core.Keyword(null,\"deviceId\",\"deviceId\",1909987208));\nreturn [\"projects/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(projectId),\"/locations/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(cloudRegion),\"/registries/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(registryId),\"/devices/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(deviceId)].join('');\n});\ncljs.spec.alpha.def_impl(new cljs.core.Symbol(\"huginn.mqtt\",\"config-chan\",\"huginn.mqtt/config-chan\",-1665797133,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"fspec\",\"cljs.spec.alpha/fspec\",-1289128341,null),new cljs.core.Keyword(null,\"args\",\"args\",1315556576),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"keys\",\"cljs.spec.alpha/keys\",1109346032,null),new cljs.core.Keyword(null,\"req-un\",\"req-un\",1074571008),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"deviceId\",\"huginn.mqtt/deviceId\",1335615099)], null))),new cljs.core.Keyword(null,\"ret\",\"ret\",-468222814),new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null)),cljs.spec.alpha.fspec_impl(cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"keys\",\"cljs.spec.alpha/keys\",1109346032,null),new cljs.core.Keyword(null,\"req-un\",\"req-un\",1074571008),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"deviceId\",\"huginn.mqtt/deviceId\",1335615099)], null))),cljs.spec.alpha.cat_impl(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"opts\",\"opts\",155075701)], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.spec.alpha.map_spec_impl(cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,\"req-un\",\"req-un\",1074571008),new cljs.core.Keyword(null,\"opt-un\",\"opt-un\",883442496),new cljs.core.Keyword(null,\"gfn\",\"gfn\",791517474),new cljs.core.Keyword(null,\"pred-exprs\",\"pred-exprs\",1792271395),new cljs.core.Keyword(null,\"keys-pred\",\"keys-pred\",858984739),new cljs.core.Keyword(null,\"opt-keys\",\"opt-keys\",1262688261),new cljs.core.Keyword(null,\"req-specs\",\"req-specs\",553962313),new cljs.core.Keyword(null,\"req\",\"req\",-326448303),new cljs.core.Keyword(null,\"req-keys\",\"req-keys\",514319221),new cljs.core.Keyword(null,\"opt-specs\",\"opt-specs\",-384905450),new cljs.core.Keyword(null,\"pred-forms\",\"pred-forms\",172611832),new cljs.core.Keyword(null,\"opt\",\"opt\",-794706369)],[new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"deviceId\",\"huginn.mqtt/deviceId\",1335615099)], null),null,null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(function (G__4856){\nreturn cljs.core.map_QMARK_(G__4856);\n}),(function (G__4856){\nreturn cljs.core.contains_QMARK_(G__4856,new cljs.core.Keyword(null,\"deviceId\",\"deviceId\",1909987208));\n})], null),(function (G__4856){\nreturn ((cljs.core.map_QMARK_(G__4856)) && (cljs.core.contains_QMARK_(G__4856,new cljs.core.Keyword(null,\"deviceId\",\"deviceId\",1909987208))));\n}),cljs.core.PersistentVector.EMPTY,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"deviceId\",\"huginn.mqtt/deviceId\",1335615099)], null),null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"deviceId\",\"deviceId\",1909987208)], null),cljs.core.PersistentVector.EMPTY,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"fn\",\"cljs.core/fn\",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"map?\",\"cljs.core/map?\",-1390345523,null),new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null))),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"fn\",\"cljs.core/fn\",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"contains?\",\"cljs.core/contains?\",-976526835,null),new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null),new cljs.core.Keyword(null,\"deviceId\",\"deviceId\",1909987208)))], null),null]))], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"keys\",\"cljs.spec.alpha/keys\",1109346032,null),new cljs.core.Keyword(null,\"req-un\",\"req-un\",1074571008),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"deviceId\",\"huginn.mqtt/deviceId\",1335615099)], null))], null)),null,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"keys\",\"cljs.spec.alpha/keys\",1109346032,null),new cljs.core.Keyword(null,\"req-un\",\"req-un\",1074571008),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"deviceId\",\"huginn.mqtt/deviceId\",1335615099)], null))),cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null),cljs.core.string_QMARK_,null,null),new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null),null,null,null));\n/**\n * google give each device two channeles, a state channel (the config channel)\n *   and a telemetry channel (the one that we push all our data over). The name of\n *   these channels are determined by google iot core.\n */\nhuginn.mqtt.config_chan = (function huginn$mqtt$config_chan(p__4857){\nvar map__4858 = p__4857;\nvar map__4858__$1 = ((((!((map__4858 == null)))?(((((map__4858.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__4858.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__4858):map__4858);\nvar opts = map__4858__$1;\nvar deviceId = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__4858__$1,new cljs.core.Keyword(null,\"deviceId\",\"deviceId\",1909987208));\nreturn [\"/devices/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(deviceId),\"/config\"].join('');\n});\ncljs.spec.alpha.def_impl(new cljs.core.Symbol(\"huginn.mqtt\",\"client-handlers\",\"huginn.mqtt/client-handlers\",1114981143,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"fspec\",\"cljs.spec.alpha/fspec\",-1289128341,null),new cljs.core.Keyword(null,\"args\",\"args\",1315556576),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"success-fn\",\"success-fn\",-506864067),new cljs.core.Symbol(\"cljs.core\",\"fn?\",\"cljs.core/fn?\",71876239,null),new cljs.core.Keyword(null,\"fail\",\"fail\",1706214930),new cljs.core.Symbol(\"cljs.core\",\"fn?\",\"cljs.core/fn?\",71876239,null),new cljs.core.Keyword(null,\"send\",\"send\",-652151114),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(null,\"recv\",\"recv\",558628610),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264))),cljs.spec.alpha.fspec_impl(cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"success-fn\",\"success-fn\",-506864067),new cljs.core.Symbol(\"cljs.core\",\"fn?\",\"cljs.core/fn?\",71876239,null),new cljs.core.Keyword(null,\"fail\",\"fail\",1706214930),new cljs.core.Symbol(\"cljs.core\",\"fn?\",\"cljs.core/fn?\",71876239,null),new cljs.core.Keyword(null,\"send\",\"send\",-652151114),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(null,\"recv\",\"recv\",558628610),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264)),cljs.spec.alpha.cat_impl(new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"success-fn\",\"success-fn\",-506864067),new cljs.core.Keyword(null,\"fail\",\"fail\",1706214930),new cljs.core.Keyword(null,\"send\",\"send\",-652151114),new cljs.core.Keyword(null,\"recv\",\"recv\",558628610)], null),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.fn_QMARK_,cljs.core.fn_QMARK_,new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264)], null),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(\"cljs.core\",\"fn?\",\"cljs.core/fn?\",71876239,null),new cljs.core.Symbol(\"cljs.core\",\"fn?\",\"cljs.core/fn?\",71876239,null),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264)], null)),null,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"success-fn\",\"success-fn\",-506864067),new cljs.core.Symbol(\"cljs.core\",\"fn?\",\"cljs.core/fn?\",71876239,null),new cljs.core.Keyword(null,\"fail\",\"fail\",1706214930),new cljs.core.Symbol(\"cljs.core\",\"fn?\",\"cljs.core/fn?\",71876239,null),new cljs.core.Keyword(null,\"send\",\"send\",-652151114),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(null,\"recv\",\"recv\",558628610),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264)),cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null),cljs.core.any_QMARK_,null,null),new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null),null,null,null));\n/**\n * builds a map of handels to attach to the mqtt object\n */\nhuginn.mqtt.client_handlers = (function huginn$mqtt$client_handlers(success_fn,fail,send,recv){\nreturn new cljs.core.PersistentArrayMap(null, 5, [\"connect\",(function (success){\nif(cljs.core.truth_(success)){\nreturn (success_fn.cljs$core$IFn$_invoke$arity$0 ? success_fn.cljs$core$IFn$_invoke$arity$0() : success_fn.call(null));\n} else {\ntaoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"debug\",\"debug\",-1608172596),\"huginn.mqtt\",null,84,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay((function (){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [\"client connection failure\"], null);\n}),null)),null,-1932873770);\n\nreturn (fail.cljs$core$IFn$_invoke$arity$0 ? fail.cljs$core$IFn$_invoke$arity$0() : fail.call(null));\n}\n}),\"close\",(function (){\nreturn null;\n}),\"reconnect\",(function (){\nreturn taoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"info\",\"info\",-317069002),\"huginn.mqtt\",null,87,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay((function (){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [\"reconnecting\"], null);\n}),null)),null,1857536077);\n}),\"error\",(function (err){\nreturn taoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"error\",\"error\",-978969032),\"huginn.mqtt\",null,88,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay((function (){\nreturn new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [\"error: \",err], null);\n}),null)),null,2126651800);\n}),\"message\",(function (topic,message,packet){\nvar c__1759__auto__ = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run(((function (c__1759__auto__){\nreturn (function (){\nvar f__1760__auto__ = (function (){var switch__1642__auto__ = ((function (c__1759__auto__){\nreturn (function (state_4866){\nvar state_val_4867 = (state_4866[(1)]);\nif((state_val_4867 === (1))){\nvar inst_4860 = [new cljs.core.Keyword(null,\"topic\",\"topic\",-1960480691),new cljs.core.Keyword(null,\"message\",\"message\",-406056002),new cljs.core.Keyword(null,\"packet\",\"packet\",-533558081)];\nvar inst_4861 = [topic,message,packet];\nvar inst_4862 = cljs.core.PersistentHashMap.fromArrays(inst_4860,inst_4861);\nvar state_4866__$1 = state_4866;\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_4866__$1,(2),recv,inst_4862);\n} else {\nif((state_val_4867 === (2))){\nvar inst_4864 = (state_4866[(2)]);\nvar state_4866__$1 = state_4866;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_4866__$1,inst_4864);\n} else {\nreturn null;\n}\n}\n});})(c__1759__auto__))\n;\nreturn ((function (switch__1642__auto__,c__1759__auto__){\nreturn (function() {\nvar huginn$mqtt$client_handlers_$_state_machine__1643__auto__ = null;\nvar huginn$mqtt$client_handlers_$_state_machine__1643__auto____0 = (function (){\nvar statearr_4868 = [null,null,null,null,null,null,null];\n(statearr_4868[(0)] = huginn$mqtt$client_handlers_$_state_machine__1643__auto__);\n\n(statearr_4868[(1)] = (1));\n\nreturn statearr_4868;\n});\nvar huginn$mqtt$client_handlers_$_state_machine__1643__auto____1 = (function (state_4866){\nwhile(true){\nvar ret_value__1644__auto__ = (function (){try{while(true){\nvar result__1645__auto__ = switch__1642__auto__(state_4866);\nif(cljs.core.keyword_identical_QMARK_(result__1645__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\ncontinue;\n} else {\nreturn result__1645__auto__;\n}\nbreak;\n}\n}catch (e4869){if((e4869 instanceof Object)){\nvar ex__1646__auto__ = e4869;\nvar statearr_4870_5081 = state_4866;\n(statearr_4870_5081[(5)] = ex__1646__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_4866);\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nthrow e4869;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__1644__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\nvar G__5085 = state_4866;\nstate_4866 = G__5085;\ncontinue;\n} else {\nreturn ret_value__1644__auto__;\n}\nbreak;\n}\n});\nhuginn$mqtt$client_handlers_$_state_machine__1643__auto__ = function(state_4866){\nswitch(arguments.length){\ncase 0:\nreturn huginn$mqtt$client_handlers_$_state_machine__1643__auto____0.call(this);\ncase 1:\nreturn huginn$mqtt$client_handlers_$_state_machine__1643__auto____1.call(this,state_4866);\n}\nthrow(new Error('Invalid arity: ' + arguments.length));\n};\nhuginn$mqtt$client_handlers_$_state_machine__1643__auto__.cljs$core$IFn$_invoke$arity$0 = huginn$mqtt$client_handlers_$_state_machine__1643__auto____0;\nhuginn$mqtt$client_handlers_$_state_machine__1643__auto__.cljs$core$IFn$_invoke$arity$1 = huginn$mqtt$client_handlers_$_state_machine__1643__auto____1;\nreturn huginn$mqtt$client_handlers_$_state_machine__1643__auto__;\n})()\n;})(switch__1642__auto__,c__1759__auto__))\n})();\nvar state__1761__auto__ = (function (){var statearr_4871 = (f__1760__auto__.cljs$core$IFn$_invoke$arity$0 ? f__1760__auto__.cljs$core$IFn$_invoke$arity$0() : f__1760__auto__.call(null));\n(statearr_4871[(6)] = c__1759__auto__);\n\nreturn statearr_4871;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__1761__auto__);\n});})(c__1759__auto__))\n);\n\nreturn c__1759__auto__;\n})], null);\n});\n/**\n * takes a map of handlers and attaches them to the mqtt object\n */\nhuginn.mqtt.add_handlers = (function huginn$mqtt$add_handlers(client,handlers){\nvar seq__4872 = cljs.core.seq(handlers);\nvar chunk__4873 = null;\nvar count__4874 = (0);\nvar i__4875 = (0);\nwhile(true){\nif((i__4875 < count__4874)){\nvar vec__4876 = chunk__4873.cljs$core$IIndexed$_nth$arity$2(null,i__4875);\nvar key = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__4876,(0),null);\nvar hand = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__4876,(1),null);\nclient.on(key,hand);\n\n\nvar G__5089 = seq__4872;\nvar G__5090 = chunk__4873;\nvar G__5091 = count__4874;\nvar G__5092 = (i__4875 + (1));\nseq__4872 = G__5089;\nchunk__4873 = G__5090;\ncount__4874 = G__5091;\ni__4875 = G__5092;\ncontinue;\n} else {\nvar temp__5457__auto__ = cljs.core.seq(seq__4872);\nif(temp__5457__auto__){\nvar seq__4872__$1 = temp__5457__auto__;\nif(cljs.core.chunked_seq_QMARK_(seq__4872__$1)){\nvar c__4351__auto__ = cljs.core.chunk_first(seq__4872__$1);\nvar G__5093 = cljs.core.chunk_rest(seq__4872__$1);\nvar G__5094 = c__4351__auto__;\nvar G__5095 = cljs.core.count(c__4351__auto__);\nvar G__5096 = (0);\nseq__4872 = G__5093;\nchunk__4873 = G__5094;\ncount__4874 = G__5095;\ni__4875 = G__5096;\ncontinue;\n} else {\nvar vec__4879 = cljs.core.first(seq__4872__$1);\nvar key = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__4879,(0),null);\nvar hand = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__4879,(1),null);\nclient.on(key,hand);\n\n\nvar G__5098 = cljs.core.next(seq__4872__$1);\nvar G__5099 = null;\nvar G__5100 = (0);\nvar G__5101 = (0);\nseq__4872 = G__5098;\nchunk__4873 = G__5099;\ncount__4874 = G__5100;\ni__4875 = G__5101;\ncontinue;\n}\n} else {\nreturn null;\n}\n}\nbreak;\n}\n});\ncljs.spec.alpha.def_impl(new cljs.core.Symbol(\"huginn.mqtt\",\"build-client\",\"huginn.mqtt/build-client\",-620852627,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"fspec\",\"cljs.spec.alpha/fspec\",-1289128341,null),new cljs.core.Keyword(null,\"args\",\"args\",1315556576),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891))),cljs.spec.alpha.fspec_impl(cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891)),cljs.spec.alpha.cat_impl(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"opts\",\"opts\",155075701)], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891)], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891)], null)),null,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891)),cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null),cljs.core.any_QMARK_,null,null),new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null),null,null,null));\nhuginn.mqtt.build_client = (function huginn$mqtt$build_client(opts){\n\nvar conn_args = huginn.jwt.google_iot_conn_args(opts);\nvar client = (new shadow.js.shim.module$gcic_mqtt_client(conn_args));\nreturn new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,\"client\",\"client\",-1323448117),client], null);\n});\ncljs.spec.alpha.def_impl(new cljs.core.Symbol(\"huginn.mqtt\",\"init-client\",\"huginn.mqtt/init-client\",-283765885,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"fspec\",\"cljs.spec.alpha/fspec\",-1289128341,null),new cljs.core.Keyword(null,\"args\",\"args\",1315556576),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(null,\"send\",\"send\",-652151114),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(null,\"recv\",\"recv\",558628610),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264)),new cljs.core.Keyword(null,\"ret\",\"ret\",-468222814),new cljs.core.Symbol(\"promesa.core\",\"promise?\",\"promesa.core/promise?\",-1893544292,null)),cljs.spec.alpha.fspec_impl(cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(null,\"send\",\"send\",-652151114),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(null,\"recv\",\"recv\",558628610),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264)),cljs.spec.alpha.cat_impl(new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(null,\"send\",\"send\",-652151114),new cljs.core.Keyword(null,\"recv\",\"recv\",558628610)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264)], null)),null,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(null,\"send\",\"send\",-652151114),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(null,\"recv\",\"recv\",558628610),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264)),cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(new cljs.core.Symbol(\"promesa.core\",\"promise?\",\"promesa.core/promise?\",-1893544292,null),promesa.core.promise_QMARK_,null,null),new cljs.core.Symbol(\"promesa.core\",\"promise?\",\"promesa.core/promise?\",-1893544292,null),null,null,null));\nhuginn.mqtt.init_client = (function huginn$mqtt$init_client(opts,send,recv){\n\nreturn promesa.core.promise((function (resolve,reject){\nvar map__4882 = huginn.mqtt.build_client(opts);\nvar map__4882__$1 = ((((!((map__4882 == null)))?(((((map__4882.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__4882.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__4882):map__4882);\nvar init = map__4882__$1;\nvar client = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__4882__$1,new cljs.core.Keyword(null,\"client\",\"client\",-1323448117));\nvar handlers = huginn.mqtt.client_handlers(((function (map__4882,map__4882__$1,init,client){\nreturn (function (){\nreturn (resolve.cljs$core$IFn$_invoke$arity$1 ? resolve.cljs$core$IFn$_invoke$arity$1(client) : resolve.call(null,client));\n});})(map__4882,map__4882__$1,init,client))\n,((function (map__4882,map__4882__$1,init,client){\nreturn (function (){\nvar G__4884 = new cljs.core.Keyword(null,\"client-fail\",\"client-fail\",1564298304);\nreturn (reject.cljs$core$IFn$_invoke$arity$1 ? reject.cljs$core$IFn$_invoke$arity$1(G__4884) : reject.call(null,G__4884));\n});})(map__4882,map__4882__$1,init,client))\n,send,recv);\nclient.subscribe(huginn.mqtt.config_chan(opts));\n\nreturn huginn.mqtt.add_handlers(client,handlers);\n}));\n});\n/**\n * builds the prefix of the actual values being sent\n *   (str (payload-root config) sensor-name /  sensor-value)\n */\nhuginn.mqtt.payload_root = (function huginn$mqtt$payload_root(p__4885){\nvar map__4886 = p__4885;\nvar map__4886__$1 = ((((!((map__4886 == null)))?(((((map__4886.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__4886.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__4886):map__4886);\nvar opts = map__4886__$1;\nvar registryId = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__4886__$1,new cljs.core.Keyword(null,\"registryId\",\"registryId\",-1767694006));\nvar userId = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__4886__$1,new cljs.core.Keyword(null,\"userId\",\"userId\",575594135));\nvar deviceId = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__4886__$1,new cljs.core.Keyword(null,\"deviceId\",\"deviceId\",1909987208));\nreturn [cljs.core.str.cljs$core$IFn$_invoke$arity$1(registryId),\"/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(userId),\"/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(deviceId),\"-payload\"].join('');\n});\ncljs.spec.alpha.def_impl(new cljs.core.Symbol(\"huginn.mqtt\",\"mqtt-topic\",\"huginn.mqtt/mqtt-topic\",-2087820524,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"fspec\",\"cljs.spec.alpha/fspec\",-1289128341,null),new cljs.core.Keyword(null,\"args\",\"args\",1315556576),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(null,\"msg-type\",\"msg-type\",-2132567822),new cljs.core.Keyword(\"huginn.mqtt\",\"topic-type\",\"huginn.mqtt/topic-type\",-1269163830)),new cljs.core.Keyword(null,\"ret\",\"ret\",-468222814),new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null)),cljs.spec.alpha.fspec_impl(cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(null,\"msg-type\",\"msg-type\",-2132567822),new cljs.core.Keyword(\"huginn.mqtt\",\"topic-type\",\"huginn.mqtt/topic-type\",-1269163830)),cljs.spec.alpha.cat_impl(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(null,\"msg-type\",\"msg-type\",-2132567822)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(\"huginn.mqtt\",\"topic-type\",\"huginn.mqtt/topic-type\",-1269163830)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(\"huginn.mqtt\",\"topic-type\",\"huginn.mqtt/topic-type\",-1269163830)], null)),null,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(null,\"msg-type\",\"msg-type\",-2132567822),new cljs.core.Keyword(\"huginn.mqtt\",\"topic-type\",\"huginn.mqtt/topic-type\",-1269163830)),cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null),cljs.core.string_QMARK_,null,null),new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null),null,null,null));\n/**\n * msg-type can be 'state' for state updates\n * or 'events' to publish telemetry\n */\nhuginn.mqtt.mqtt_topic = (function huginn$mqtt$mqtt_topic(p__4888,msg_type){\nvar map__4889 = p__4888;\nvar map__4889__$1 = ((((!((map__4889 == null)))?(((((map__4889.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__4889.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__4889):map__4889);\nvar opts = map__4889__$1;\nvar deviceId = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__4889__$1,new cljs.core.Keyword(null,\"deviceId\",\"deviceId\",1909987208));\nreturn [\"/devices/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(deviceId),\"/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(msg_type)].join('');\n});\ncljs.spec.alpha.def_impl(new cljs.core.Symbol(\"huginn.mqtt\",\"prep-temps\",\"huginn.mqtt/prep-temps\",-1223395116,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"fspec\",\"cljs.spec.alpha/fspec\",-1289128341,null),new cljs.core.Keyword(null,\"args\",\"args\",1315556576),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(null,\"data\",\"data\",-232669377),new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null)),new cljs.core.Keyword(null,\"ret\",\"ret\",-468222814),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"coll-of\",\"cljs.spec.alpha/coll-of\",1019430407,null),new cljs.core.Keyword(\"huginn.mqtt\",\"mqtt-packet\",\"huginn.mqtt/mqtt-packet\",1651733234))),cljs.spec.alpha.fspec_impl(cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(null,\"data\",\"data\",-232669377),new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null)),cljs.spec.alpha.cat_impl(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(null,\"data\",\"data\",-232669377)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),cljs.core.any_QMARK_], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null)], null)),null,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(null,\"data\",\"data\",-232669377),new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null)),cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"coll-of\",\"cljs.spec.alpha/coll-of\",1019430407,null),new cljs.core.Keyword(\"huginn.mqtt\",\"mqtt-packet\",\"huginn.mqtt/mqtt-packet\",1651733234)),cljs.spec.alpha.every_impl.cljs$core$IFn$_invoke$arity$4(new cljs.core.Keyword(\"huginn.mqtt\",\"mqtt-packet\",\"huginn.mqtt/mqtt-packet\",1651733234),new cljs.core.Keyword(\"huginn.mqtt\",\"mqtt-packet\",\"huginn.mqtt/mqtt-packet\",1651733234),new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(\"cljs.spec.alpha\",\"kind-form\",\"cljs.spec.alpha/kind-form\",-1047104697),null,new cljs.core.Keyword(\"cljs.spec.alpha\",\"cpred\",\"cljs.spec.alpha/cpred\",-693471218),(function (G__4891){\nreturn cljs.core.coll_QMARK_(G__4891);\n}),new cljs.core.Keyword(\"cljs.spec.alpha\",\"conform-all\",\"cljs.spec.alpha/conform-all\",45201917),true,new cljs.core.Keyword(\"cljs.spec.alpha\",\"describe\",\"cljs.spec.alpha/describe\",1883026911),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"coll-of\",\"cljs.spec.alpha/coll-of\",1019430407,null),new cljs.core.Keyword(\"huginn.mqtt\",\"mqtt-packet\",\"huginn.mqtt/mqtt-packet\",1651733234))], null),null),null,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"coll-of\",\"cljs.spec.alpha/coll-of\",1019430407,null),new cljs.core.Keyword(\"huginn.mqtt\",\"mqtt-packet\",\"huginn.mqtt/mqtt-packet\",1651733234)),null,null,null));\n/**\n * pulls the data out of the systeminformation library and wrapping them up\n *   to be sent into mqtt\n */\nhuginn.mqtt.prep_temps = (function huginn$mqtt$prep_temps(opts,data){\nvar pr = huginn.mqtt.payload_root(opts);\nvar cores_raw = cljs.core.js__GT_clj.cljs$core$IFn$_invoke$arity$1(data.cores);\nvar cores = cljs.core.map_indexed.cljs$core$IFn$_invoke$arity$2(((function (pr,cores_raw){\nreturn (function (index,value){\nreturn new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,\"payload\",\"payload\",-383036092),[cljs.core.str.cljs$core$IFn$_invoke$arity$1(pr),\"-core-temp-\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(index),\"/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1([cljs.core.str.cljs$core$IFn$_invoke$arity$1(value)].join(''))].join(''),new cljs.core.Keyword(null,\"subfolder\",\"subfolder\",1044158439),[\"metrics/core-temp-\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(index)].join(''),new cljs.core.Keyword(null,\"qos\",\"qos\",-2124292319),(1),new cljs.core.Keyword(null,\"ts\",\"ts\",1617209904),huginn.jwt.round_now()], null);\n});})(pr,cores_raw))\n,cores_raw);\nvar main = (cljs.core.truth_(data.main)?new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,\"payload\",\"payload\",-383036092),[cljs.core.str.cljs$core$IFn$_invoke$arity$1(pr),\"-core-temp-main/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1([cljs.core.str.cljs$core$IFn$_invoke$arity$1(data.main)].join(''))].join(''),new cljs.core.Keyword(null,\"subfolder\",\"subfolder\",1044158439),\"metrics/core-temp-main\",new cljs.core.Keyword(null,\"qos\",\"qos\",-2124292319),(1),new cljs.core.Keyword(null,\"ts\",\"ts\",1617209904),huginn.jwt.round_now()], null):null);\nvar max = (cljs.core.truth_(data.max)?new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,\"payload\",\"payload\",-383036092),[cljs.core.str.cljs$core$IFn$_invoke$arity$1(pr),\"-core-temp-max/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1([cljs.core.str.cljs$core$IFn$_invoke$arity$1(data.max)].join(''))].join(''),new cljs.core.Keyword(null,\"subfolder\",\"subfolder\",1044158439),\"metrics/core-temp-max\",new cljs.core.Keyword(null,\"qos\",\"qos\",-2124292319),(1),new cljs.core.Keyword(null,\"ts\",\"ts\",1617209904),huginn.jwt.round_now()], null):null);\nreturn cljs.core.concat.cljs$core$IFn$_invoke$arity$variadic(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [main], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [max], null),cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cores], 0));\n});\nhuginn.mqtt.stop = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(false);\ncljs.spec.alpha.def_impl(new cljs.core.Symbol(\"huginn.mqtt\",\"publish-one\",\"huginn.mqtt/publish-one\",1981166109,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"fspec\",\"cljs.spec.alpha/fspec\",-1289128341,null),new cljs.core.Keyword(null,\"args\",\"args\",1315556576),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"client\",\"client\",-1323448117),new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null),new cljs.core.Keyword(null,\"packet\",\"packet\",-533558081),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"or\",\"cljs.spec.alpha/or\",-831679639,null),new cljs.core.Keyword(null,\"nil\",\"nil\",99600501),new cljs.core.Symbol(\"cljs.core\",\"nil?\",\"cljs.core/nil?\",945071861,null),new cljs.core.Keyword(null,\"value\",\"value\",305978217),new cljs.core.Keyword(\"huginn.mqtt\",\"mqtt-packet\",\"huginn.mqtt/mqtt-packet\",1651733234)))),cljs.spec.alpha.fspec_impl(cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"client\",\"client\",-1323448117),new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null),new cljs.core.Keyword(null,\"packet\",\"packet\",-533558081),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"or\",\"cljs.spec.alpha/or\",-831679639,null),new cljs.core.Keyword(null,\"nil\",\"nil\",99600501),new cljs.core.Symbol(\"cljs.core\",\"nil?\",\"cljs.core/nil?\",945071861,null),new cljs.core.Keyword(null,\"value\",\"value\",305978217),new cljs.core.Keyword(\"huginn.mqtt\",\"mqtt-packet\",\"huginn.mqtt/mqtt-packet\",1651733234))),cljs.spec.alpha.cat_impl(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"client\",\"client\",-1323448117),new cljs.core.Keyword(null,\"packet\",\"packet\",-533558081)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.any_QMARK_,cljs.spec.alpha.or_spec_impl(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"nil\",\"nil\",99600501),new cljs.core.Keyword(null,\"value\",\"value\",305978217)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(\"cljs.core\",\"nil?\",\"cljs.core/nil?\",945071861,null),new cljs.core.Keyword(\"huginn.mqtt\",\"mqtt-packet\",\"huginn.mqtt/mqtt-packet\",1651733234)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.nil_QMARK_,new cljs.core.Keyword(\"huginn.mqtt\",\"mqtt-packet\",\"huginn.mqtt/mqtt-packet\",1651733234)], null),null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"or\",\"cljs.spec.alpha/or\",-831679639,null),new cljs.core.Keyword(null,\"nil\",\"nil\",99600501),new cljs.core.Symbol(\"cljs.core\",\"nil?\",\"cljs.core/nil?\",945071861,null),new cljs.core.Keyword(null,\"value\",\"value\",305978217),new cljs.core.Keyword(\"huginn.mqtt\",\"mqtt-packet\",\"huginn.mqtt/mqtt-packet\",1651733234))], null)),null,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"client\",\"client\",-1323448117),new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null),new cljs.core.Keyword(null,\"packet\",\"packet\",-533558081),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"or\",\"cljs.spec.alpha/or\",-831679639,null),new cljs.core.Keyword(null,\"nil\",\"nil\",99600501),new cljs.core.Symbol(\"cljs.core\",\"nil?\",\"cljs.core/nil?\",945071861,null),new cljs.core.Keyword(null,\"value\",\"value\",305978217),new cljs.core.Keyword(\"huginn.mqtt\",\"mqtt-packet\",\"huginn.mqtt/mqtt-packet\",1651733234))),cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null),cljs.core.any_QMARK_,null,null),new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null),null,null,null));\n/**\n * Publises one mqtt packet to the client\n */\nhuginn.mqtt.publish_one = (function huginn$mqtt$publish_one(client,p__4892){\nvar map__4893 = p__4892;\nvar map__4893__$1 = ((((!((map__4893 == null)))?(((((map__4893.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__4893.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__4893):map__4893);\nvar p = map__4893__$1;\nvar topic = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__4893__$1,new cljs.core.Keyword(null,\"topic\",\"topic\",-1960480691));\nvar payload = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__4893__$1,new cljs.core.Keyword(null,\"payload\",\"payload\",-383036092));\nvar qos = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__4893__$1,new cljs.core.Keyword(null,\"qos\",\"qos\",-2124292319));\nif(cljs.core.truth_(p)){\nreturn client.publishEvent(payload,(1),topic);\n} else {\nreturn null;\n}\n});\n/**\n * main loop that pushes packets added to the send-chan to google iot core\n */\nhuginn.mqtt.publisher = (function huginn$mqtt$publisher(client_atom,send_chan){\nvar c__1759__auto__ = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run(((function (c__1759__auto__){\nreturn (function (){\nvar f__1760__auto__ = (function (){var switch__1642__auto__ = ((function (c__1759__auto__){\nreturn (function (state_4904){\nvar state_val_4905 = (state_4904[(1)]);\nif((state_val_4905 === (1))){\nvar state_4904__$1 = state_4904;\nvar statearr_4906_5120 = state_4904__$1;\n(statearr_4906_5120[(2)] = null);\n\n(statearr_4906_5120[(1)] = (2));\n\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nif((state_val_4905 === (2))){\nvar state_4904__$1 = state_4904;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_4904__$1,(4),send_chan);\n} else {\nif((state_val_4905 === (3))){\nvar inst_4902 = (state_4904[(2)]);\nvar state_4904__$1 = state_4904;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_4904__$1,inst_4902);\n} else {\nif((state_val_4905 === (4))){\nvar inst_4897 = (state_4904[(2)]);\nvar inst_4898 = cljs.core.deref(client_atom);\nvar inst_4899 = huginn.mqtt.publish_one(inst_4898,inst_4897);\nvar state_4904__$1 = (function (){var statearr_4907 = state_4904;\n(statearr_4907[(7)] = inst_4899);\n\nreturn statearr_4907;\n})();\nvar statearr_4908_5121 = state_4904__$1;\n(statearr_4908_5121[(2)] = null);\n\n(statearr_4908_5121[(1)] = (2));\n\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nreturn null;\n}\n}\n}\n}\n});})(c__1759__auto__))\n;\nreturn ((function (switch__1642__auto__,c__1759__auto__){\nreturn (function() {\nvar huginn$mqtt$publisher_$_state_machine__1643__auto__ = null;\nvar huginn$mqtt$publisher_$_state_machine__1643__auto____0 = (function (){\nvar statearr_4909 = [null,null,null,null,null,null,null,null];\n(statearr_4909[(0)] = huginn$mqtt$publisher_$_state_machine__1643__auto__);\n\n(statearr_4909[(1)] = (1));\n\nreturn statearr_4909;\n});\nvar huginn$mqtt$publisher_$_state_machine__1643__auto____1 = (function (state_4904){\nwhile(true){\nvar ret_value__1644__auto__ = (function (){try{while(true){\nvar result__1645__auto__ = switch__1642__auto__(state_4904);\nif(cljs.core.keyword_identical_QMARK_(result__1645__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\ncontinue;\n} else {\nreturn result__1645__auto__;\n}\nbreak;\n}\n}catch (e4910){if((e4910 instanceof Object)){\nvar ex__1646__auto__ = e4910;\nvar statearr_4911_5122 = state_4904;\n(statearr_4911_5122[(5)] = ex__1646__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_4904);\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nthrow e4910;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__1644__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\nvar G__5123 = state_4904;\nstate_4904 = G__5123;\ncontinue;\n} else {\nreturn ret_value__1644__auto__;\n}\nbreak;\n}\n});\nhuginn$mqtt$publisher_$_state_machine__1643__auto__ = function(state_4904){\nswitch(arguments.length){\ncase 0:\nreturn huginn$mqtt$publisher_$_state_machine__1643__auto____0.call(this);\ncase 1:\nreturn huginn$mqtt$publisher_$_state_machine__1643__auto____1.call(this,state_4904);\n}\nthrow(new Error('Invalid arity: ' + arguments.length));\n};\nhuginn$mqtt$publisher_$_state_machine__1643__auto__.cljs$core$IFn$_invoke$arity$0 = huginn$mqtt$publisher_$_state_machine__1643__auto____0;\nhuginn$mqtt$publisher_$_state_machine__1643__auto__.cljs$core$IFn$_invoke$arity$1 = huginn$mqtt$publisher_$_state_machine__1643__auto____1;\nreturn huginn$mqtt$publisher_$_state_machine__1643__auto__;\n})()\n;})(switch__1642__auto__,c__1759__auto__))\n})();\nvar state__1761__auto__ = (function (){var statearr_4912 = (f__1760__auto__.cljs$core$IFn$_invoke$arity$0 ? f__1760__auto__.cljs$core$IFn$_invoke$arity$0() : f__1760__auto__.call(null));\n(statearr_4912[(6)] = c__1759__auto__);\n\nreturn statearr_4912;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__1761__auto__);\n});})(c__1759__auto__))\n);\n\nreturn c__1759__auto__;\n});\n/**\n * loops and refreshs the client atom every token experation.\n *   Mqtt requires that you refresh your token frequently (less then 20 mins)\n */\nhuginn.mqtt.client_refresher = (function huginn$mqtt$client_refresher(client_atom,p__4913,send,recv){\nvar map__4914 = p__4913;\nvar map__4914__$1 = ((((!((map__4914 == null)))?(((((map__4914.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__4914.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__4914):map__4914);\nvar opts = map__4914__$1;\nvar tokenExpMins = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__4914__$1,new cljs.core.Keyword(null,\"tokenExpMins\",\"tokenExpMins\",-1638711857));\nvar delayMs = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__4914__$1,new cljs.core.Keyword(null,\"delayMs\",\"delayMs\",-1017330168));\nvar client_send_chan = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$0();\nvar client_mixer = cljs.core.async.mix(client_send_chan);\ncljs.core.async.admix(client_mixer,send);\n\nvar c__1759__auto__ = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run(((function (c__1759__auto__,client_send_chan,client_mixer,map__4914,map__4914__$1,opts,tokenExpMins,delayMs){\nreturn (function (){\nvar f__1760__auto__ = (function (){var switch__1642__auto__ = ((function (c__1759__auto__,client_send_chan,client_mixer,map__4914,map__4914__$1,opts,tokenExpMins,delayMs){\nreturn (function (state_4940){\nvar state_val_4941 = (state_4940[(1)]);\nif((state_val_4941 === (1))){\nvar state_4940__$1 = state_4940;\nvar statearr_4942_5124 = state_4940__$1;\n(statearr_4942_5124[(2)] = null);\n\n(statearr_4942_5124[(1)] = (2));\n\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nif((state_val_4941 === (2))){\nvar inst_4917 = (tokenExpMins * (1000));\nvar inst_4918 = (inst_4917 * (60));\nvar inst_4919 = cljs.core.async.timeout(inst_4918);\nvar state_4940__$1 = state_4940;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_4940__$1,(4),inst_4919);\n} else {\nif((state_val_4941 === (3))){\nvar inst_4938 = (state_4940[(2)]);\nvar state_4940__$1 = state_4940;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_4940__$1,inst_4938);\n} else {\nif((state_val_4941 === (4))){\nvar inst_4921 = (state_4940[(2)]);\nvar inst_4922 = (function (){var wait = inst_4921;\nreturn ((function (wait,inst_4921,state_val_4941,c__1759__auto__,client_send_chan,client_mixer,map__4914,map__4914__$1,opts,tokenExpMins,delayMs){\nreturn (function (){\nreturn new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [\"\\tRefreshing token after \",((tokenExpMins * (1000)) * (60)),\"ms\"], null);\n});\n;})(wait,inst_4921,state_val_4941,c__1759__auto__,client_send_chan,client_mixer,map__4914,map__4914__$1,opts,tokenExpMins,delayMs))\n})();\nvar inst_4923 = (new cljs.core.Delay(inst_4922,null));\nvar inst_4924 = taoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"info\",\"info\",-317069002),\"huginn.mqtt\",null,213,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),inst_4923,null,-30375522);\nvar inst_4925 = [send];\nvar inst_4926 = [new cljs.core.Keyword(null,\"pause\",\"pause\",-2095325672)];\nvar inst_4927 = [true];\nvar inst_4928 = cljs.core.PersistentHashMap.fromArrays(inst_4926,inst_4927);\nvar inst_4929 = [inst_4928];\nvar inst_4930 = cljs.core.PersistentHashMap.fromArrays(inst_4925,inst_4929);\nvar inst_4931 = cljs.core.async.toggle(client_mixer,inst_4930);\nvar inst_4932 = cljs.core.deref(client_atom);\nvar inst_4933 = cljs.core.PersistentHashMap.EMPTY;\nvar inst_4934 = (function (){var wait = inst_4921;\nreturn ((function (wait,inst_4921,inst_4922,inst_4923,inst_4924,inst_4925,inst_4926,inst_4927,inst_4928,inst_4929,inst_4930,inst_4931,inst_4932,inst_4933,state_val_4941,c__1759__auto__,client_send_chan,client_mixer,map__4914,map__4914__$1,opts,tokenExpMins,delayMs){\nreturn (function (){\n(cljs.core.deref(client_atom)[\"password\"] = cljs.core.clj__GT_js(huginn.jwt.create_jwt(opts)));\n\nreturn cljs.core.deref(client_atom).reconnect(((function (wait,inst_4921,inst_4922,inst_4923,inst_4924,inst_4925,inst_4926,inst_4927,inst_4928,inst_4929,inst_4930,inst_4931,inst_4932,inst_4933,state_val_4941,c__1759__auto__,client_send_chan,client_mixer,map__4914,map__4914__$1,opts,tokenExpMins,delayMs){\nreturn (function (){\nreturn cljs.core.async.toggle(client_mixer,cljs.core.PersistentArrayMap.createAsIfByAssoc([send,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,\"pause\",\"pause\",-2095325672),false], null)]));\n});})(wait,inst_4921,inst_4922,inst_4923,inst_4924,inst_4925,inst_4926,inst_4927,inst_4928,inst_4929,inst_4930,inst_4931,inst_4932,inst_4933,state_val_4941,c__1759__auto__,client_send_chan,client_mixer,map__4914,map__4914__$1,opts,tokenExpMins,delayMs))\n);\n});\n;})(wait,inst_4921,inst_4922,inst_4923,inst_4924,inst_4925,inst_4926,inst_4927,inst_4928,inst_4929,inst_4930,inst_4931,inst_4932,inst_4933,state_val_4941,c__1759__auto__,client_send_chan,client_mixer,map__4914,map__4914__$1,opts,tokenExpMins,delayMs))\n})();\nvar inst_4935 = inst_4932.end(inst_4933,inst_4934);\nvar state_4940__$1 = (function (){var statearr_4943 = state_4940;\n(statearr_4943[(7)] = inst_4924);\n\n(statearr_4943[(8)] = inst_4935);\n\n(statearr_4943[(9)] = inst_4931);\n\nreturn statearr_4943;\n})();\nvar statearr_4944_5125 = state_4940__$1;\n(statearr_4944_5125[(2)] = null);\n\n(statearr_4944_5125[(1)] = (2));\n\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nreturn null;\n}\n}\n}\n}\n});})(c__1759__auto__,client_send_chan,client_mixer,map__4914,map__4914__$1,opts,tokenExpMins,delayMs))\n;\nreturn ((function (switch__1642__auto__,c__1759__auto__,client_send_chan,client_mixer,map__4914,map__4914__$1,opts,tokenExpMins,delayMs){\nreturn (function() {\nvar huginn$mqtt$client_refresher_$_state_machine__1643__auto__ = null;\nvar huginn$mqtt$client_refresher_$_state_machine__1643__auto____0 = (function (){\nvar statearr_4945 = [null,null,null,null,null,null,null,null,null,null];\n(statearr_4945[(0)] = huginn$mqtt$client_refresher_$_state_machine__1643__auto__);\n\n(statearr_4945[(1)] = (1));\n\nreturn statearr_4945;\n});\nvar huginn$mqtt$client_refresher_$_state_machine__1643__auto____1 = (function (state_4940){\nwhile(true){\nvar ret_value__1644__auto__ = (function (){try{while(true){\nvar result__1645__auto__ = switch__1642__auto__(state_4940);\nif(cljs.core.keyword_identical_QMARK_(result__1645__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\ncontinue;\n} else {\nreturn result__1645__auto__;\n}\nbreak;\n}\n}catch (e4946){if((e4946 instanceof Object)){\nvar ex__1646__auto__ = e4946;\nvar statearr_4947_5126 = state_4940;\n(statearr_4947_5126[(5)] = ex__1646__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_4940);\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nthrow e4946;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__1644__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\nvar G__5127 = state_4940;\nstate_4940 = G__5127;\ncontinue;\n} else {\nreturn ret_value__1644__auto__;\n}\nbreak;\n}\n});\nhuginn$mqtt$client_refresher_$_state_machine__1643__auto__ = function(state_4940){\nswitch(arguments.length){\ncase 0:\nreturn huginn$mqtt$client_refresher_$_state_machine__1643__auto____0.call(this);\ncase 1:\nreturn huginn$mqtt$client_refresher_$_state_machine__1643__auto____1.call(this,state_4940);\n}\nthrow(new Error('Invalid arity: ' + arguments.length));\n};\nhuginn$mqtt$client_refresher_$_state_machine__1643__auto__.cljs$core$IFn$_invoke$arity$0 = huginn$mqtt$client_refresher_$_state_machine__1643__auto____0;\nhuginn$mqtt$client_refresher_$_state_machine__1643__auto__.cljs$core$IFn$_invoke$arity$1 = huginn$mqtt$client_refresher_$_state_machine__1643__auto____1;\nreturn huginn$mqtt$client_refresher_$_state_machine__1643__auto__;\n})()\n;})(switch__1642__auto__,c__1759__auto__,client_send_chan,client_mixer,map__4914,map__4914__$1,opts,tokenExpMins,delayMs))\n})();\nvar state__1761__auto__ = (function (){var statearr_4948 = (f__1760__auto__.cljs$core$IFn$_invoke$arity$0 ? f__1760__auto__.cljs$core$IFn$_invoke$arity$0() : f__1760__auto__.call(null));\n(statearr_4948[(6)] = c__1759__auto__);\n\nreturn statearr_4948;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__1761__auto__);\n});})(c__1759__auto__,client_send_chan,client_mixer,map__4914,map__4914__$1,opts,tokenExpMins,delayMs))\n);\n\nreturn c__1759__auto__;\n});\ncljs.spec.alpha.def_impl(new cljs.core.Symbol(\"huginn.mqtt\",\"tele-chan\",\"huginn.mqtt/tele-chan\",1912072830,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"fspec\",\"cljs.spec.alpha/fspec\",-1289128341,null),new cljs.core.Keyword(null,\"args\",\"args\",1315556576),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891)),new cljs.core.Keyword(null,\"ret\",\"ret\",-468222814),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264)),cljs.spec.alpha.fspec_impl(cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891)),cljs.spec.alpha.cat_impl(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"opts\",\"opts\",155075701)], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891)], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891)], null)),null,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891)),cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),null,null),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),null,null,null));\n/**\n * takes the client opts and builds a channel with system telementry\n *   values on it (cpu tempratures specifically)\n */\nhuginn.mqtt.tele_chan = (function huginn$mqtt$tele_chan(opts){\nvar temp_chan = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$0();\nvar out_chan = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$0();\nvar c__1759__auto___5128 = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run(((function (c__1759__auto___5128,temp_chan,out_chan){\nreturn (function (){\nvar f__1760__auto__ = (function (){var switch__1642__auto__ = ((function (c__1759__auto___5128,temp_chan,out_chan){\nreturn (function (state_4963){\nvar state_val_4964 = (state_4963[(1)]);\nif((state_val_4964 === (1))){\nvar state_4963__$1 = state_4963;\nvar statearr_4965_5129 = state_4963__$1;\n(statearr_4965_5129[(2)] = null);\n\n(statearr_4965_5129[(1)] = (2));\n\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nif((state_val_4964 === (2))){\nvar inst_4951 = shadow.js.shim.module$systeminformation.cpuTemperature();\nvar inst_4952 = (function (){return ((function (inst_4951,state_val_4964,c__1759__auto___5128,temp_chan,out_chan){\nreturn (function (p1__4949_SHARP_){\nreturn huginn.mqtt.prep_temps(opts,p1__4949_SHARP_);\n});\n;})(inst_4951,state_val_4964,c__1759__auto___5128,temp_chan,out_chan))\n})();\nvar inst_4953 = (function (){return ((function (inst_4951,inst_4952,state_val_4964,c__1759__auto___5128,temp_chan,out_chan){\nreturn (function (mqtt_packets){\nvar c__1759__auto____$1 = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run(((function (c__1759__auto____$1,inst_4951,inst_4952,state_val_4964,c__1759__auto___5128,temp_chan,out_chan){\nreturn (function (){\nvar f__1760__auto__ = (function (){var switch__1642__auto__ = ((function (c__1759__auto____$1,inst_4951,inst_4952,state_val_4964,c__1759__auto___5128,temp_chan,out_chan){\nreturn (function (state_4974){\nvar state_val_4975 = (state_4974[(1)]);\nif((state_val_4975 === (1))){\nvar inst_4966 = ((1000) * (60));\nvar inst_4967 = (inst_4966 * (1));\nvar inst_4968 = cljs.core.async.timeout(inst_4967);\nvar state_4974__$1 = state_4974;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_4974__$1,(2),inst_4968);\n} else {\nif((state_val_4975 === (2))){\nvar inst_4970 = (state_4974[(2)]);\nvar state_4974__$1 = (function (){var statearr_4976 = state_4974;\n(statearr_4976[(7)] = inst_4970);\n\nreturn statearr_4976;\n})();\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_4974__$1,(3),temp_chan,mqtt_packets);\n} else {\nif((state_val_4975 === (3))){\nvar inst_4972 = (state_4974[(2)]);\nvar state_4974__$1 = state_4974;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_4974__$1,inst_4972);\n} else {\nreturn null;\n}\n}\n}\n});})(c__1759__auto____$1,inst_4951,inst_4952,state_val_4964,c__1759__auto___5128,temp_chan,out_chan))\n;\nreturn ((function (switch__1642__auto__,c__1759__auto____$1,inst_4951,inst_4952,state_val_4964,c__1759__auto___5128,temp_chan,out_chan){\nreturn (function() {\nvar huginn$mqtt$tele_chan_$_state_machine__1643__auto__ = null;\nvar huginn$mqtt$tele_chan_$_state_machine__1643__auto____0 = (function (){\nvar statearr_4977 = [null,null,null,null,null,null,null,null];\n(statearr_4977[(0)] = huginn$mqtt$tele_chan_$_state_machine__1643__auto__);\n\n(statearr_4977[(1)] = (1));\n\nreturn statearr_4977;\n});\nvar huginn$mqtt$tele_chan_$_state_machine__1643__auto____1 = (function (state_4974){\nwhile(true){\nvar ret_value__1644__auto__ = (function (){try{while(true){\nvar result__1645__auto__ = switch__1642__auto__(state_4974);\nif(cljs.core.keyword_identical_QMARK_(result__1645__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\ncontinue;\n} else {\nreturn result__1645__auto__;\n}\nbreak;\n}\n}catch (e4978){if((e4978 instanceof Object)){\nvar ex__1646__auto__ = e4978;\nvar statearr_4979_5130 = state_4974;\n(statearr_4979_5130[(5)] = ex__1646__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_4974);\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nthrow e4978;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__1644__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\nvar G__5131 = state_4974;\nstate_4974 = G__5131;\ncontinue;\n} else {\nreturn ret_value__1644__auto__;\n}\nbreak;\n}\n});\nhuginn$mqtt$tele_chan_$_state_machine__1643__auto__ = function(state_4974){\nswitch(arguments.length){\ncase 0:\nreturn huginn$mqtt$tele_chan_$_state_machine__1643__auto____0.call(this);\ncase 1:\nreturn huginn$mqtt$tele_chan_$_state_machine__1643__auto____1.call(this,state_4974);\n}\nthrow(new Error('Invalid arity: ' + arguments.length));\n};\nhuginn$mqtt$tele_chan_$_state_machine__1643__auto__.cljs$core$IFn$_invoke$arity$0 = huginn$mqtt$tele_chan_$_state_machine__1643__auto____0;\nhuginn$mqtt$tele_chan_$_state_machine__1643__auto__.cljs$core$IFn$_invoke$arity$1 = huginn$mqtt$tele_chan_$_state_machine__1643__auto____1;\nreturn huginn$mqtt$tele_chan_$_state_machine__1643__auto__;\n})()\n;})(switch__1642__auto__,c__1759__auto____$1,inst_4951,inst_4952,state_val_4964,c__1759__auto___5128,temp_chan,out_chan))\n})();\nvar state__1761__auto__ = (function (){var statearr_4980 = (f__1760__auto__.cljs$core$IFn$_invoke$arity$0 ? f__1760__auto__.cljs$core$IFn$_invoke$arity$0() : f__1760__auto__.call(null));\n(statearr_4980[(6)] = c__1759__auto____$1);\n\nreturn statearr_4980;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__1761__auto__);\n});})(c__1759__auto____$1,inst_4951,inst_4952,state_val_4964,c__1759__auto___5128,temp_chan,out_chan))\n);\n\nreturn c__1759__auto____$1;\n});\n;})(inst_4951,inst_4952,state_val_4964,c__1759__auto___5128,temp_chan,out_chan))\n})();\nvar inst_4954 = promesa.core.chain.cljs$core$IFn$_invoke$arity$variadic(inst_4951,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_4952,inst_4953], 0));\nvar state_4963__$1 = (function (){var statearr_4981 = state_4963;\n(statearr_4981[(7)] = inst_4954);\n\nreturn statearr_4981;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_4963__$1,(4),temp_chan);\n} else {\nif((state_val_4964 === (3))){\nvar inst_4961 = (state_4963[(2)]);\nvar state_4963__$1 = state_4963;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_4963__$1,inst_4961);\n} else {\nif((state_val_4964 === (4))){\nvar inst_4956 = (state_4963[(2)]);\nvar state_4963__$1 = state_4963;\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_4963__$1,(5),out_chan,inst_4956);\n} else {\nif((state_val_4964 === (5))){\nvar inst_4958 = (state_4963[(2)]);\nvar state_4963__$1 = (function (){var statearr_4982 = state_4963;\n(statearr_4982[(8)] = inst_4958);\n\nreturn statearr_4982;\n})();\nvar statearr_4983_5132 = state_4963__$1;\n(statearr_4983_5132[(2)] = null);\n\n(statearr_4983_5132[(1)] = (2));\n\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nreturn null;\n}\n}\n}\n}\n}\n});})(c__1759__auto___5128,temp_chan,out_chan))\n;\nreturn ((function (switch__1642__auto__,c__1759__auto___5128,temp_chan,out_chan){\nreturn (function() {\nvar huginn$mqtt$tele_chan_$_state_machine__1643__auto__ = null;\nvar huginn$mqtt$tele_chan_$_state_machine__1643__auto____0 = (function (){\nvar statearr_4984 = [null,null,null,null,null,null,null,null,null];\n(statearr_4984[(0)] = huginn$mqtt$tele_chan_$_state_machine__1643__auto__);\n\n(statearr_4984[(1)] = (1));\n\nreturn statearr_4984;\n});\nvar huginn$mqtt$tele_chan_$_state_machine__1643__auto____1 = (function (state_4963){\nwhile(true){\nvar ret_value__1644__auto__ = (function (){try{while(true){\nvar result__1645__auto__ = switch__1642__auto__(state_4963);\nif(cljs.core.keyword_identical_QMARK_(result__1645__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\ncontinue;\n} else {\nreturn result__1645__auto__;\n}\nbreak;\n}\n}catch (e4985){if((e4985 instanceof Object)){\nvar ex__1646__auto__ = e4985;\nvar statearr_4986_5133 = state_4963;\n(statearr_4986_5133[(5)] = ex__1646__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_4963);\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nthrow e4985;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__1644__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\nvar G__5134 = state_4963;\nstate_4963 = G__5134;\ncontinue;\n} else {\nreturn ret_value__1644__auto__;\n}\nbreak;\n}\n});\nhuginn$mqtt$tele_chan_$_state_machine__1643__auto__ = function(state_4963){\nswitch(arguments.length){\ncase 0:\nreturn huginn$mqtt$tele_chan_$_state_machine__1643__auto____0.call(this);\ncase 1:\nreturn huginn$mqtt$tele_chan_$_state_machine__1643__auto____1.call(this,state_4963);\n}\nthrow(new Error('Invalid arity: ' + arguments.length));\n};\nhuginn$mqtt$tele_chan_$_state_machine__1643__auto__.cljs$core$IFn$_invoke$arity$0 = huginn$mqtt$tele_chan_$_state_machine__1643__auto____0;\nhuginn$mqtt$tele_chan_$_state_machine__1643__auto__.cljs$core$IFn$_invoke$arity$1 = huginn$mqtt$tele_chan_$_state_machine__1643__auto____1;\nreturn huginn$mqtt$tele_chan_$_state_machine__1643__auto__;\n})()\n;})(switch__1642__auto__,c__1759__auto___5128,temp_chan,out_chan))\n})();\nvar state__1761__auto__ = (function (){var statearr_4987 = (f__1760__auto__.cljs$core$IFn$_invoke$arity$0 ? f__1760__auto__.cljs$core$IFn$_invoke$arity$0() : f__1760__auto__.call(null));\n(statearr_4987[(6)] = c__1759__auto___5128);\n\nreturn statearr_4987;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__1761__auto__);\n});})(c__1759__auto___5128,temp_chan,out_chan))\n);\n\n\nreturn out_chan;\n});\ncljs.spec.alpha.def_impl(new cljs.core.Symbol(\"huginn.mqtt\",\"sender\",\"huginn.mqtt/sender\",-581128399,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"fspec\",\"cljs.spec.alpha/fspec\",-1289128341,null),new cljs.core.Keyword(null,\"args\",\"args\",1315556576),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"topic-name\",\"topic-name\",759633328),new cljs.core.Keyword(\"huginn.mqtt\",\"topic-type\",\"huginn.mqtt/topic-type\",-1269163830),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(null,\"send\",\"send\",-652151114),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(null,\"t-chan\",\"t-chan\",-1090442551),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264))),cljs.spec.alpha.fspec_impl(cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"topic-name\",\"topic-name\",759633328),new cljs.core.Keyword(\"huginn.mqtt\",\"topic-type\",\"huginn.mqtt/topic-type\",-1269163830),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(null,\"send\",\"send\",-652151114),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(null,\"t-chan\",\"t-chan\",-1090442551),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264)),cljs.spec.alpha.cat_impl(new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"topic-name\",\"topic-name\",759633328),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(null,\"send\",\"send\",-652151114),new cljs.core.Keyword(null,\"t-chan\",\"t-chan\",-1090442551)], null),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"topic-type\",\"huginn.mqtt/topic-type\",-1269163830),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264)], null),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"topic-type\",\"huginn.mqtt/topic-type\",-1269163830),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264)], null)),null,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"topic-name\",\"topic-name\",759633328),new cljs.core.Keyword(\"huginn.mqtt\",\"topic-type\",\"huginn.mqtt/topic-type\",-1269163830),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(null,\"send\",\"send\",-652151114),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(null,\"t-chan\",\"t-chan\",-1090442551),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264)),cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null),cljs.core.any_QMARK_,null,null),new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null),null,null,null));\n/**\n * takes information for the tele-chan in the form of collections of\n *   mqtt-packets and assignes a default topic if a subfolder is set,\n *   adds a default qos. Then takes the resulting structures and puts\n *   them on to the send channel. waits for :delayMs between collections \n */\nhuginn.mqtt.sender = (function huginn$mqtt$sender(topic_name,opts,send,t_chan){\nvar c__1759__auto__ = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run(((function (c__1759__auto__){\nreturn (function (){\nvar f__1760__auto__ = (function (){var switch__1642__auto__ = ((function (c__1759__auto__){\nreturn (function (state_5012){\nvar state_val_5013 = (state_5012[(1)]);\nif((state_val_5013 === (1))){\nvar state_5012__$1 = state_5012;\nvar statearr_5014_5135 = state_5012__$1;\n(statearr_5014_5135[(2)] = null);\n\n(statearr_5014_5135[(1)] = (2));\n\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nif((state_val_5013 === (2))){\nvar state_5012__$1 = state_5012;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_5012__$1,(4),t_chan);\n} else {\nif((state_val_5013 === (3))){\nvar inst_5010 = (state_5012[(2)]);\nvar state_5012__$1 = state_5012;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_5012__$1,inst_5010);\n} else {\nif((state_val_5013 === (4))){\nvar inst_4990 = (state_5012[(2)]);\nvar inst_4991 = huginn.mqtt.mqtt_topic(opts,topic_name);\nvar inst_4992 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(\"state\",topic_name);\nvar state_5012__$1 = (function (){var statearr_5015 = state_5012;\n(statearr_5015[(7)] = inst_4991);\n\n(statearr_5015[(8)] = inst_4990);\n\nreturn statearr_5015;\n})();\nif(inst_4992){\nvar statearr_5016_5136 = state_5012__$1;\n(statearr_5016_5136[(1)] = (5));\n\n} else {\nvar statearr_5017_5137 = state_5012__$1;\n(statearr_5017_5137[(1)] = (6));\n\n}\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nif((state_val_5013 === (5))){\nvar inst_4991 = (state_5012[(7)]);\nvar inst_4990 = (state_5012[(8)]);\nvar inst_4994 = (function (){var teles = inst_4990;\nvar topic = inst_4991;\nvar qos = ({\"qos\": (1)});\nreturn ((function (teles,topic,qos,inst_4991,inst_4990,state_val_5013,c__1759__auto__){\nreturn (function (){\nreturn new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [\"pushing state\",topic], null);\n});\n;})(teles,topic,qos,inst_4991,inst_4990,state_val_5013,c__1759__auto__))\n})();\nvar inst_4995 = (new cljs.core.Delay(inst_4994,null));\nvar inst_4996 = taoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"debug\",\"debug\",-1608172596),\"huginn.mqtt\",null,269,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),inst_4995,null,-1747459390);\nvar state_5012__$1 = state_5012;\nvar statearr_5018_5138 = state_5012__$1;\n(statearr_5018_5138[(2)] = inst_4996);\n\n(statearr_5018_5138[(1)] = (7));\n\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nif((state_val_5013 === (6))){\nvar state_5012__$1 = state_5012;\nvar statearr_5019_5139 = state_5012__$1;\n(statearr_5019_5139[(2)] = null);\n\n(statearr_5019_5139[(1)] = (7));\n\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nif((state_val_5013 === (7))){\nvar inst_4991 = (state_5012[(7)]);\nvar inst_4990 = (state_5012[(8)]);\nvar inst_4999 = (state_5012[(2)]);\nvar inst_5001 = (function (){var teles = inst_4990;\nvar topic = inst_4991;\nvar qos = ({\"qos\": (1)});\nreturn ((function (teles,topic,qos,inst_4991,inst_4990,inst_4999,state_val_5013,c__1759__auto__){\nreturn (function (p__5000){\nvar map__5020 = p__5000;\nvar map__5020__$1 = ((((!((map__5020 == null)))?(((((map__5020.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__5020.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__5020):map__5020);\nvar mqtt_packet = map__5020__$1;\nvar subfolder = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__5020__$1,new cljs.core.Keyword(null,\"subfolder\",\"subfolder\",1044158439));\nvar my_topic = (cljs.core.truth_(subfolder)?[cljs.core.str.cljs$core$IFn$_invoke$arity$1(topic),\"/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(subfolder)].join(''):topic);\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(mqtt_packet,new cljs.core.Keyword(null,\"topic\",\"topic\",-1960480691),my_topic),new cljs.core.Keyword(null,\"qos\",\"qos\",-2124292319),qos);\n});\n;})(teles,topic,qos,inst_4991,inst_4990,inst_4999,state_val_5013,c__1759__auto__))\n})();\nvar inst_5002 = cljs.core.map.cljs$core$IFn$_invoke$arity$2(inst_5001,inst_4990);\nvar inst_5003 = cljs.core.async.onto_chan.cljs$core$IFn$_invoke$arity$3(send,inst_5002,false);\nvar inst_5004 = new cljs.core.Keyword(null,\"delayMs\",\"delayMs\",-1017330168).cljs$core$IFn$_invoke$arity$1(opts);\nvar inst_5005 = cljs.core.async.timeout(inst_5004);\nvar state_5012__$1 = (function (){var statearr_5022 = state_5012;\n(statearr_5022[(9)] = inst_4999);\n\n(statearr_5022[(10)] = inst_5003);\n\nreturn statearr_5022;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_5012__$1,(8),inst_5005);\n} else {\nif((state_val_5013 === (8))){\nvar inst_5007 = (state_5012[(2)]);\nvar state_5012__$1 = (function (){var statearr_5023 = state_5012;\n(statearr_5023[(11)] = inst_5007);\n\nreturn statearr_5023;\n})();\nvar statearr_5024_5140 = state_5012__$1;\n(statearr_5024_5140[(2)] = null);\n\n(statearr_5024_5140[(1)] = (2));\n\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nreturn null;\n}\n}\n}\n}\n}\n}\n}\n}\n});})(c__1759__auto__))\n;\nreturn ((function (switch__1642__auto__,c__1759__auto__){\nreturn (function() {\nvar huginn$mqtt$sender_$_state_machine__1643__auto__ = null;\nvar huginn$mqtt$sender_$_state_machine__1643__auto____0 = (function (){\nvar statearr_5025 = [null,null,null,null,null,null,null,null,null,null,null,null];\n(statearr_5025[(0)] = huginn$mqtt$sender_$_state_machine__1643__auto__);\n\n(statearr_5025[(1)] = (1));\n\nreturn statearr_5025;\n});\nvar huginn$mqtt$sender_$_state_machine__1643__auto____1 = (function (state_5012){\nwhile(true){\nvar ret_value__1644__auto__ = (function (){try{while(true){\nvar result__1645__auto__ = switch__1642__auto__(state_5012);\nif(cljs.core.keyword_identical_QMARK_(result__1645__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\ncontinue;\n} else {\nreturn result__1645__auto__;\n}\nbreak;\n}\n}catch (e5026){if((e5026 instanceof Object)){\nvar ex__1646__auto__ = e5026;\nvar statearr_5027_5141 = state_5012;\n(statearr_5027_5141[(5)] = ex__1646__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_5012);\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nthrow e5026;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__1644__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\nvar G__5142 = state_5012;\nstate_5012 = G__5142;\ncontinue;\n} else {\nreturn ret_value__1644__auto__;\n}\nbreak;\n}\n});\nhuginn$mqtt$sender_$_state_machine__1643__auto__ = function(state_5012){\nswitch(arguments.length){\ncase 0:\nreturn huginn$mqtt$sender_$_state_machine__1643__auto____0.call(this);\ncase 1:\nreturn huginn$mqtt$sender_$_state_machine__1643__auto____1.call(this,state_5012);\n}\nthrow(new Error('Invalid arity: ' + arguments.length));\n};\nhuginn$mqtt$sender_$_state_machine__1643__auto__.cljs$core$IFn$_invoke$arity$0 = huginn$mqtt$sender_$_state_machine__1643__auto____0;\nhuginn$mqtt$sender_$_state_machine__1643__auto__.cljs$core$IFn$_invoke$arity$1 = huginn$mqtt$sender_$_state_machine__1643__auto____1;\nreturn huginn$mqtt$sender_$_state_machine__1643__auto__;\n})()\n;})(switch__1642__auto__,c__1759__auto__))\n})();\nvar state__1761__auto__ = (function (){var statearr_5028 = (f__1760__auto__.cljs$core$IFn$_invoke$arity$0 ? f__1760__auto__.cljs$core$IFn$_invoke$arity$0() : f__1760__auto__.call(null));\n(statearr_5028[(6)] = c__1759__auto__);\n\nreturn statearr_5028;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__1761__auto__);\n});})(c__1759__auto__))\n);\n\nreturn c__1759__auto__;\n});\nhuginn.mqtt.state_send = cljs.core.partial.cljs$core$IFn$_invoke$arity$2(huginn.mqtt.sender,\"state\");\nhuginn.mqtt.tele_send = cljs.core.partial.cljs$core$IFn$_invoke$arity$2(huginn.mqtt.sender,\"events\");\nhuginn.mqtt.clean_up = (function huginn$mqtt$clean_up(p__5029){\nvar map__5030 = p__5029;\nvar map__5030__$1 = ((((!((map__5030 == null)))?(((((map__5030.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__5030.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__5030):map__5030);\nvar system = map__5030__$1;\nvar send_chan = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__5030__$1,new cljs.core.Keyword(null,\"send-chan\",\"send-chan\",1681189602));\nvar recv_chan = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__5030__$1,new cljs.core.Keyword(null,\"recv-chan\",\"recv-chan\",869238850));\nvar telemetry_chan = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__5030__$1,new cljs.core.Keyword(null,\"telemetry-chan\",\"telemetry-chan\",-1991836503));\nvar state_chan = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__5030__$1,new cljs.core.Keyword(null,\"state-chan\",\"state-chan\",-1042477017));\nvar client_atom = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__5030__$1,new cljs.core.Keyword(null,\"client-atom\",\"client-atom\",-1733084110));\ntaoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"debug\",\"debug\",-1608172596),\"huginn.mqtt\",null,290,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay(((function (map__5030,map__5030__$1,system,send_chan,recv_chan,telemetry_chan,state_chan,client_atom){\nreturn (function (){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [\"Killing system\"], null);\n});})(map__5030,map__5030__$1,system,send_chan,recv_chan,telemetry_chan,state_chan,client_atom))\n,null)),null,-598855570);\n\nreturn promesa.core.promise(((function (map__5030,map__5030__$1,system,send_chan,recv_chan,telemetry_chan,state_chan,client_atom){\nreturn (function (resolve,reject){\ncljs.core.doall.cljs$core$IFn$_invoke$arity$1(cljs.core.map.cljs$core$IFn$_invoke$arity$2(((function (map__5030,map__5030__$1,system,send_chan,recv_chan,telemetry_chan,state_chan,client_atom){\nreturn (function (c){\nreturn cljs.core.async.close_BANG_(c);\n});})(map__5030,map__5030__$1,system,send_chan,recv_chan,telemetry_chan,state_chan,client_atom))\n,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [send_chan,recv_chan,state_chan,telemetry_chan], null)));\n\ntaoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"debug\",\"debug\",-1608172596),\"huginn.mqtt\",null,296,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay(((function (map__5030,map__5030__$1,system,send_chan,recv_chan,telemetry_chan,state_chan,client_atom){\nreturn (function (){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [\"killing client\"], null);\n});})(map__5030,map__5030__$1,system,send_chan,recv_chan,telemetry_chan,state_chan,client_atom))\n,null)),null,1852304888);\n\ntaoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"debug\",\"debug\",-1608172596),\"huginn.mqtt\",null,297,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay(((function (map__5030,map__5030__$1,system,send_chan,recv_chan,telemetry_chan,state_chan,client_atom){\nreturn (function (){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.deref(client_atom)], null);\n});})(map__5030,map__5030__$1,system,send_chan,recv_chan,telemetry_chan,state_chan,client_atom))\n,null)),null,-2136547337);\n\nreturn cljs.core.deref(client_atom).end(({}),((function (map__5030,map__5030__$1,system,send_chan,recv_chan,telemetry_chan,state_chan,client_atom){\nreturn (function() { \nvar G__5143__delegate = function (args){\ntaoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"debug\",\"debug\",-1608172596),\"huginn.mqtt\",null,298,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay(((function (map__5030,map__5030__$1,system,send_chan,recv_chan,telemetry_chan,state_chan,client_atom){\nreturn (function (){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [\"client dead\"], null);\n});})(map__5030,map__5030__$1,system,send_chan,recv_chan,telemetry_chan,state_chan,client_atom))\n,null)),null,172136314);\n\nreturn (resolve.cljs$core$IFn$_invoke$arity$1 ? resolve.cljs$core$IFn$_invoke$arity$1(system) : resolve.call(null,system));\n};\nvar G__5143 = function (var_args){\nvar args = null;\nif (arguments.length > 0) {\nvar G__5144__i = 0, G__5144__a = new Array(arguments.length -  0);\nwhile (G__5144__i < G__5144__a.length) {G__5144__a[G__5144__i] = arguments[G__5144__i + 0]; ++G__5144__i;}\n  args = new cljs.core.IndexedSeq(G__5144__a,0,null);\n} \nreturn G__5143__delegate.call(this,args);};\nG__5143.cljs$lang$maxFixedArity = 0;\nG__5143.cljs$lang$applyTo = (function (arglist__5145){\nvar args = cljs.core.seq(arglist__5145);\nreturn G__5143__delegate(args);\n});\nG__5143.cljs$core$IFn$_invoke$arity$variadic = G__5143__delegate;\nreturn G__5143;\n})()\n;})(map__5030,map__5030__$1,system,send_chan,recv_chan,telemetry_chan,state_chan,client_atom))\n);\n});})(map__5030,map__5030__$1,system,send_chan,recv_chan,telemetry_chan,state_chan,client_atom))\n);\n});\n/**\n * the heart of the system lies here.\n *   This function takes options (config/default-options works well)\n *   It returns a map\n *   This map has\n *   :send-chan A channel you can use to directly send messages of mqtt, must be of the\n *   form {:payload string? :qos #js {:qos #{0 1 2}} :topic (topics can be built with mqtt-topic)}\n *   :recv-chan has items in the form of {:topic string? :message string? :packet buffer?}\n *   :state-chan, send things of the form (coll-of {:payload string?}), onto the state channel\n *   (google publishes these values to a differnt pubsub channel then device telemetry)\n *   :telemetry-chan, sends (coll-of {:payload string?}), all the events in the collections\n *   are sent in the same batch, the same is true for stat-chan.\n *   :client-atom, contains the current version of the mqtt client. This is an atom so\n *   that the client-refersher can refresh the authentication token and swap it.\n *   this pattern also ensures only one client\n * \n *   payloads must be prefixed with a string describing where the data came (payload-root opts) will generate this for you\n */\nhuginn.mqtt.system_function = (function huginn$mqtt$system_function(opts){\nvar send = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$0();\nvar recv = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$0();\nvar kill = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(false);\nvar client_promise = huginn.mqtt.init_client(opts,send,recv);\nvar client_atom = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(null);\nvar t_chan = huginn.mqtt.tele_chan(opts);\nvar state_chan = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$0();\nreturn promesa.core.then(client_promise,((function (send,recv,kill,client_promise,client_atom,t_chan,state_chan){\nreturn (function (client){\ncljs.core.reset_BANG_(client_atom,client);\n\nhuginn.mqtt.publisher(client_atom,send);\n\n(huginn.mqtt.tele_send.cljs$core$IFn$_invoke$arity$3 ? huginn.mqtt.tele_send.cljs$core$IFn$_invoke$arity$3(opts,send,t_chan) : huginn.mqtt.tele_send.call(null,opts,send,t_chan));\n\n(huginn.mqtt.state_send.cljs$core$IFn$_invoke$arity$3 ? huginn.mqtt.state_send.cljs$core$IFn$_invoke$arity$3(opts,send,state_chan) : huginn.mqtt.state_send.call(null,opts,send,state_chan));\n\nreturn new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,\"send-chan\",\"send-chan\",1681189602),send,new cljs.core.Keyword(null,\"recv-chan\",\"recv-chan\",869238850),recv,new cljs.core.Keyword(null,\"state-chan\",\"state-chan\",-1042477017),state_chan,new cljs.core.Keyword(null,\"telemetry-chan\",\"telemetry-chan\",-1991836503),t_chan,new cljs.core.Keyword(null,\"client-atom\",\"client-atom\",-1733084110),client_atom], null);\n});})(send,recv,kill,client_promise,client_atom,t_chan,state_chan))\n);\n});\n/**\n * Feed the system promise to this and it will kill it\n */\nhuginn.mqtt.kill_it = (function huginn$mqtt$kill_it(system_promise){\nreturn promesa.core.then(system_promise,huginn.mqtt.clean_up);\n});\n","~:ns-info",["^ ","~:rename-macros",null,"~:renames",["^ "],"~:meta",["^ ","~:file","huginn/mqtt.cljs","~:line",1,"~:column",5,"~:end-line",1,"~:end-column",16],"~:ns-aliases",["^ ","~$jsonwebtoken","~$shadow.js.shim.module$jsonwebtoken","~$systeminformation","~$shadow.js.shim.module$systeminformation","~$clojure.core.async","~$cljs.core.async","~$raspicam","~$shadow.js.shim.module$raspicam"],"~:use-macros",["^ ","~$get-env","~$taoensso.timbre","~$log","^F","~$logf","^F","~$reportf","^F","~$fatalf","^F","~$warnf","^F","~$report","^F","~$spy","^F","~$warn","^F","~$trace","^F","~$debug","^F","~$debugf","^F","~$tracef","^F","~$infof","^F","~$fatal","^F","~$errorf","^F","~$info","^F","~$error","^F"],"~:excludes",["~#set",[]],"~:name","~$huginn.mqtt","~:js-aliases",["^ ","gcic-mqtt-client","~$shadow.js.shim.module$gcic_mqtt_client"],"~:op","~:ns","~:imports",null,"~:requires",["^ ","^12","^12","~$p","~$promesa.core","^17","^17","~$timbre","^F","~$a","^A","~$si","^?","~$huginn.config","^1:","~$orchestra-cljs.spec.test","^1;","~$cljs.core","^1<","~$goog","^1=","^A","^A","^>","^?","~$config","^1:","~$cljs.nodejs","^1?","~$huginn.jwt","^1@","~$nodejs","^1?","~$s","~$cljs.spec.alpha","~$mqtt","^12","~$jw","^1@","^F","^F","^?","^?","~$clojure.string","^1E","~$st","^1E","^1B","^1B","~$spec-test","^1;"],"~:seen",["^Y",["~:require"]],"~:uses",null,"~:require-macros",["^ ","^F","^F","^18","^F","^1<","^1<","~$a","^A","^1;","^1;","^A","^A","~$s","^1B","^1B","^1B","^1G","^1;"],"~:form",["~#list",["~$ns","^[",["^1M",["^1I",["^17","~:as","~$p"],["^1E","^1O","^1F"],["^1@","^1O","^1D"],["gcic-mqtt-client","^1O","^1C"],["^1;","^1O","^1G"],["^1:","^1O","^1>"],["^F","^1O","^18","~:refer-macros",["^G","^O","^P","^V","^N","^W","^T","^L","^H","^R","^Q","^S","^K","^U","^J","^I","^M","^E"]],["^A","^1O","~$a"],["^>","^1O","^19"],["^1B","^1O","~$s"],["^1?","^1O","^1A"]]]]],"~:flags",["^ ","^1I",["^Y",[]]],"~:js-deps",["^ ","^11",["^ ","^1O","^1C"]],"~:deps",["^1=","^1<","^17","^1E","^1@","^12","^1;","^1:","^F","^A","^?","^1B","^1?"]],"^14","^[","~:resource-id",["~:shadow.build.classpath/resource","huginn/mqtt.cljs"],"~:compiled-at",1540188354156,"~:resource-name","huginn/mqtt.cljs","~:warnings",[],"~:source","(ns huginn.mqtt\n  (:require\n   [promesa.core :as p]\n   [clojure.string :as st]\n   [huginn.jwt :as jw]\n   [\"gcic-mqtt-client\" :as mqtt]\n   [orchestra-cljs.spec.test :as spec-test]\n   [huginn.config :as config]\n   [taoensso.timbre :as timbre\n    :refer-macros [log  trace  debug  info  warn  error  fatal  report\n                   logf tracef debugf infof warnf errorf fatalf reportf\n                   spy get-env]]\n   [cljs.core.async :as a]\n   [systeminformation :as si]\n   [cljs.spec.alpha :as s]\n   [cljs.nodejs :as nodejs]))\n\n\n(spec-test/instrument)\n\n(s/def ::projectId string?)\n(s/def ::registryId string?)\n(s/def ::cloudRegion string?)\n(s/def ::deviceId string?)\n(s/def ::chan any?)\n\n(s/def ::topic-type #{\"events\" \"state\"})\n\n\n(s/def ::client-config (s/keys :req-un\n                               [::projectId\n                                ::registryId\n                                ::cloudRegion\n                                ::deviceId]))\n\n(s/def ::payload (s/and string? #(< ( count %) 200000)))\n(s/def ::subfolder (s/and string? #(< (count %) 200)))\n(s/def ::ts float?)\n(s/def ::qos #{0 1})\n(s/def ::mqtt-packet\n  (s/keys :req-un [::payload\n                   ::subfolder\n                   ::qos \n                   ::ts]))\n\n(s/fdef client-id\n  :args ::client-config\n  :ret  string?)\n\n\n(defn client-id\n  \"Builds a client id used to identify the device this message is\n  comming from\"\n  [{:keys [projectId registryId cloudRegion deviceId] :as opts}]\n  (str \"projects/\" projectId\n       \"/locations/\" cloudRegion\n       \"/registries/\" registryId\n       \"/devices/\" deviceId))\n\n(s/fdef config-chan\n  :args (s/cat :opts (s/keys :req-un [::deviceId]))\n  :ret string?)\n(defn config-chan\n  \"google give each device two channeles, a state channel (the config channel)\n  and a telemetry channel (the one that we push all our data over). The name of\n  these channels are determined by google iot core.\"\n  [{:keys [deviceId] :as opts}]\n  (str \"/devices/\" deviceId \"/config\"))\n\n(s/fdef client-handlers\n  :args (s/cat :success-fn fn?\n               :fail       fn?\n               :send       ::chan\n               :recv       ::chan))\n\n(defn client-handlers\n  \"builds a map of handels to attach to the mqtt object\"\n  [success-fn fail send recv]\n  {\"connect\" (fn [success]\n               (if success\n                 (do\n                   (success-fn))\n                 (do\n                   (debug \"client connection failure\")\n                   (fail))))\n   \"close\"   (fn [] )\n   \"reconnect\" (fn [] (info \"reconnecting\"))\n   \"error\"   (fn [err] (error \"error: \" err))\n   \"message\" (fn [topic message packet]\n               (a/go\n                 (a/>! recv {:topic topic\n                             :message message\n                             :packet packet})))})\n\n\n(defn add-handlers\n  \"takes a map of handlers and attaches them to the mqtt object\"\n  [client handlers]\n  (doseq [[key hand] handlers]\n    (.on client key hand)))\n\n(s/fdef build-client\n  :args (s/cat :opts ::client-config))\n\n(defn build-client [opts]\n  \"builds the mqtt client using the client-config\nthe mqtt client is responsible for holding on to\nauth to talk to google iot core. The mqtt client\nis also responsible for actually pushing the data\nto google iot core.\"\n  (let [conn-args (jw/google-iot-conn-args opts)\n        client    (mqtt. conn-args)]\n    {:client client}))\n\n;This function is referenced before it is defined so we\n;declare it\n(declare publish-async)\n\n(s/fdef init-client\n  :args (s/cat :opts ::client-config\n               :send ::chan\n               :recv ::chan)\n  :ret p/promise?)\n\n(defn init-client [opts send recv]\n  \"using client config and a channel to send and a channel to recv on,\nbuilds an mqtt client that will read from the send chan and push to google\n  and write to the recv chan when google pushes to it. This object is wrapped\nin a promise that returns when the client is ready\"\n  (p/promise\n   (fn [resolve reject]\n     (let [{:keys [client] :as init} (build-client opts)\n           handlers (client-handlers #(resolve client) #(reject :client-fail) send recv)]\n       (.subscribe client (config-chan opts))\n       (add-handlers client handlers)))))\n\n(defn payload-root\n  \"builds the prefix of the actual values being sent\n  (str (payload-root config) sensor-name /  sensor-value)\"\n  [{:keys [registryId userId deviceId] :as opts}]\n  (str registryId \"/\" userId \"/\" deviceId \"-payload\"))\n\n(s/fdef mqtt-topic\n    :args (s/cat :opts     ::client-config\n                 :msg-type ::topic-type)\n    :ret string?)\n\n(defn mqtt-topic\n  \"msg-type can be 'state' for state updates\n   or 'events' to publish telemetry\"\n  [{:keys [deviceId] :as opts} msg-type]\n  (str \"/devices/\" deviceId \"/\" msg-type))\n\n(s/fdef prep-temps\n  :args (s/cat :opts ::client-config :data any?)\n  :ret (s/coll-of ::mqtt-packet))\n(defn prep-temps\n  \"pulls the data out of the systeminformation library and wrapping them up\n  to be sent into mqtt\"\n  [opts data]\n  (let [pr (payload-root opts)\n        cores-raw (js->clj (.-cores data))\n        cores (map-indexed\n               (fn [index value]\n                 {:payload (str pr \"-core-temp-\" index \"/\" (str value))\n                  :subfolder (str \"metrics/core-temp-\" index)\n                  :qos 1\n                  :ts (jw/round-now)})\n               cores-raw)\n        main (when (.-main data)\n               {:payload (str pr \"-core-temp-main/\" (str (.-main data)))\n                :subfolder \"metrics/core-temp-main\"\n                :qos 1\n                :ts (jw/round-now)})\n        max (when (.-max data)\n              {:payload (str pr \"-core-temp-max/\" (str (.-max data)))\n               :subfolder \"metrics/core-temp-max\"\n               :qos 1\n               :ts (jw/round-now)})]\n    (concat [main] [max] cores)))\n\n(def stop (atom false))\n\n(s/fdef publish-one\n  :args (s/cat :client any? :packet (s/or :nil nil? :value ::mqtt-packet)))\n(defn publish-one\n  \"Publises one mqtt packet to the client\"\n  [client {:keys [topic payload qos] :as p}]\n  (when p\n    (.publishEvent client payload  1 topic)))\n\n\n(defn publisher\n  \"main loop that pushes packets added to the send-chan to google iot core\"\n  [client-atom send-chan]\n  (a/go-loop []\n    (let [to-send (a/<! send-chan)]\n      (publish-one @client-atom to-send)\n      (recur))))\n\n(defn client-refresher\n  \"loops and refreshs the client atom every token experation.\n  Mqtt requires that you refresh your token frequently (less then 20 mins)\"\n  [client-atom {:keys [tokenExpMins delayMs] :as opts} send recv]\n  ; make a mixer so that we can pause the data when switching clients\n  (let [client-send-chan (a/chan)\n        client-mixer (a/mix client-send-chan)]\n    (a/admix client-mixer send)\n   ;Loop forever waiting for the tokenExpMins, then building a new client\n    (a/go-loop []\n   ; use core.async/timeout to set up a channel that has a value every tokenExpMins\n      (let [wait (a/<! (a/timeout (* tokenExpMins 1000 60)))]\n        (info \"\\tRefreshing token after \" (* tokenExpMins 1000 60)  \"ms\")\n        (a/toggle client-mixer {send {:pause true}})\n        (.end @client-atom\n              {}\n              (fn []\n                (aset @client-atom \"password\" (clj->js (jw/create-jwt opts)))\n                (.reconnect @client-atom\n                            (fn []\n                              (a/toggle client-mixer {send {:pause false}})))))\n;        (let [wait-again (a/<! (a/timeout 100))]\n;          (p/then (init-client opts send recv)\n;                  (fn [new-client]\n;                    (reset! client-atom new-client)\n        (recur)))))\n\n(s/fdef tele-chan\n  :args (s/cat :opts  ::client-config)\n  :ret ::chan)\n(defn tele-chan\n  \"takes the client opts and builds a channel with system telementry\n  values on it (cpu tempratures specifically)\"\n  [opts]\n  (let [temp-chan (a/chan)\n        out-chan (a/chan)]\n    (a/go-loop []\n        (p/chain\n         (si/cpuTemperature)\n         #(prep-temps opts %)\n         (fn [mqtt-packets] (a/go\n                              (a/<! (a/timeout (* 1000 60 1)))\n                              (a/>! temp-chan mqtt-packets))))\n        (let [v (a/<! temp-chan)]\n          (a/>! out-chan v)\n          (recur)))\n    out-chan))\n\n\n(s/fdef sender\n  :args (s/cat :topic-name ::topic-type\n               :opts       ::client-config\n               :send       ::chan\n               :t-chan     ::chan))\n\n(defn sender\n  \"takes information for the tele-chan in the form of collections of\n  mqtt-packets and assignes a default topic if a subfolder is set,\n  adds a default qos. Then takes the resulting structures and puts\n  them on to the send channel. waits for :delayMs between collections \"\n  [topic-name opts send t-chan]\n  (a/go-loop []\n    (let [teles (a/<! t-chan)\n          topic (mqtt-topic opts topic-name)\n          qos #js {:qos 1}]\n\n      ;becuase this should rarely happen\n      (when (= \"state\" topic-name)\n        (debug \"pushing state\" topic))\n      (a/onto-chan\n       send\n       (map\n        (fn [{:keys [subfolder] :as mqtt-packet}]\n          (let [my-topic (if subfolder (str topic \"/\" subfolder) topic)]\n            (-> mqtt-packet\n                (assoc :topic my-topic)\n                (assoc :qos qos)))) teles)\n       false)\n      (a/<! (a/timeout (:delayMs opts)))\n      (recur))))\n\n(def state-send\n  (partial sender \"state\"))\n\n(def tele-send\n  (partial sender \"events\"))\n\n(defn clean-up\n  [{:keys [send-chan recv-chan telemetry-chan state-chan client-atom] :as system}]\n  (debug \"Killing system\")\n  (p/promise\n   (fn [resolve reject]\n     (doall\n      (map (fn [c] (a/close! c))\n           [send-chan recv-chan state-chan telemetry-chan]))\n     (debug \"killing client\")\n     (debug @client-atom)\n     (.end @client-atom #js {} (fn [& args] (debug \"client dead\") (resolve system))))))\n   \n\n(defn system-function\n  \"the heart of the system lies here.\n  This function takes options (config/default-options works well)\n  It returns a map\n  This map has\n  :send-chan A channel you can use to directly send messages of mqtt, must be of the\n  form {:payload string? :qos #js {:qos #{0 1 2}} :topic (topics can be built with mqtt-topic)}\n  :recv-chan has items in the form of {:topic string? :message string? :packet buffer?}\n  :state-chan, send things of the form (coll-of {:payload string?}), onto the state channel\n  (google publishes these values to a differnt pubsub channel then device telemetry)\n  :telemetry-chan, sends (coll-of {:payload string?}), all the events in the collections\n  are sent in the same batch, the same is true for stat-chan.\n  :client-atom, contains the current version of the mqtt client. This is an atom so\n  that the client-refersher can refresh the authentication token and swap it.\n  this pattern also ensures only one client\n\n  payloads must be prefixed with a string describing where the data came (payload-root opts) will generate this for you\"\n  [opts]\n  (let [send (a/chan)\n        recv (a/chan)\n        kill (atom false)\n        client-promise (init-client opts send recv)\n        client-atom (atom nil)\n        t-chan (tele-chan opts)\n        state-chan (a/chan)]\n    (p/then\n     client-promise\n     (fn [client]\n       (reset! client-atom client)\n;       (client-refresher client-atom opts send recv)\n       (publisher client-atom send)\n       (tele-send opts send t-chan)\n       (state-send opts send state-chan)\n       {:send-chan send\n        :recv-chan recv\n        :state-chan state-chan\n        :telemetry-chan t-chan\n        :client-atom client-atom}))))\n\n\n;(def system-promise (system-function config/default-options))\n\n(defn kill-it\n  \"Feed the system promise to this and it will kill it\"\n  [system-promise]\n  (p/then system-promise\n          clean-up))\n\n;(kill-it system-promise)\n","~:reader-features",["^Y",["~:cljs"]],"~:cljc",false,"~:source-map-compact",["^ ","mappings","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","names",["opts4841","cljs.core.reduce.cljs$core$IFn$_invoke$arity$3","ret__1869__auto__","p__4842","vec__4843","___1870__auto__","cljs.core.nth.cljs$core$IFn$_invoke$arity$3","f__1871__auto__","sym__1872__auto__","G__4846","cljs.core.conj.cljs$core$IFn$_invoke$arity$2","orchestra-cljs.spec.test/distinct-by","cljs.core/first","cljs.core.filter.cljs$core$IFn$_invoke$arity$2","p1__1868__1873__auto__","G__4848","fexpr__4847","orchestra_cljs.spec.test.instrumentable_syms.cljs$core$IFn$_invoke$arity$1","cljs.core/zipmap","cljs.spec.alpha/def-impl","cljs.core/string?","cljs.core/any?","cljs.spec.alpha/map-spec-impl","G__4849","cljs.core/map?","cljs.core/contains?","cljs.spec.alpha/and-spec-impl","p1__4850#","cljs.core/count","p1__4851#","cljs.core/float?","G__4852","cljs.spec.alpha/fspec-impl","cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4","p__4853","map__4854","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","cljs.core.get.cljs$core$IFn$_invoke$arity$2","huginn.mqtt/client-id","projectId","registryId","cloudRegion","deviceId","opts","cljs.spec.alpha/cat-impl","G__4856","p__4857","map__4858","huginn.mqtt/config-chan","cljs.core/fn?","huginn.mqtt/client-handlers","success-fn","fail","send","recv","success","taoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10","taoensso.timbre/*config*","cljs.core/Delay","err","topic","message","packet","c__1759__auto__","cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1","cljs.core.async.impl.dispatch/run","f__1760__auto__","switch__1642__auto__","state_4866","state_val_4867","inst_4860","inst_4861","inst_4862","cljs.core/PersistentHashMap","cljs.core.async.impl.ioc-helpers/put!","inst_4864","cljs.core.async.impl.ioc-helpers/return-chan","statearr-4868","state-machine__1643__auto__","ret-value__1644__auto__","result__1645__auto__","cljs.core/keyword-identical?","e4869","js/Object","ex__1646__auto__","statearr-4870","cljs.core.async.impl.ioc-helpers/process-exception","state__1761__auto__","statearr-4871","cljs.core.async.impl.ioc-helpers/USER-START-IDX","cljs.core.async.impl.ioc-helpers/run-state-machine-wrapped","huginn.mqtt/add-handlers","client","handlers","seq__4872","cljs.core/seq","chunk__4873","count__4874","i__4875","vec__4876","temp__5457__auto__","cljs.core/chunked-seq?","c__4351__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","vec__4879","cljs.core/next","key","hand","huginn.mqtt/build-client","conn-args","huginn.jwt/google-iot-conn-args","js/shadow.js.shim.module$gcic_mqtt_client","promesa.core/promise?","huginn.mqtt/init-client","promesa.core/promise","resolve","reject","map__4882","init","G__4884","p__4885","map__4886","huginn.mqtt/payload-root","userId","p__4888","map__4889","huginn.mqtt/mqtt-topic","msg-type","cljs.spec.alpha.every_impl.cljs$core$IFn$_invoke$arity$4","G__4891","cljs.core/coll?","huginn.mqtt/prep-temps","data","pr","cores-raw","cljs.core.js__GT_clj.cljs$core$IFn$_invoke$arity$1","cores","cljs.core.map_indexed.cljs$core$IFn$_invoke$arity$2","index","value","huginn.jwt/round-now","main","max","cljs.core.concat.cljs$core$IFn$_invoke$arity$variadic","huginn.mqtt/stop","cljs.core.atom.cljs$core$IFn$_invoke$arity$1","cljs.spec.alpha/or-spec-impl","cljs.core/nil?","p__4892","map__4893","huginn.mqtt/publish-one","payload","qos","p","huginn.mqtt/publisher","client-atom","send-chan","state_4904","state_val_4905","statearr-4906","cljs.core.async.impl.ioc-helpers/take!","inst_4902","inst_4897","inst_4898","cljs.core/deref","inst_4899","statearr-4907","statearr-4908","statearr-4909","e4910","statearr-4911","statearr-4912","p__4913","map__4914","huginn.mqtt/client-refresher","tokenExpMins","delayMs","client-send-chan","cljs.core.async.chan.cljs$core$IFn$_invoke$arity$0","client-mixer","cljs.core.async/mix","cljs.core.async/admix","state_4940","state_val_4941","statearr-4942","inst_4917","inst_4918","inst_4919","inst_4938","inst_4921","inst_4922","inst_4923","inst_4924","inst_4925","inst_4926","inst_4927","inst_4928","inst_4929","inst_4930","inst_4931","inst_4932","inst_4933","inst_4934","inst_4935","statearr-4943","statearr-4944","statearr-4945","e4946","statearr-4947","statearr-4948","wait","cljs.core.async/timeout","cljs.core.async/toggle","cljs.core/clj->js","huginn.jwt/create-jwt","huginn.mqtt/tele-chan","temp-chan","out-chan","state_4963","state_val_4964","statearr-4965","inst_4951","inst_4952","p1__4949#","inst_4953","inst_4954","statearr-4981","inst_4961","inst_4956","inst_4958","statearr-4982","statearr-4983","statearr-4984","e4985","statearr-4986","statearr-4987","promesa.core.chain.cljs$core$IFn$_invoke$arity$variadic","js/shadow.js.shim.module$systeminformation.cpuTemperature","mqtt-packets","state_4974","state_val_4975","inst_4966","inst_4967","inst_4968","inst_4970","statearr-4976","inst_4972","statearr-4977","e4978","statearr-4979","statearr-4980","huginn.mqtt/sender","topic-name","t-chan","state_5012","state_val_5013","statearr-5014","inst_5010","inst_4990","inst_4991","inst_4992","statearr-5015","statearr-5016","statearr-5017","inst_4994","inst_4995","inst_4996","statearr-5018","statearr-5019","inst_4999","inst_5001","inst_5002","inst_5003","inst_5004","inst_5005","statearr-5022","inst_5007","statearr-5023","statearr-5024","statearr-5025","e5026","statearr-5027","statearr-5028","teles","cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2","cljs.core.async.onto_chan.cljs$core$IFn$_invoke$arity$3","cljs.core.map.cljs$core$IFn$_invoke$arity$2","p__5000","map__5020","subfolder","mqtt-packet","my-topic","cljs.core.assoc.cljs$core$IFn$_invoke$arity$3","huginn.mqtt/state-send","cljs.core.partial.cljs$core$IFn$_invoke$arity$2","huginn.mqtt/tele-send","p__5029","map__5030","huginn.mqtt/clean-up","recv-chan","telemetry-chan","state-chan","system","cljs.core.doall.cljs$core$IFn$_invoke$arity$1","c","cljs.core.async/close!","args","huginn.mqtt/system-function","kill","client-promise","promesa.core/then","cljs.core/reset!","huginn.mqtt/kill-it","system-promise"]]],"~:cache-keys",["~#cmap",[["^1U","cljs_node_io/file.cljs"],[1537666007418,"^1=","^1<","~$goog.Uri","~$cljs-node-io.streams","~$cljs-node-io.fs","~$cljs-node-io.protocols"],["^1U","goog/dom/tagname.js"],[1530991559994,"^1=","~$goog.dom.HtmlElement"],["^1U","goog/async/freelist.js"],[1530991559994,"^1="],["^1U","cljs/core/async/impl/ioc_helpers.cljs"],[1534380136417,"^1=","^1<","~$cljs.core.async.impl.protocols"],["^1U","goog/labs/useragent/platform.js"],[1530991559994,"^1=","~$goog.labs.userAgent.util","~$goog.string"],["~:macro","^1<"],[1534380137000],["^1U","cljs/core/async.cljs"],[1534380136417,"^1=","^1<","^2;","~$cljs.core.async.impl.channels","~$cljs.core.async.impl.buffers","~$cljs.core.async.impl.timers","~$cljs.core.async.impl.dispatch","~$cljs.core.async.impl.ioc-helpers"],["^1U","goog/timer/timer.js"],[1530991559994,"^1=","~$goog.Promise","~$goog.events.EventTarget"],["^1U","orchestra_cljs/spec/test.cljs"],[1538695969819,"^1=","^1<","~$goog.object","~$goog.userAgent.product","^1E","~$cljs.stacktrace","~$cljs.pprint","^1B","~$cljs.spec.gen.alpha"],["^1U","cljs/nodejs.cljs"],[1534380137690,"^1=","^1<"],["^1U","cljs/spec/gen/alpha.cljs"],[1534380137690,"^1=","^1<","^26"],["^1U","cljs/tools/reader/impl/utils.cljs"],[1535586405375,"^1=","^1<","^1E","^2="],["^1U","cljs_node_io/fs.cljs"],[1537666007418,"^1=","^1<","^A","^2;"],["^1U","cljs_node_io/core.cljs"],[1537666007418,"^1=","^1<","^A","^2;","~$cljs-node-io.file","^27","^29","^26"],["^1U","goog/math/math.js"],[1530991559994,"^1=","~$goog.array","~$goog.asserts"],["^1U","goog/string/stringformat.js"],[1530991559994,"^1=","^2="],["^1U","goog/events/eventtype.js"],[1530991559994,"^1=","~$goog.userAgent"],["^1U","goog/labs/useragent/browser.js"],[1530991559994,"^1=","^2L","^2<","^2F","^2="],["^1U","goog/array/array.js"],[1530991559994,"^1=","^2M"],["^1U","huginn/mqtt.cljs"],[1540188331248,"^1=","^1<","^17","^1E","^1@","^12","^1;","^1:","^F","^A","^?","^1B","^1?"],["^1U","cljs_node_io/protocols.cljs"],[1537666007418,"^1=","^1<"],["^2>","~$cljs.core.async.macros"],[1534380136000],["^1U","cljs_node_io/streams.cljs"],[1537666007418,"^1=","^1<","^26","^A","^29"],["^1U","huginn/config.cljs"],[1540154895584,"^1=","^1<"],["^1U","goog/useragent/useragent.js"],[1530991559994,"^1=","~$goog.labs.userAgent.browser","~$goog.labs.userAgent.engine","~$goog.labs.userAgent.platform","^2<","~$goog.reflect","^2="],["^1U","goog/structs/prioritypool.js"],[1530991559994,"^1=","~$goog.structs.Pool","~$goog.structs.PriorityQueue"],["^2>","~$cljs.tools.reader.reader-types"],[1535586405000],["^1U","goog/async/run.js"],[1530991559994,"^1=","~$goog.async.WorkQueue","~$goog.async.nextTick","~$goog.async.throwException"],["^1U","taoensso/encore.cljs"],[1535586406568,"^1=","^1<","^1E","~$clojure.set","~$cljs.reader","~$cljs.tools.reader.edn","~$cljs.test","^2F","^2=","~$goog.string.format","~$goog.string.StringBuffer","~$goog.events","~$goog.net.XhrIo","~$goog.net.XhrIoPool","~$goog.Uri.QueryData","~$goog.structs","~$goog.net.EventType","~$goog.net.ErrorCode","~$taoensso.truss"],["^1U","goog/debug/error.js"],[1530991559994,"^1="],["^1U","goog/async/workqueue.js"],[1530991559994,"^1=","^2M","~$goog.async.FreeList"],["^1U","huginn/jwt.cljs"],[1540154806767,"^1=","^1<","^1E","^17","~$cljs-node-io.core","^1?","^="],["^1U","promesa/impl/scheduler.cljc"],[1535586406328,"^1=","^1<","~$promesa.protocols"],["^1U","goog/events/events.js"],[1530991559994,"^1=","^2M","~$goog.debug.entryPointRegistry","~$goog.events.BrowserEvent","~$goog.events.BrowserFeature","~$goog.events.Listenable","~$goog.events.ListenerMap"],["^1U","goog/promise/resolver.js"],[1530991559994,"^1="],["^1U","goog/events/browserfeature.js"],[1530991559994,"^1=","^2N"],["^1U","cljs/tools/reader/edn.cljs"],[1535586405375,"^1=","^1<","~$cljs.tools.reader.impl.errors","^2V","~$cljs.tools.reader.impl.utils","~$cljs.tools.reader.impl.commons","~$cljs.tools.reader","^2=","^33"],["^1U","goog/structs/priorityqueue.js"],[1530991559994,"^1=","~$goog.structs.Heap"],["^1U","goog/net/xhrio.js"],[1530991559994,"^1=","~$goog.Timer","^2L","^2M","^3?","^2E","~$goog.json.hybrid","~$goog.log","^3:","^39","~$goog.net.HttpStatus","~$goog.net.XmlHttp","^2=","^38","~$goog.structs.Map","~$goog.uri.utils","^2N"],["^1U","goog/promise/thenable.js"],[1530991559994,"^1="],["^1U","promesa/impl.cljc"],[1535586406328,"^1=","^1<","^3>","~$org.bluebird"],["^1U","goog/dom/nodetype.js"],[1530991559994,"^1="],["^2>","^F"],[1535586406000],["^1U","cljs/tools/reader/impl/inspect.cljs"],[1535586405375,"^1=","^1<"],["^1U","cljs/pprint.cljs"],[1534380137690,"^1=","^1<","^1E","^2=","^33"],["^2>","^2J"],[1534380137000],["^1U","cljs/tools/reader.cljs"],[1535586405375,"^1=","^1<","^2V","^3E","^3F","^3D","^2L","^2=","^33"],["^1U","goog/net/wrapperxmlhttpfactory.js"],[1530991559994,"^1=","~$goog.net.XhrLike","~$goog.net.XmlHttpFactory"],["^1U","goog/events/eventtarget.js"],[1530991559994,"^1=","~$goog.Disposable","^2M","^34","~$goog.events.Event","^3B","^3C","^2F"],["^1U","goog/disposable/disposable.js"],[1530991559994,"^1=","~$goog.disposable.IDisposable"],["^2>","^1;"],[1538695969000],["^1U","goog/object/object.js"],[1530991559994,"^1="],["^1U","goog/structs/set.js"],[1530991559994,"^1=","^38","~$goog.structs.Collection","^3N"],"~:SHADOW-TIMESTAMP",[1540077702000,1534380137000],["^1U","cljs/stacktrace.cljc"],[1534380137690,"^1=","^1<","^2=","^1E"],["^1U","goog/math/long.js"],[1530991559994,"^1=","^2M","^2S"],["^1U","goog/events/listener.js"],[1530991559994,"^1=","~$goog.events.ListenableKey"],["^1U","cljs/core/async/impl/channels.cljs"],[1534380136417,"^1=","^1<","^2;","^2B","^2@"],["^1U","goog/events/listenermap.js"],[1530991559994,"^1=","^2L","~$goog.events.Listener","^2F"],["^1U","goog/events/eventid.js"],[1530991559994,"^1="],["^1U","taoensso/truss.cljs"],[1535586406478,"^1=","^1<","~$taoensso.truss.impl"],["^1U","shadow/test/env.cljs"],[1540077702615,"^1=","^1<"],["^1U","goog/functions/functions.js"],[1530991559994,"^1="],["^1U","cljs/core/async/impl/dispatch.cljs"],[1534380136417,"^1=","^1<","^2@","^2X"],["^1U","taoensso/truss/impl.cljs"],[1535586406478,"^1=","^1<","^2Z"],["^1U","clojure/walk.cljs"],[1534380137690,"^1=","^1<"],["^1U","goog/useragent/product.js"],[1530991559994,"^1=","^2P","^2R","^2N"],["^1U","cljs/core/async/impl/protocols.cljs"],[1534380136417,"^1=","^1<"],["^1U","goog/net/eventtype.js"],[1530991559994,"^1="],["^1U","goog/structs/map.js"],[1530991559994,"^1=","~$goog.iter.Iterator","~$goog.iter.StopIteration","^2F"],["^1U","goog/net/xhriopool.js"],[1530991559994,"^1=","^35","~$goog.structs.PriorityPool"],["^1U","goog/structs/queue.js"],[1530991559994,"^1=","^2L"],["^1U","goog/labs/useragent/engine.js"],[1530991559994,"^1=","^2L","^2<","^2="],["^1U","taoensso/timbre/appenders/core.cljs"],[1535586406375,"^1=","^1<","^1E","~$taoensso.encore"],["^1U","cljs/reader.cljs"],[1534380137690,"^1=","^1<","^2F","^3G","^30","^33"],["~:shadow.build.js-support/require","bluebird"],["~$shadow.js.shim.module$bluebird","shadow.js.shim.module$bluebird.js","^1="],["^2>","~$cljs-node-io.macros"],[1537666007000],["^2>","^1B"],[1534380137000],["^1U","goog/asserts/asserts.js"],[1530991559994,"^1=","~$goog.debug.Error","~$goog.dom.NodeType","^2="],["^1U","cljs/core/async/impl/buffers.cljs"],[1534380136417,"^1=","^1<","^2;"],["^2>","^2I"],[1534380137000],["^1U","goog/debug/logbuffer.js"],[1530991559994,"^1=","^2M","~$goog.debug.LogRecord"],["^43","jsonwebtoken"],["^=","shadow.js.shim.module$jsonwebtoken.js","^1="],["^2>","^42"],[1535586406000],["^1U","goog/uri/uri.js"],[1530991559994,"^1=","^2L","^2M","^2=","^38","^3N","^3O","~$goog.uri.utils.ComponentIndex","~$goog.uri.utils.StandardQueryParam"],["^1U","goog/net/errorcode.js"],[1530991559994,"^1="],["^2>","^31"],[1534380137000],["^2>","^A"],[1534380136000],["^1U","goog/disposable/idisposable.js"],[1530991559994,"^1="],["^1U","goog/promise/promise.js"],[1530991559994,"^1=","~$goog.Thenable","^2M","^3<","~$goog.async.run","^2Y","^46","~$goog.promise.Resolver"],["^1U","cljs/core/async/impl/timers.cljs"],[1534380136417,"^1=","^1<","^2;","^2?","^2B"],["^1U","cljs/spec/alpha.cljs"],[1534380137690,"^1=","^1<","^2F","~$clojure.walk","^2J","^1E"],["^1U","goog/debug/logrecord.js"],[1530991559994,"^1="],["^1U","goog/base.js"],[1530991559994],["^1U","promesa/core.cljc"],[1535586406328,"^1=","^1<","^3>","~$promesa.impl","~$promesa.impl.scheduler"],["^1U","goog/json/hybrid.js"],[1530991559994,"^1=","^2M","~$goog.json"],["^1U","goog/structs/structs.js"],[1530991559994,"^1=","^2L","^2F"],["^1U","cljs/tools/reader/impl/errors.cljs"],[1535586405375,"^1=","^1<","^2V","^1E","~$cljs.tools.reader.impl.inspect"],["^1U","org/bluebird.cljs"],[1535669979047,"^1=","^1<","^44"],["^1U","clojure/string.cljs"],[1534380137690,"^1=","^1<","^2=","^33"],["^1U","goog/structs/pool.js"],[1530991559994,"^1=","^3S","~$goog.structs.Queue","~$goog.structs.Set"],["^1U","goog/net/httpstatus.js"],[1530991559994,"^1="],["^1U","goog/structs/heap.js"],[1530991559994,"^1=","^2L","^2F","~$goog.structs.Node"],["^1U","goog/debug/entrypointregistry.js"],[1530991559994,"^1=","^2M"],["^1U","goog/string/string.js"],[1530991559994,"^1="],["^1U","goog/reflect/reflect.js"],[1530991559994,"^1="],["^1U","goog/labs/useragent/util.js"],[1530991559994,"^1=","^2="],["^2>","~$clojure.template"],[1534380136000],["^2>","~$cljs.core.async.impl.ioc-macros"],[1534380136000],["^43","gcic-mqtt-client"],["^12","shadow.js.shim.module$gcic_mqtt_client.js","^1="],["^1U","goog/debug/debug.js"],[1530991559994,"^1=","^2L","~$goog.debug.errorcontext","^2N"],["^1U","goog/string/stringbuffer.js"],[1530991559994,"^1="],["^1U","goog/debug/errorcontext.js"],[1530991559994,"^1="],["^1U","cljs/tools/reader/reader_types.cljs"],[1535586405375,"^1=","^1<","^3E","^2=","^33"],["^1U","promesa/protocols.cljc"],[1535586406328,"^1=","^1<"],["^1U","goog/iter/iter.js"],[1530991559994,"^1=","^2L","^2M","~$goog.functions","~$goog.math"],["^1U","goog/async/nexttick.js"],[1530991559994,"^1=","^3?","~$goog.dom.TagName","^4I","^2P","^2Q"],["^1U","goog/debug/logger.js"],[1530991559994,"^1=","^2L","^2M","~$goog.debug","~$goog.debug.LogBuffer","^48"],["^1U","goog/events/event.js"],[1530991559994,"^1=","^3S","~$goog.events.EventId"],["^1U","cljs/tools/reader/impl/commons.cljs"],[1535586405375,"^1=","^1<","^3D","^2V","^3E"],["^43","systeminformation"],["^?","shadow.js.shim.module$systeminformation.js","^1="],["^1U","goog/dom/htmlelement.js"],[1530991559994,"^1="],["^1U","cljs/core.cljs"],[1534380137690,"~$goog.math.Long","~$goog.math.Integer","^2=","^2F","^2L","^26","^33"],["^1U","goog/log/log.js"],[1530991559994,"^1=","^4L","~$goog.debug.LogManager","^48","~$goog.debug.Logger"],["^1U","goog/structs/collection.js"],[1530991559994,"^1="],["^1U","goog/events/browserevent.js"],[1530991559994,"^1=","^3A","^3T","~$goog.events.EventType","^2S","^2N"],["^1U","goog/math/integer.js"],[1530991559994,"^1="],["^1U","goog/structs/node.js"],[1530991559994,"^1="],["^2>","^3Z"],[1535586406000],["^1U","clojure/set.cljs"],[1534380137690,"^1=","^1<"],["^1U","goog/uri/utils.js"],[1530991559994,"^1=","^2L","^2M","^2="],["^1U","taoensso/timbre.cljs"],[1535586406375,"^1=","^1<","^1E","^42","~$taoensso.timbre.appenders.core"],["^1U","goog/json/json.js"],[1530991559994,"^1="],["^1U","goog/events/listenable.js"],[1530991559994,"^1=","^4N"],["^1U","goog/net/xmlhttpfactory.js"],[1530991559994,"^1=","^3Q"],["^1U","goog/net/xmlhttp.js"],[1530991559994,"^1=","^2M","~$goog.net.WrapperXmlHttpFactory","^3R"],["^1U","cljs/test.cljs"],[1534380137690,"~$shadow.test.env","^1=","^1<","^1E","^2I"],["^1U","goog/net/xhrlike.js"],[1530991559994,"^1="],["^2>","^2["],[1534380137000]]],"~:analyzer",["^ ","^3",null,"^4",["^ "],"^5",["^ ","^6","huginn/mqtt.cljs","^7",1,"^8",5,"^9",1,"^:",16],"^;",["^ ","^<","^=","^>","^?","^@","^A","^B","^C"],"^D",["^ ","^E","^F","^G","^F","^H","^F","^I","^F","^J","^F","^K","^F","^L","^F","^M","^F","^N","^F","^O","^F","^P","^F","^Q","^F","^R","^F","^S","^F","^T","^F","^U","^F","^V","^F","^W","^F"],"^X",["^Y",[]],"~:shadow/js-access-properties",["^Y",["cpuTemperature"]],"^Z","^[","^10",["^ ","^11","^12"],"^15",null,"^16",["^ ","^12","^12","~$p","^17","^17","^17","^18","^F","~$a","^A","^19","^?","^1:","^1:","^1;","^1;","^1<","^1<","^1=","^1=","^A","^A","^>","^?","^1>","^1:","^1?","^1?","^1@","^1@","^1A","^1?","~$s","^1B","^1C","^12","^1D","^1@","^F","^F","^?","^?","^1E","^1E","^1F","^1E","^1B","^1B","^1G","^1;"],"^1H",["^Y",["^1I"]],"~:shadow/js-access-global",["^Y",["Object"]],"^1J",null,"~:defs",["^ ","~$tele-send",["^ ","^Z","~$huginn.mqtt/tele-send","^6","huginn/mqtt.cljs","^7",285,"^8",1,"^9",285,"^:",15,"^5",["^ ","^6","huginn/mqtt.cljs","^7",285,"^8",6,"^9",285,"^:",15],"~:tag","~$any"],"~$publish-async",["^ ","^Z","~$huginn.mqtt/publish-async","^6","huginn/mqtt.cljs","^7",117,"^8",1,"^9",117,"^:",23,"~:declared",true,"^5",["^ ","^6","huginn/mqtt.cljs","^7",117,"^8",10,"^9",117,"^:",23,"^55",true]],"~$build-client",["^ ","~:protocol-inline",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",105,"^8",7,"^9",105,"^:",19,"~:arglists",["^1M",["~$quote",["^1M",[["~$opts"]]]]]],"^Z","~$huginn.mqtt/build-client","~:variadic",false,"^6","huginn/mqtt.cljs","^:",19,"~:method-params",["^1M",[["^5:"]]],"~:protocol-impl",null,"~:arglists-meta",["^1M",[null,null]],"^8",1,"^7",105,"^9",105,"~:max-fixed-arity",1,"~:fn-var",true,"^58",["^1M",["^59",["^1M",[["^5:"]]]]]],"~$client-id",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",51,"^8",7,"^9",51,"^:",16,"^58",["^1M",["^59",["^1M",[[["^ ","~:keys",["~$projectId","~$registryId","~$cloudRegion","~$deviceId"],"^1O","^5:"]]]]]],"~:doc","Builds a client id used to identify the device this message is\n  comming from"],"^Z","~$huginn.mqtt/client-id","^5<",false,"^6","huginn/mqtt.cljs","^:",16,"^5=",["^1M",[["~$p__4853"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",51,"^9",51,"^5@",1,"^5A",true,"^58",["^1M",["^59",["^1M",[[["^ ","^5C",["^5D","^5E","^5F","^5G"],"^1O","^5:"]]]]]],"^5H","Builds a client id used to identify the device this message is\n  comming from"],"~$prep-temps",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",157,"^8",7,"^9",157,"^:",17,"^58",["^1M",["^59",["^1M",[["^5:","~$data"]]]]],"^5H","pulls the data out of the systeminformation library and wrapping them up\n  to be sent into mqtt"],"^Z","~$huginn.mqtt/prep-temps","^5<",false,"^6","huginn/mqtt.cljs","^:",17,"^5=",["^1M",[["^5:","^5L"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",157,"^9",157,"^5@",2,"^5A",true,"^58",["^1M",["^59",["^1M",[["^5:","^5L"]]]]],"^5H","pulls the data out of the systeminformation library and wrapping them up\n  to be sent into mqtt"],"~$publisher",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",193,"^8",7,"^9",193,"^:",16,"^58",["^1M",["^59",["^1M",[["~$client-atom","~$send-chan"]]]]],"^5H","main loop that pushes packets added to the send-chan to google iot core"],"^Z","~$huginn.mqtt/publisher","^5<",false,"^6","huginn/mqtt.cljs","^:",16,"^5=",["^1M",[["^5O","^5P"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",193,"^9",193,"^5@",2,"^5A",true,"^58",["^1M",["^59",["^1M",[["^5O","^5P"]]]]],"^5H","main loop that pushes packets added to the send-chan to google iot core"],"~$init-client",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",125,"^8",7,"^9",125,"^:",18,"^58",["^1M",["^59",["^1M",[["^5:","~$send","~$recv"]]]]]],"^Z","~$huginn.mqtt/init-client","^5<",false,"^6","huginn/mqtt.cljs","^:",18,"^5=",["^1M",[["^5:","^5S","^5T"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",125,"^9",125,"^5@",3,"^5A",true,"^58",["^1M",["^59",["^1M",[["^5:","^5S","^5T"]]]]]],"~$payload-root",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",137,"^8",7,"^9",137,"^:",19,"^58",["^1M",["^59",["^1M",[[["^ ","^5C",["^5E","~$userId","^5G"],"^1O","^5:"]]]]]],"^5H","builds the prefix of the actual values being sent\n  (str (payload-root config) sensor-name /  sensor-value)"],"^Z","~$huginn.mqtt/payload-root","^5<",false,"^6","huginn/mqtt.cljs","^:",19,"^5=",["^1M",[["~$p__4885"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",137,"^9",137,"^5@",1,"^5A",true,"^58",["^1M",["^59",["^1M",[[["^ ","^5C",["^5E","^5W","^5G"],"^1O","^5:"]]]]]],"^5H","builds the prefix of the actual values being sent\n  (str (payload-root config) sensor-name /  sensor-value)"],"~$config-chan",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",63,"^8",7,"^9",63,"^:",18,"^58",["^1M",["^59",["^1M",[[["^ ","^5C",["^5G"],"^1O","^5:"]]]]]],"^5H","google give each device two channeles, a state channel (the config channel)\n  and a telemetry channel (the one that we push all our data over). The name of\n  these channels are determined by google iot core."],"^Z","~$huginn.mqtt/config-chan","^5<",false,"^6","huginn/mqtt.cljs","^:",18,"^5=",["^1M",[["~$p__4857"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",63,"^9",63,"^5@",1,"^5A",true,"^58",["^1M",["^59",["^1M",[[["^ ","^5C",["^5G"],"^1O","^5:"]]]]]],"^5H","google give each device two channeles, a state channel (the config channel)\n  and a telemetry channel (the one that we push all our data over). The name of\n  these channels are determined by google iot core."],"~$mqtt-topic",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",148,"^8",7,"^9",148,"^:",17,"^58",["^1M",["^59",["^1M",[[["^ ","^5C",["^5G"],"^1O","^5:"],"~$msg-type"]]]]],"^5H","msg-type can be 'state' for state updates\n   or 'events' to publish telemetry"],"^Z","~$huginn.mqtt/mqtt-topic","^5<",false,"^6","huginn/mqtt.cljs","^:",17,"^5=",["^1M",[["~$p__4888","^62"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",148,"^9",148,"^5@",2,"^5A",true,"^58",["^1M",["^59",["^1M",[[["^ ","^5C",["^5G"],"^1O","^5:"],"^62"]]]]],"^5H","msg-type can be 'state' for state updates\n   or 'events' to publish telemetry"],"~$tele-chan",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",231,"^8",7,"^9",231,"^:",16,"^58",["^1M",["^59",["^1M",[["^5:"]]]]],"^5H","takes the client opts and builds a channel with system telementry\n  values on it (cpu tempratures specifically)"],"^Z","~$huginn.mqtt/tele-chan","^5<",false,"^6","huginn/mqtt.cljs","^:",16,"^5=",["^1M",[["^5:"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",231,"^9",231,"^5@",1,"^5A",true,"^58",["^1M",["^59",["^1M",[["^5:"]]]]],"^5H","takes the client opts and builds a channel with system telementry\n  values on it (cpu tempratures specifically)"],"~$client-handlers",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",76,"^8",7,"^9",76,"^:",22,"^58",["^1M",["^59",["^1M",[["~$success-fn","~$fail","^5S","^5T"]]]]],"^5H","builds a map of handels to attach to the mqtt object"],"^Z","~$huginn.mqtt/client-handlers","^5<",false,"^6","huginn/mqtt.cljs","^:",22,"^5=",["^1M",[["^68","^69","^5S","^5T"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",76,"^9",76,"^5@",4,"^5A",true,"^58",["^1M",["^59",["^1M",[["^68","^69","^5S","^5T"]]]]],"^5H","builds a map of handels to attach to the mqtt object"],"~$kill-it",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",343,"^8",7,"^9",343,"^:",14,"^58",["^1M",["^59",["^1M",[["~$system-promise"]]]]],"^5H","Feed the system promise to this and it will kill it"],"^Z","~$huginn.mqtt/kill-it","^5<",false,"^6","huginn/mqtt.cljs","^:",14,"^5=",["^1M",[["^6<"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",343,"^9",343,"^5@",1,"^5A",true,"^58",["^1M",["^59",["^1M",[["^6<"]]]]],"^5H","Feed the system promise to this and it will kill it"],"~$state-send",["^ ","^Z","~$huginn.mqtt/state-send","^6","huginn/mqtt.cljs","^7",282,"^8",1,"^9",282,"^:",16,"^5",["^ ","^6","huginn/mqtt.cljs","^7",282,"^8",6,"^9",282,"^:",16],"^51","^52"],"~$publish-one",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",186,"^8",7,"^9",186,"^:",18,"^58",["^1M",["^59",["^1M",[["~$client",["^ ","^5C",["~$topic","~$payload","~$qos"],"^1O","~$p"]]]]]],"^5H","Publises one mqtt packet to the client"],"^Z","~$huginn.mqtt/publish-one","^5<",false,"^6","huginn/mqtt.cljs","^:",18,"^5=",["^1M",[["^6A","~$p__4892"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",186,"^9",186,"^5@",2,"^5A",true,"^58",["^1M",["^59",["^1M",[["^6A",["^ ","^5C",["^6B","^6C","^6D"],"^1O","~$p"]]]]]],"^5H","Publises one mqtt packet to the client"],"~$system-function",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",301,"^8",7,"^9",301,"^:",22,"^58",["^1M",["^59",["^1M",[["^5:"]]]]],"^5H","the heart of the system lies here.\n  This function takes options (config/default-options works well)\n  It returns a map\n  This map has\n  :send-chan A channel you can use to directly send messages of mqtt, must be of the\n  form {:payload string? :qos #js {:qos #{0 1 2}} :topic (topics can be built with mqtt-topic)}\n  :recv-chan has items in the form of {:topic string? :message string? :packet buffer?}\n  :state-chan, send things of the form (coll-of {:payload string?}), onto the state channel\n  (google publishes these values to a differnt pubsub channel then device telemetry)\n  :telemetry-chan, sends (coll-of {:payload string?}), all the events in the collections\n  are sent in the same batch, the same is true for stat-chan.\n  :client-atom, contains the current version of the mqtt client. This is an atom so\n  that the client-refersher can refresh the authentication token and swap it.\n  this pattern also ensures only one client\n\n  payloads must be prefixed with a string describing where the data came (payload-root opts) will generate this for you"],"^Z","~$huginn.mqtt/system-function","^5<",false,"^6","huginn/mqtt.cljs","^:",22,"^5=",["^1M",[["^5:"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",301,"^9",301,"^5@",1,"^5A",true,"^58",["^1M",["^59",["^1M",[["^5:"]]]]],"^5H","the heart of the system lies here.\n  This function takes options (config/default-options works well)\n  It returns a map\n  This map has\n  :send-chan A channel you can use to directly send messages of mqtt, must be of the\n  form {:payload string? :qos #js {:qos #{0 1 2}} :topic (topics can be built with mqtt-topic)}\n  :recv-chan has items in the form of {:topic string? :message string? :packet buffer?}\n  :state-chan, send things of the form (coll-of {:payload string?}), onto the state channel\n  (google publishes these values to a differnt pubsub channel then device telemetry)\n  :telemetry-chan, sends (coll-of {:payload string?}), all the events in the collections\n  are sent in the same batch, the same is true for stat-chan.\n  :client-atom, contains the current version of the mqtt client. This is an atom so\n  that the client-refersher can refresh the authentication token and swap it.\n  this pattern also ensures only one client\n\n  payloads must be prefixed with a string describing where the data came (payload-root opts) will generate this for you"],"~$stop",["^ ","^Z","~$huginn.mqtt/stop","^6","huginn/mqtt.cljs","^7",182,"^8",1,"^9",182,"^:",10,"^5",["^ ","^6","huginn/mqtt.cljs","^7",182,"^8",6,"^9",182,"^:",10],"^51","^52"],"~$sender",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",256,"^8",7,"^9",256,"^:",13,"^58",["^1M",["^59",["^1M",[["~$topic-name","^5:","^5S","~$t-chan"]]]]],"^5H","takes information for the tele-chan in the form of collections of\n  mqtt-packets and assignes a default topic if a subfolder is set,\n  adds a default qos. Then takes the resulting structures and puts\n  them on to the send channel. waits for :delayMs between collections "],"^Z","~$huginn.mqtt/sender","^5<",false,"^6","huginn/mqtt.cljs","^:",13,"^5=",["^1M",[["^6L","^5:","^5S","^6M"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",256,"^9",256,"^5@",4,"^5A",true,"^58",["^1M",["^59",["^1M",[["^6L","^5:","^5S","^6M"]]]]],"^5H","takes information for the tele-chan in the form of collections of\n  mqtt-packets and assignes a default topic if a subfolder is set,\n  adds a default qos. Then takes the resulting structures and puts\n  them on to the send channel. waits for :delayMs between collections "],"~$client-refresher",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",201,"^8",7,"^9",201,"^:",23,"^58",["^1M",["^59",["^1M",[["^5O",["^ ","^5C",["~$tokenExpMins","~$delayMs"],"^1O","^5:"],"^5S","^5T"]]]]],"^5H","loops and refreshs the client atom every token experation.\n  Mqtt requires that you refresh your token frequently (less then 20 mins)"],"^Z","~$huginn.mqtt/client-refresher","^5<",false,"^6","huginn/mqtt.cljs","^:",23,"^5=",["^1M",[["^5O","~$p__4913","^5S","^5T"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",201,"^9",201,"^5@",4,"^5A",true,"^58",["^1M",["^59",["^1M",[["^5O",["^ ","^5C",["^6P","^6Q"],"^1O","^5:"],"^5S","^5T"]]]]],"^5H","loops and refreshs the client atom every token experation.\n  Mqtt requires that you refresh your token frequently (less then 20 mins)"],"~$add-handlers",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",96,"^8",7,"^9",96,"^:",19,"^58",["^1M",["^59",["^1M",[["^6A","~$handlers"]]]]],"^5H","takes a map of handlers and attaches them to the mqtt object"],"^Z","~$huginn.mqtt/add-handlers","^5<",false,"^6","huginn/mqtt.cljs","^:",19,"^5=",["^1M",[["^6A","^6U"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",96,"^9",96,"^5@",2,"^5A",true,"^58",["^1M",["^59",["^1M",[["^6A","^6U"]]]]],"^5H","takes a map of handlers and attaches them to the mqtt object"],"~$clean-up",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",288,"^8",7,"^9",288,"^:",15,"^58",["^1M",["^59",["^1M",[[["^ ","^5C",["^5P","~$recv-chan","~$telemetry-chan","~$state-chan","^5O"],"^1O","~$system"]]]]]]],"^Z","~$huginn.mqtt/clean-up","^5<",false,"^6","huginn/mqtt.cljs","^:",15,"^5=",["^1M",[["~$p__5029"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",288,"^9",288,"^5@",1,"^5A",true,"^58",["^1M",["^59",["^1M",[[["^ ","^5C",["^5P","^6X","^6Y","^6Z","^5O"],"^1O","^6["]]]]]]]],"^1K",["^ ","^F","^F","^18","^F","^1<","^1<","~$a","^A","^1;","^1;","^A","^A","~$s","^1B","^1B","^1B","^1G","^1;"],"~:cljs.analyzer/constants",["^ ","^1H",["^Y",["~:client-fail","~:args","~:req-un","~:opt-un","~:huginn.mqtt/payload","~:qos","~$cljs.core/<","~:recv-chan","~:ret","~:gfn","~:cloudRegion","~:send-chan","~:recv","~:pred-exprs","~:keys-pred","~:huginn.mqtt/client-config","^5U","~:payload","~:opt-keys","~:huginn.mqtt/cloudRegion","~$p1__4851#","~:else","~:huginn.mqtt/qos","~$cljs.core/count","~:state-chan","~$cljs.spec.alpha/and","~$p1__4850#","~$cljs.spec.alpha/coll-of","~$cljs.spec.alpha/cat","~:cljs.spec.alpha/kind-form","~:subfolder","^5I","~:delayMs","~:deviceId","~:telemetry-chan","~$cljs.core/string?","~:t-chan","~:req-specs","~$cljs.spec.alpha/or","~:value","~:huginn.mqtt/topic-type","~:registryId","~:client","~$cljs.spec.alpha/fspec","~:recur","~:debug","~:topic","~:huginn.mqtt/ts","~$cljs.core/contains?","^5;","~$cljs.core/map?","~:cljs.spec.alpha/cpred","~$%","~$cljs.core/float?","~:tokenExpMins","~$cljs.core/fn?","~:huginn.mqtt/chan","~:topic-name","~:ts","~$cljs.spec.alpha/keys","~:huginn.mqtt/projectId","^6N","~:req","~:client-atom","~:msg-type","~:fail","~:huginn.mqtt/mqtt-packet","~$fn*","^5[","^5M","^63","~:opts","~:nil","~$cljs.core/nil?","~:req-keys","~$cljs.core/fn","~:info","~:send","~:opt-specs","~:huginn.mqtt/registryId","~:userId","^6:","~:pred-forms","~:pause","~:error","~:projectId","~:huginn.mqtt/deviceId","~$promesa.core/promise?","~:auto","~:huginn.mqtt/subfolder","~:p","~:cljs.spec.alpha/conform-all","^6E","~:success-fn","~$cljs.core/any?","^66","~:message","~:packet","~:cljs.spec.alpha/describe","~:opt","~:data"]],"~:order",["^8?","^7T","^8N","^7E","^8T","^8;","^8Z","^7Y","^7B","^8>","^75","^76","^7<","^7@","^7A","^7D","^7V","^8@","^8I","^8M","^8P","^92","^8S","^7Z","^7=","^7R","^8J","~$%","^86","^85","^77","^7K","^8E","^7L","^79","^7I","^8W","^7F","^84","^88","^7H","^8D","^7C","^7P","^78","^8=","^5I","^80","^74","^7;","^5[","^7N","^8F","^6:","^8Y","^8:","^8C","^8L","^7?","^82","~:p","^8V","^8K","^8R","^83","^8[","^90","^81","^7G","^5;","^7[","^5U","^8U","^73","^8O","^63","^8B","^5M","^93","^7M","^7O","^87","^8X","^91","^6E","^7W","^8G","^8H","^7X","^89","^7Q","^8Q","^66","^6N","^8<","^7U","^7>","^7:","^7S","^7J","^8A"]],"^1Q",["^ ","^1I",["^Y",[]]],"^1R",["^ ","^11",["^ ","^1O","^1C"]],"^1S",["^1=","^1<","^17","^1E","^1@","^12","^1;","^1:","^F","^A","^?","^1B","^1?"]],"^14","^[","~:ns-specs",["^ ","^77",["^1M",["^7K","^7T",["^1M",["^8E",["^7L"],["^1M",["^79",["^1M",["^7I","^7L"]],200000]]]]]],"^7B",["^1M",["^8>","^75",["^8?","^8N","^7E","^8T"]]],"^5U",["^1M",["^80","^74",["^1M",["^7N","^8F","^7B","^8L","^8;","^7?","^8;"]],"^7;","^8U"]],"^7E","^7T","^7H",["^Y",[0,1]],"^5I",["^1M",["^80","^74","^7B","^7;","^7T"]],"^7Y",["^Y",["events","state"]],"^84","^88","^5;",["^1M",["^80","^74",["^1M",["^7N","^8F","^7B"]]]],"^8;","^8Z","^8?","^7T","^6N",["^1M",["^80","^74",["^1M",["^7N","^8<","^7Y","^8F","^7B","^8L","^8;","^7U","^8;"]]]],"^8D",["^1M",["^8>","^75",["^77","^8W","^7H","^84"]]],"^5[",["^1M",["^80","^74",["^1M",["^7N","^8F",["^1M",["^8>","^75",["^8T"]]]]],"^7;","^7T"]],"^5M",["^1M",["^80","^74",["^1M",["^7N","^8F","^7B","^93","^8Z"]],"^7;",["^1M",["^7M","^8D"]]]],"^63",["^1M",["^80","^74",["^1M",["^7N","^8F","^7B","^8B","^7Y"]],"^7;","^7T"]],"^8N","^7T","^6:",["^1M",["^80","^74",["^1M",["^7N","^8Y","^8:","^8C","^8:","^8L","^8;","^7?","^8;"]]]],"^8T","^7T","^8W",["^1M",["^7K","^7T",["^1M",["^8E",["^7F"],["^1M",["^79",["^1M",["^7I","^7F"]],200]]]]]],"^6E",["^1M",["^80","^74",["^1M",["^7N","^7[","^8Z","^90",["^1M",["^7W","^8G","^8H","^7X","^8D"]]]]]],"^66",["^1M",["^80","^74",["^1M",["^7N","^8F","^7B"]],"^7;","^8;"]]],"~:ns-speced-vars",["^5U","^5I","^5;","^6N","^5[","^5M","^63","^6:","^6E","^66"],"~:compiler-options",["^25",[["^97","~:static-fns"],true,["^97","~:elide-asserts"],false,["^97","~:optimize-constants"],null,["^97","~:external-config"],null,["^97","~:tooling-config"],null,["^97","~:emit-constants"],null,["^97","~:infer-externs"],true,["^97","^1Z"],null,["~:js-options","~:js-provider"],"^1I",["~:mode"],"~:dev",["^97","~:fn-invoke-direct"],null,["^97","~:source-map"],"/dev/null"]]]