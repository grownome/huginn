["^ ","~:output",["^ ","~:js","goog.provide('huginn.sensors');\ngoog.require('cljs.core');\ngoog.require('promesa.core');\ngoog.require('taoensso.timbre');\ngoog.require('huginn.mqtt');\ngoog.require('cljs.core.async');\ngoog.require('shadow.js.shim.module$node_dht_sensor');\nhuginn.sensors.build_sensor_packet = (function huginn$sensors$build_sensor_packet(sensor_name,sensor_reading){\ntry{var result__17399__auto__ = new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\"payload\",\"payload\",-383036092),sensor_reading,new cljs.core.Keyword(null,\"subfolder\",\"subfolder\",1044158439),[\"metrics/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(sensor_name)].join('')], null)], null);\ntaoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"debug\",\"debug\",-1608172596),\"huginn.sensors\",null,15,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay(((function (result__17399__auto__){\nreturn (function (){\nreturn new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\"payload\",\"payload\",-383036092),new cljs.core.Symbol(null,\"sensor-reading\",\"sensor-reading\",1514517376,null),new cljs.core.Keyword(null,\"subfolder\",\"subfolder\",1044158439),cljs.core.list(new cljs.core.Symbol(null,\"str\",\"str\",-1564826950,null),\"metrics/\",new cljs.core.Symbol(null,\"sensor-name\",\"sensor-name\",-817206841,null))], null)], null),\"=>\",result__17399__auto__], null);\n});})(result__17399__auto__))\n,null)),null,-37892806);\n\nreturn result__17399__auto__;\n}catch (e22609){if((e22609 instanceof Error)){\nvar e__17361__auto__ = e22609;\ntaoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"error\",\"error\",-978969032),\"huginn.sensors\",null,15,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay(((function (e__17361__auto__){\nreturn (function (){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [e__17361__auto__], null);\n});})(e__17361__auto__))\n,null)),null,376438195);\n\nthrow e__17361__auto__;\n} else {\nthrow e22609;\n\n}\n}});\nhuginn.sensors.publish_sensor_reading = (function huginn$sensors$publish_sensor_reading(opts,out_chan,err,temp,humidity){\nif(cljs.core.truth_(err)){\nreturn taoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"info\",\"info\",-317069002),\"huginn.sensors\",null,21,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay((function (){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [err], null);\n}),null)),null,1714024284);\n} else {\nvar c__14273__auto__ = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run(((function (c__14273__auto__){\nreturn (function (){\nvar f__14274__auto__ = (function (){var switch__14250__auto__ = ((function (c__14273__auto__){\nreturn (function (state_22628){\nvar state_val_22629 = (state_22628[(1)]);\nif((state_val_22629 === (1))){\nvar inst_22610 = cljs.core.PersistentVector.EMPTY_NODE;\nvar inst_22611 = [new cljs.core.Keyword(null,\"payload\",\"payload\",-383036092),new cljs.core.Keyword(null,\"subfolder\",\"subfolder\",1044158439)];\nvar inst_22612 = huginn.mqtt.payload_root(opts);\nvar inst_22613 = [cljs.core.str.cljs$core$IFn$_invoke$arity$1(temp)].join('');\nvar inst_22614 = [cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_22612),\"-room-temp/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_22613)].join('');\nvar inst_22615 = [inst_22614,\"metrics/temperature\"];\nvar inst_22616 = cljs.core.PersistentHashMap.fromArrays(inst_22611,inst_22615);\nvar inst_22617 = [new cljs.core.Keyword(null,\"payload\",\"payload\",-383036092),new cljs.core.Keyword(null,\"subfolder\",\"subfolder\",1044158439)];\nvar inst_22618 = huginn.mqtt.payload_root(opts);\nvar inst_22619 = [cljs.core.str.cljs$core$IFn$_invoke$arity$1(humidity)].join('');\nvar inst_22620 = [cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_22618),\"-room-humidity/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_22619)].join('');\nvar inst_22621 = [inst_22620,\"metrics/humidity\"];\nvar inst_22622 = cljs.core.PersistentHashMap.fromArrays(inst_22617,inst_22621);\nvar inst_22623 = [inst_22616,inst_22622];\nvar inst_22624 = (new cljs.core.PersistentVector(null,2,(5),inst_22610,inst_22623,null));\nvar state_22628__$1 = state_22628;\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_22628__$1,(2),out_chan,inst_22624);\n} else {\nif((state_val_22629 === (2))){\nvar inst_22626 = (state_22628[(2)]);\nvar state_22628__$1 = state_22628;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_22628__$1,inst_22626);\n} else {\nreturn null;\n}\n}\n});})(c__14273__auto__))\n;\nreturn ((function (switch__14250__auto__,c__14273__auto__){\nreturn (function() {\nvar huginn$sensors$publish_sensor_reading_$_state_machine__14251__auto__ = null;\nvar huginn$sensors$publish_sensor_reading_$_state_machine__14251__auto____0 = (function (){\nvar statearr_22630 = [null,null,null,null,null,null,null];\n(statearr_22630[(0)] = huginn$sensors$publish_sensor_reading_$_state_machine__14251__auto__);\n\n(statearr_22630[(1)] = (1));\n\nreturn statearr_22630;\n});\nvar huginn$sensors$publish_sensor_reading_$_state_machine__14251__auto____1 = (function (state_22628){\nwhile(true){\nvar ret_value__14252__auto__ = (function (){try{while(true){\nvar result__14253__auto__ = switch__14250__auto__(state_22628);\nif(cljs.core.keyword_identical_QMARK_(result__14253__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\ncontinue;\n} else {\nreturn result__14253__auto__;\n}\nbreak;\n}\n}catch (e22631){if((e22631 instanceof Object)){\nvar ex__14254__auto__ = e22631;\nvar statearr_22632_22678 = state_22628;\n(statearr_22632_22678[(5)] = ex__14254__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_22628);\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nthrow e22631;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__14252__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\nvar G__22679 = state_22628;\nstate_22628 = G__22679;\ncontinue;\n} else {\nreturn ret_value__14252__auto__;\n}\nbreak;\n}\n});\nhuginn$sensors$publish_sensor_reading_$_state_machine__14251__auto__ = function(state_22628){\nswitch(arguments.length){\ncase 0:\nreturn huginn$sensors$publish_sensor_reading_$_state_machine__14251__auto____0.call(this);\ncase 1:\nreturn huginn$sensors$publish_sensor_reading_$_state_machine__14251__auto____1.call(this,state_22628);\n}\nthrow(new Error('Invalid arity: ' + arguments.length));\n};\nhuginn$sensors$publish_sensor_reading_$_state_machine__14251__auto__.cljs$core$IFn$_invoke$arity$0 = huginn$sensors$publish_sensor_reading_$_state_machine__14251__auto____0;\nhuginn$sensors$publish_sensor_reading_$_state_machine__14251__auto__.cljs$core$IFn$_invoke$arity$1 = huginn$sensors$publish_sensor_reading_$_state_machine__14251__auto____1;\nreturn huginn$sensors$publish_sensor_reading_$_state_machine__14251__auto__;\n})()\n;})(switch__14250__auto__,c__14273__auto__))\n})();\nvar state__14275__auto__ = (function (){var statearr_22633 = (f__14274__auto__.cljs$core$IFn$_invoke$arity$0 ? f__14274__auto__.cljs$core$IFn$_invoke$arity$0() : f__14274__auto__.call(null));\n(statearr_22633[(6)] = c__14273__auto__);\n\nreturn statearr_22633;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__14275__auto__);\n});})(c__14273__auto__))\n);\n\nreturn c__14273__auto__;\n}\n});\n/**\n * this creates a channel with sensor readings from a given gpio channel\n *   Use\n *   Please note that there are two different and confusing ways to reference a channel; either using the Raspberry Pi or the BCM/SoC naming schema (sadly, neither of which match the physical pins!). This module supports both schemas, with Raspberry Pi being the default. Please see this page for more details.\n * \n *   taken from rpi-gpio readem \n */\nhuginn.sensors.sensor_chan = (function huginn$sensors$sensor_chan(opts,gpio_channel){\nvar out_chan = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$0();\ntaoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"info\",\"info\",-317069002),\"huginn.sensors\",null,38,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay(((function (out_chan){\nreturn (function (){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [gpio_channel], null);\n});})(out_chan))\n,null)),null,2019499962);\n\nvar G__22634_22680 = (22);\nvar G__22635_22681 = gpio_channel;\nvar G__22636_22682 = cljs.core.partial.cljs$core$IFn$_invoke$arity$3(huginn.sensors.publish_sensor_reading,opts,out_chan);\nshadow.js.shim.module$node_dht_sensor.read(G__22634_22680,G__22635_22681,G__22636_22682);\n\nvar c__14273__auto___22683 = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run(((function (c__14273__auto___22683,out_chan){\nreturn (function (){\nvar f__14274__auto__ = (function (){var switch__14250__auto__ = ((function (c__14273__auto___22683,out_chan){\nreturn (function (state_22648){\nvar state_val_22649 = (state_22648[(1)]);\nif((state_val_22649 === (1))){\nvar state_22648__$1 = state_22648;\nvar statearr_22651_22684 = state_22648__$1;\n(statearr_22651_22684[(2)] = null);\n\n(statearr_22651_22684[(1)] = (2));\n\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nif((state_val_22649 === (2))){\nvar inst_22638 = new cljs.core.Keyword(null,\"dht11Delay\",\"dht11Delay\",-1809446912).cljs$core$IFn$_invoke$arity$1(opts);\nvar inst_22639 = cljs.core.async.timeout(inst_22638);\nvar state_22648__$1 = state_22648;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_22648__$1,(4),inst_22639);\n} else {\nif((state_val_22649 === (3))){\nvar inst_22646 = (state_22648[(2)]);\nvar state_22648__$1 = state_22648;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_22648__$1,inst_22646);\n} else {\nif((state_val_22649 === (4))){\nvar inst_22641 = (state_22648[(2)]);\nvar inst_22642 = cljs.core.partial.cljs$core$IFn$_invoke$arity$3(huginn.sensors.publish_sensor_reading,opts,out_chan);\nvar inst_22643 = shadow.js.shim.module$node_dht_sensor.read((22),gpio_channel,inst_22642);\nvar state_22648__$1 = (function (){var statearr_22653 = state_22648;\n(statearr_22653[(7)] = inst_22643);\n\n(statearr_22653[(8)] = inst_22641);\n\nreturn statearr_22653;\n})();\nvar statearr_22654_22685 = state_22648__$1;\n(statearr_22654_22685[(2)] = null);\n\n(statearr_22654_22685[(1)] = (2));\n\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nreturn null;\n}\n}\n}\n}\n});})(c__14273__auto___22683,out_chan))\n;\nreturn ((function (switch__14250__auto__,c__14273__auto___22683,out_chan){\nreturn (function() {\nvar huginn$sensors$sensor_chan_$_state_machine__14251__auto__ = null;\nvar huginn$sensors$sensor_chan_$_state_machine__14251__auto____0 = (function (){\nvar statearr_22659 = [null,null,null,null,null,null,null,null,null];\n(statearr_22659[(0)] = huginn$sensors$sensor_chan_$_state_machine__14251__auto__);\n\n(statearr_22659[(1)] = (1));\n\nreturn statearr_22659;\n});\nvar huginn$sensors$sensor_chan_$_state_machine__14251__auto____1 = (function (state_22648){\nwhile(true){\nvar ret_value__14252__auto__ = (function (){try{while(true){\nvar result__14253__auto__ = switch__14250__auto__(state_22648);\nif(cljs.core.keyword_identical_QMARK_(result__14253__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\ncontinue;\n} else {\nreturn result__14253__auto__;\n}\nbreak;\n}\n}catch (e22660){if((e22660 instanceof Object)){\nvar ex__14254__auto__ = e22660;\nvar statearr_22665_22687 = state_22648;\n(statearr_22665_22687[(5)] = ex__14254__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_22648);\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nthrow e22660;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__14252__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\nvar G__22688 = state_22648;\nstate_22648 = G__22688;\ncontinue;\n} else {\nreturn ret_value__14252__auto__;\n}\nbreak;\n}\n});\nhuginn$sensors$sensor_chan_$_state_machine__14251__auto__ = function(state_22648){\nswitch(arguments.length){\ncase 0:\nreturn huginn$sensors$sensor_chan_$_state_machine__14251__auto____0.call(this);\ncase 1:\nreturn huginn$sensors$sensor_chan_$_state_machine__14251__auto____1.call(this,state_22648);\n}\nthrow(new Error('Invalid arity: ' + arguments.length));\n};\nhuginn$sensors$sensor_chan_$_state_machine__14251__auto__.cljs$core$IFn$_invoke$arity$0 = huginn$sensors$sensor_chan_$_state_machine__14251__auto____0;\nhuginn$sensors$sensor_chan_$_state_machine__14251__auto__.cljs$core$IFn$_invoke$arity$1 = huginn$sensors$sensor_chan_$_state_machine__14251__auto____1;\nreturn huginn$sensors$sensor_chan_$_state_machine__14251__auto__;\n})()\n;})(switch__14250__auto__,c__14273__auto___22683,out_chan))\n})();\nvar state__14275__auto__ = (function (){var statearr_22670 = (f__14274__auto__.cljs$core$IFn$_invoke$arity$0 ? f__14274__auto__.cljs$core$IFn$_invoke$arity$0() : f__14274__auto__.call(null));\n(statearr_22670[(6)] = c__14273__auto___22683);\n\nreturn statearr_22670;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__14275__auto__);\n});})(c__14273__auto___22683,out_chan))\n);\n\n\nreturn out_chan;\n});\nhuginn.sensors.cleanup_sensor = (function huginn$sensors$cleanup_sensor(p__22671){\nvar map__22672 = p__22671;\nvar map__22672__$1 = ((((!((map__22672 == null)))?(((((map__22672.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__22672.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__22672):map__22672);\nvar system = map__22672__$1;\nvar sensor_chan = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__22672__$1,new cljs.core.Keyword(null,\"sensor-chan\",\"sensor-chan\",-1323578869));\ncljs.core.async.close_BANG_(sensor_chan);\n\nreturn cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(system,new cljs.core.Keyword(null,\"sensor-chan\",\"sensor-chan\",-1323578869));\n});\nhuginn.sensors._start_mix_sensor = (function huginn$sensors$_start_mix_sensor(opts,sensor_gpio,p__22674){\nvar map__22675 = p__22674;\nvar map__22675__$1 = ((((!((map__22675 == null)))?(((((map__22675.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__22675.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__22675):map__22675);\nvar system = map__22675__$1;\nvar telemetry_chan = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__22675__$1,new cljs.core.Keyword(null,\"telemetry-chan\",\"telemetry-chan\",-1991836503));\nvar mixer = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__22675__$1,new cljs.core.Keyword(null,\"mixer\",\"mixer\",-120313315));\nvar s_chan = huginn.sensors.sensor_chan(opts,sensor_gpio);\ntaoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"info\",\"info\",-317069002),\"huginn.sensors\",null,58,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay(((function (s_chan,map__22675,map__22675__$1,system,telemetry_chan,mixer){\nreturn (function (){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [\"connecting sensor to mixer\"], null);\n});})(s_chan,map__22675,map__22675__$1,system,telemetry_chan,mixer))\n,null)),null,-16111393);\n\ncljs.core.async.admix(mixer,s_chan);\n\ntry{var result__17399__auto__ = cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(system,new cljs.core.Keyword(null,\"mixer\",\"mixer\",-120313315),mixer),new cljs.core.Keyword(null,\"sensor-chan\",\"sensor-chan\",-1323578869),s_chan);\ntaoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"debug\",\"debug\",-1608172596),\"huginn.sensors\",null,60,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay(((function (result__17399__auto__,s_chan,map__22675,map__22675__$1,system,telemetry_chan,mixer){\nreturn (function (){\nreturn new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(new cljs.core.Symbol(null,\"->\",\"->\",-2139605430,null),new cljs.core.Symbol(null,\"system\",\"system\",1611149803,null),cljs.core.list(new cljs.core.Symbol(null,\"assoc\",\"assoc\",2071440380,null),new cljs.core.Keyword(null,\"mixer\",\"mixer\",-120313315),new cljs.core.Symbol(null,\"mixer\",\"mixer\",1520218212,null)),cljs.core.list(new cljs.core.Symbol(null,\"assoc\",\"assoc\",2071440380,null),new cljs.core.Keyword(null,\"sensor-chan\",\"sensor-chan\",-1323578869),new cljs.core.Symbol(null,\"s-chan\",\"s-chan\",-1902503670,null))),\"=>\",result__17399__auto__], null);\n});})(result__17399__auto__,s_chan,map__22675,map__22675__$1,system,telemetry_chan,mixer))\n,null)),null,-161223001);\n\nreturn result__17399__auto__;\n}catch (e22677){if((e22677 instanceof Error)){\nvar e__17361__auto__ = e22677;\ntaoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"error\",\"error\",-978969032),\"huginn.sensors\",null,60,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay(((function (e__17361__auto__,s_chan,map__22675,map__22675__$1,system,telemetry_chan,mixer){\nreturn (function (){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [e__17361__auto__], null);\n});})(e__17361__auto__,s_chan,map__22675,map__22675__$1,system,telemetry_chan,mixer))\n,null)),null,-1308716685);\n\nthrow e__17361__auto__;\n} else {\nthrow e22677;\n\n}\n}});\nhuginn.sensors.start_mix_sensor = (function huginn$sensors$start_mix_sensor(system_promise,opts,sensor_gpio){\nreturn promesa.core.then(system_promise,cljs.core.partial.cljs$core$IFn$_invoke$arity$3(huginn.sensors._start_mix_sensor,opts,sensor_gpio));\n});\n","~:ns-info",["^ ","~:rename-macros",null,"~:renames",["^ "],"~:meta",["^ ","~:file","huginn/sensors.cljs","~:line",1,"~:column",5,"~:end-line",1,"~:end-column",19],"~:ns-aliases",["^ ","~$jsonwebtoken","~$shadow.js.shim.module$jsonwebtoken","~$systeminformation","~$shadow.js.shim.module$systeminformation","~$clojure.core.async","~$cljs.core.async","~$raspicam","~$shadow.js.shim.module$raspicam"],"~:use-macros",["^ ","~$get-env","~$taoensso.timbre","~$log","^F","~$logf","^F","~$reportf","^F","~$fatalf","^F","~$warnf","^F","~$report","^F","~$spy","^F","~$warn","^F","~$trace","^F","~$debug","^F","~$debugf","^F","~$tracef","^F","~$infof","^F","~$fatal","^F","~$errorf","^F","~$info","^F","~$error","^F"],"~:excludes",["~#set",[]],"~:name","~$huginn.sensors","~:js-aliases",["^ ","node-dht-sensor","~$shadow.js.shim.module$node_dht_sensor"],"~:op","~:ns","~:imports",null,"~:requires",["^ ","^12","^12","~$p","~$promesa.core","^17","^17","~$timbre","^F","~$a","^A","~$cljs.core","^19","~$goog","^1:","^A","^A","^@","^A","~$s","^12","~$huginn.mqtt","^1;","^F","^F"],"~:seen",["^Y",["~:require"]],"~:uses",["^ ","~$payload-root","^1;"],"~:require-macros",["^ ","^F","^F","^18","^F","^19","^19","~$a","^A","^A","^A","^@","^A"],"~:form",["~#list",["~$ns","^[",["^1B",["^1=",["^17","~:as","~$p"],["^F","^1D","^18","~:refer-macros",["^G","^O","^P","^V","^N","^W","^T","^L","^H","^R","^Q","^S","^K","^U","^J","^I","^M","^E"]],["^1;","~:refer",["^1?"]],["^@","^1D","~$a"],["node-dht-sensor","^1D","~$s"]]]]],"~:flags",["^ ","^1=",["^Y",[]]],"~:js-deps",["^ ","^11",["^ ","^1D","~$s"]],"~:deps",["^1:","^19","^17","^F","^1;","^A","^12"]],"^14","^[","~:resource-id",["~:shadow.build.classpath/resource","huginn/sensors.cljs"],"~:compiled-at",1540186000867,"~:resource-name","huginn/sensors.cljs","~:warnings",[],"~:source","(ns huginn.sensors\n  (:require\n   [promesa.core :as p]\n   [taoensso.timbre :as timbre\n    :refer-macros [log  trace  debug  info  warn  error  fatal  report\n                   logf tracef debugf infof warnf errorf fatalf reportf\n                   spy get-env]]\n   [huginn.mqtt :refer [payload-root]]\n   [clojure.core.async :as a]\n   [\"node-dht-sensor\" :as s]))\n\n\n(defn build-sensor-packet\n  [sensor-name  sensor-reading]\n  (spy  [{:payload sensor-reading\n          :subfolder (str \"metrics/\" sensor-name)}]))\n\n(defn publish-sensor-reading\n  [opts out-chan err temp humidity]\n  (if err\n    (do (info err))\n    (a/go\n      (a/>! out-chan\n            [{:payload (str (payload-root opts) \"-room-temp/\" (str temp))\n              :subfolder \"metrics/temperature\"}\n             {:payload (str\n                        (payload-root opts) \"-room-humidity/\" (str humidity))\n              :subfolder \"metrics/humidity\"}]))))\n\n(defn sensor-chan\n  \"this creates a channel with sensor readings from a given gpio channel\n  Use\n  Please note that there are two different and confusing ways to reference a channel; either using the Raspberry Pi or the BCM/SoC naming schema (sadly, neither of which match the physical pins!). This module supports both schemas, with Raspberry Pi being the default. Please see this page for more details.\n\n  taken from rpi-gpio readem \"\n  [opts gpio-channel]\n  (let [out-chan (a/chan)]\n    (info gpio-channel)\n    (s/read 22 gpio-channel (partial publish-sensor-reading opts out-chan))\n    (a/go-loop []\n      (a/<! (a/timeout (:dht11Delay opts)))\n      (s/read 22 gpio-channel (partial publish-sensor-reading opts out-chan))\n        (recur))\n    out-chan))\n\n\n\n(defn cleanup-sensor\n  [{:keys [sensor-chan] :as system}]\n  (a/close! sensor-chan)\n  (-> system\n      (dissoc :sensor-chan)))\n\n\n(defn -start-mix-sensor\n  [opts sensor-gpio  {:keys [telemetry-chan mixer] :as system} ]\n  (let [s-chan (sensor-chan opts sensor-gpio)]\n              (info \"connecting sensor to mixer\")\n              (a/admix mixer s-chan)\n              (spy (-> system\n                       (assoc :mixer mixer)\n                       (assoc :sensor-chan s-chan)))))\n\n(defn start-mix-sensor\n  [system-promise opts sensor-gpio]\n  (p/then system-promise (partial -start-mix-sensor opts sensor-gpio)))\n","~:reader-features",["^Y",["~:cljs"]],"~:cljc",false,"~:source-map-compact",["^ ","mappings","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","names",["huginn.sensors/build-sensor-packet","sensor-name","sensor-reading","result__17399__auto__","taoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10","taoensso.timbre/*config*","cljs.core/Delay","e22609","js/Error","e__17361__auto__","huginn.sensors/publish-sensor-reading","opts","out-chan","err","temp","humidity","c__14273__auto__","cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1","cljs.core.async.impl.dispatch/run","f__14274__auto__","switch__14250__auto__","state_22628","state_val_22629","inst_22610","cljs.core/PersistentVector","inst_22611","inst_22612","inst_22613","inst_22614","inst_22615","inst_22616","cljs.core/PersistentHashMap","inst_22617","inst_22618","inst_22619","inst_22620","inst_22621","inst_22622","inst_22623","inst_22624","cljs.core.async.impl.ioc-helpers/put!","inst_22626","cljs.core.async.impl.ioc-helpers/return-chan","statearr-22630","state-machine__14251__auto__","ret-value__14252__auto__","result__14253__auto__","cljs.core/keyword-identical?","e22631","js/Object","ex__14254__auto__","statearr-22632","cljs.core.async.impl.ioc-helpers/process-exception","state__14275__auto__","statearr-22633","cljs.core.async.impl.ioc-helpers/USER-START-IDX","cljs.core.async.impl.ioc-helpers/run-state-machine-wrapped","huginn.mqtt/payload-root","huginn.sensors/sensor-chan","gpio-channel","cljs.core.async.chan.cljs$core$IFn$_invoke$arity$0","G__22634","G__22635","G__22636","js/shadow.js.shim.module$node_dht_sensor.read","cljs.core.partial.cljs$core$IFn$_invoke$arity$3","state_22648","state_val_22649","statearr-22651","inst_22638","inst_22639","cljs.core.async.impl.ioc-helpers/take!","inst_22646","inst_22641","inst_22642","inst_22643","statearr-22653","statearr-22654","statearr-22659","e22660","statearr-22665","statearr-22670","cljs.core.async/timeout","p__22671","map__22672","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","cljs.core.get.cljs$core$IFn$_invoke$arity$2","huginn.sensors/cleanup-sensor","sensor-chan","system","cljs.core.async/close!","cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2","p__22674","map__22675","huginn.sensors/-start-mix-sensor","sensor-gpio","telemetry-chan","mixer","s-chan","cljs.core.async/admix","e22677","cljs.core.assoc.cljs$core$IFn$_invoke$arity$3","huginn.sensors/start-mix-sensor","system-promise","promesa.core/then"]]],"~:cache-keys",["~#cmap",[["^1K","cljs_node_io/file.cljs"],[1537666007418,"^1:","^19","~$goog.Uri","~$cljs-node-io.streams","~$cljs-node-io.fs","~$cljs-node-io.protocols"],["^1K","goog/dom/tagname.js"],[1530991559994,"^1:","~$goog.dom.HtmlElement"],["^1K","goog/async/freelist.js"],[1530991559994,"^1:"],["~:shadow.build.js-support/require","node-dht-sensor"],["^12","shadow.js.shim.module$node_dht_sensor.js","^1:"],["^1K","cljs/core/async/impl/ioc_helpers.cljs"],[1534380136417,"^1:","^19","~$cljs.core.async.impl.protocols"],["^1K","goog/labs/useragent/platform.js"],[1530991559994,"^1:","~$goog.labs.userAgent.util","~$goog.string"],["~:macro","^19"],[1534380137000],["^1K","cljs/core/async.cljs"],[1534380136417,"^1:","^19","^22","~$cljs.core.async.impl.channels","~$cljs.core.async.impl.buffers","~$cljs.core.async.impl.timers","~$cljs.core.async.impl.dispatch","~$cljs.core.async.impl.ioc-helpers"],["^1K","goog/timer/timer.js"],[1530991559994,"^1:","~$goog.Promise","~$goog.events.EventTarget"],["^1K","orchestra_cljs/spec/test.cljs"],[1538695969819,"^1:","^19","~$goog.object","~$goog.userAgent.product","~$clojure.string","~$cljs.stacktrace","~$cljs.pprint","~$cljs.spec.alpha","~$cljs.spec.gen.alpha"],["^1K","cljs/nodejs.cljs"],[1534380137690,"^1:","^19"],["^1K","cljs/spec/gen/alpha.cljs"],[1534380137690,"^1:","^19","^1X"],["^1K","cljs/tools/reader/impl/utils.cljs"],[1535586405375,"^1:","^19","^2?","^24"],["^1K","cljs_node_io/fs.cljs"],[1537666007418,"^1:","^19","^A","^22"],["^1K","cljs_node_io/core.cljs"],[1537666007418,"^1:","^19","^A","^22","~$cljs-node-io.file","^1Y","^1[","^1X"],["^1K","goog/math/math.js"],[1530991559994,"^1:","~$goog.array","~$goog.asserts"],["^1K","goog/string/stringformat.js"],[1530991559994,"^1:","^24"],["^1K","goog/events/eventtype.js"],[1530991559994,"^1:","~$goog.userAgent"],["^1K","goog/labs/useragent/browser.js"],[1530991559994,"^1:","^2E","^23","^2=","^24"],["^1K","goog/array/array.js"],[1530991559994,"^1:","^2F"],["^1K","huginn/mqtt.cljs"],[1540185990025,"^1:","^19","^17","^2?","~$huginn.jwt","~$shadow.js.shim.module$gcic_mqtt_client","~$orchestra-cljs.spec.test","~$huginn.config","^F","^A","^?","^2B","~$cljs.nodejs"],["^1K","cljs_node_io/protocols.cljs"],[1537666007418,"^1:","^19"],["^25","~$cljs.core.async.macros"],[1534380136000],["^1K","cljs_node_io/streams.cljs"],[1537666007418,"^1:","^19","^1X","^A","^1["],["^1K","huginn/config.cljs"],[1540154895584,"^1:","^19"],["^1K","goog/useragent/useragent.js"],[1530991559994,"^1:","~$goog.labs.userAgent.browser","~$goog.labs.userAgent.engine","~$goog.labs.userAgent.platform","^23","~$goog.reflect","^24"],["^1K","goog/structs/prioritypool.js"],[1530991559994,"^1:","~$goog.structs.Pool","~$goog.structs.PriorityQueue"],["^25","~$cljs.tools.reader.reader-types"],[1535586405000],["^1K","goog/async/run.js"],[1530991559994,"^1:","~$goog.async.WorkQueue","~$goog.async.nextTick","~$goog.async.throwException"],["^1K","taoensso/encore.cljs"],[1535586406568,"^1:","^19","^2?","~$clojure.set","~$cljs.reader","~$cljs.tools.reader.edn","~$cljs.test","^2=","^24","~$goog.string.format","~$goog.string.StringBuffer","~$goog.events","~$goog.net.XhrIo","~$goog.net.XhrIoPool","~$goog.Uri.QueryData","~$goog.structs","~$goog.net.EventType","~$goog.net.ErrorCode","~$taoensso.truss"],["^1K","goog/debug/error.js"],[1530991559994,"^1:"],["^1K","huginn/sensors.cljs"],[1539537129814,"^1:","^19","^17","^F","^1;","^A","^12"],["^1K","goog/async/workqueue.js"],[1530991559994,"^1:","^2F","~$goog.async.FreeList"],["^1K","huginn/jwt.cljs"],[1540154806767,"^1:","^19","^2?","^17","~$cljs-node-io.core","^2L","^="],["^1K","promesa/impl/scheduler.cljc"],[1535586406328,"^1:","^19","~$promesa.protocols"],["^1K","goog/events/events.js"],[1530991559994,"^1:","^2F","~$goog.debug.entryPointRegistry","~$goog.events.BrowserEvent","~$goog.events.BrowserFeature","~$goog.events.Listenable","~$goog.events.ListenerMap"],["^1K","goog/promise/resolver.js"],[1530991559994,"^1:"],["^1K","goog/events/browserfeature.js"],[1530991559994,"^1:","^2G"],["^1K","cljs/tools/reader/edn.cljs"],[1535586405375,"^1:","^19","~$cljs.tools.reader.impl.errors","^2T","~$cljs.tools.reader.impl.utils","~$cljs.tools.reader.impl.commons","~$cljs.tools.reader","^24","^31"],["^1K","goog/structs/priorityqueue.js"],[1530991559994,"^1:","~$goog.structs.Heap"],["^1K","goog/net/xhrio.js"],[1530991559994,"^1:","~$goog.Timer","^2E","^2F","^3=","^2<","~$goog.json.hybrid","~$goog.log","^38","^37","~$goog.net.HttpStatus","~$goog.net.XmlHttp","^24","^36","~$goog.structs.Map","~$goog.uri.utils","^2G"],["^1K","goog/promise/thenable.js"],[1530991559994,"^1:"],["^1K","promesa/impl.cljc"],[1535586406328,"^1:","^19","^3<","~$org.bluebird"],["^1K","goog/dom/nodetype.js"],[1530991559994,"^1:"],["^25","^F"],[1535586406000],["^1K","cljs/tools/reader/impl/inspect.cljs"],[1535586405375,"^1:","^19"],["^1K","cljs/pprint.cljs"],[1534380137690,"^1:","^19","^2?","^24","^31"],["^25","^2C"],[1534380137000],["^1K","cljs/tools/reader.cljs"],[1535586405375,"^1:","^19","^2T","^3C","^3D","^3B","^2E","^24","^31"],["^1K","goog/net/wrapperxmlhttpfactory.js"],[1530991559994,"^1:","~$goog.net.XhrLike","~$goog.net.XmlHttpFactory"],["^1K","goog/events/eventtarget.js"],[1530991559994,"^1:","~$goog.Disposable","^2F","^32","~$goog.events.Event","^3@","^3A","^2="],["^1K","goog/disposable/disposable.js"],[1530991559994,"^1:","~$goog.disposable.IDisposable"],["^25","^2J"],[1538695969000],["^1K","goog/object/object.js"],[1530991559994,"^1:"],["^1K","goog/structs/set.js"],[1530991559994,"^1:","^36","~$goog.structs.Collection","^3L"],"~:SHADOW-TIMESTAMP",[1540077702000,1534380137000],["^1K","cljs/stacktrace.cljc"],[1534380137690,"^1:","^19","^24","^2?"],["^1K","goog/math/long.js"],[1530991559994,"^1:","^2F","^2Q"],["^1K","goog/events/listener.js"],[1530991559994,"^1:","~$goog.events.ListenableKey"],["^1K","cljs/core/async/impl/channels.cljs"],[1534380136417,"^1:","^19","^22","^29","^27"],["^1K","goog/events/listenermap.js"],[1530991559994,"^1:","^2E","~$goog.events.Listener","^2="],["^1K","goog/events/eventid.js"],[1530991559994,"^1:"],["^1K","taoensso/truss.cljs"],[1535586406478,"^1:","^19","~$taoensso.truss.impl"],["^1K","shadow/test/env.cljs"],[1540077702615,"^1:","^19"],["^1K","goog/functions/functions.js"],[1530991559994,"^1:"],["^1K","cljs/core/async/impl/dispatch.cljs"],[1534380136417,"^1:","^19","^27","^2V"],["^1K","taoensso/truss/impl.cljs"],[1535586406478,"^1:","^19","^2X"],["^1K","clojure/walk.cljs"],[1534380137690,"^1:","^19"],["^1K","goog/useragent/product.js"],[1530991559994,"^1:","^2N","^2P","^2G"],["^1K","cljs/core/async/impl/protocols.cljs"],[1534380136417,"^1:","^19"],["^1K","goog/net/eventtype.js"],[1530991559994,"^1:"],["^1K","goog/structs/map.js"],[1530991559994,"^1:","~$goog.iter.Iterator","~$goog.iter.StopIteration","^2="],["^1K","goog/net/xhriopool.js"],[1530991559994,"^1:","^33","~$goog.structs.PriorityPool"],["^1K","goog/structs/queue.js"],[1530991559994,"^1:","^2E"],["^1K","goog/labs/useragent/engine.js"],[1530991559994,"^1:","^2E","^23","^24"],["^1K","taoensso/timbre/appenders/core.cljs"],[1535586406375,"^1:","^19","^2?","~$taoensso.encore"],["^1K","cljs/reader.cljs"],[1534380137690,"^1:","^19","^2=","^3E","^2Z","^31"],["^21","bluebird"],["~$shadow.js.shim.module$bluebird","shadow.js.shim.module$bluebird.js","^1:"],["^25","~$cljs-node-io.macros"],[1537666007000],["^25","^2B"],[1534380137000],["^1K","goog/asserts/asserts.js"],[1530991559994,"^1:","~$goog.debug.Error","~$goog.dom.NodeType","^24"],["^1K","cljs/core/async/impl/buffers.cljs"],[1534380136417,"^1:","^19","^22"],["^25","^2A"],[1534380137000],["^1K","goog/debug/logbuffer.js"],[1530991559994,"^1:","^2F","~$goog.debug.LogRecord"],["^21","jsonwebtoken"],["^=","shadow.js.shim.module$jsonwebtoken.js","^1:"],["^25","^40"],[1535586406000],["^1K","goog/uri/uri.js"],[1530991559994,"^1:","^2E","^2F","^24","^36","^3L","^3M","~$goog.uri.utils.ComponentIndex","~$goog.uri.utils.StandardQueryParam"],["^1K","goog/net/errorcode.js"],[1530991559994,"^1:"],["^25","^2["],[1534380137000],["^25","^A"],[1534380136000],["^1K","goog/disposable/idisposable.js"],[1530991559994,"^1:"],["^1K","goog/promise/promise.js"],[1530991559994,"^1:","~$goog.Thenable","^2F","^3:","~$goog.async.run","^2W","^43","~$goog.promise.Resolver"],["^1K","cljs/core/async/impl/timers.cljs"],[1534380136417,"^1:","^19","^22","^26","^29"],["^1K","cljs/spec/alpha.cljs"],[1534380137690,"^1:","^19","^2=","~$clojure.walk","^2C","^2?"],["^1K","goog/debug/logrecord.js"],[1530991559994,"^1:"],["^1K","goog/base.js"],[1530991559994],["^1K","promesa/core.cljc"],[1535586406328,"^1:","^19","^3<","~$promesa.impl","~$promesa.impl.scheduler"],["^1K","goog/json/hybrid.js"],[1530991559994,"^1:","^2F","~$goog.json"],["^1K","goog/structs/structs.js"],[1530991559994,"^1:","^2E","^2="],["^1K","cljs/tools/reader/impl/errors.cljs"],[1535586405375,"^1:","^19","^2T","^2?","~$cljs.tools.reader.impl.inspect"],["^1K","org/bluebird.cljs"],[1535669979047,"^1:","^19","^41"],["^1K","clojure/string.cljs"],[1534380137690,"^1:","^19","^24","^31"],["^1K","goog/structs/pool.js"],[1530991559994,"^1:","^3Q","~$goog.structs.Queue","~$goog.structs.Set"],["^1K","goog/net/httpstatus.js"],[1530991559994,"^1:"],["^1K","goog/structs/heap.js"],[1530991559994,"^1:","^2E","^2=","~$goog.structs.Node"],["^1K","goog/debug/entrypointregistry.js"],[1530991559994,"^1:","^2F"],["^1K","goog/string/string.js"],[1530991559994,"^1:"],["^1K","goog/reflect/reflect.js"],[1530991559994,"^1:"],["^1K","goog/labs/useragent/util.js"],[1530991559994,"^1:","^24"],["^25","~$clojure.template"],[1534380136000],["^25","~$cljs.core.async.impl.ioc-macros"],[1534380136000],["^21","gcic-mqtt-client"],["^2I","shadow.js.shim.module$gcic_mqtt_client.js","^1:"],["^1K","goog/debug/debug.js"],[1530991559994,"^1:","^2E","~$goog.debug.errorcontext","^2G"],["^1K","goog/string/stringbuffer.js"],[1530991559994,"^1:"],["^1K","goog/debug/errorcontext.js"],[1530991559994,"^1:"],["^1K","cljs/tools/reader/reader_types.cljs"],[1535586405375,"^1:","^19","^3C","^24","^31"],["^1K","promesa/protocols.cljc"],[1535586406328,"^1:","^19"],["^1K","goog/iter/iter.js"],[1530991559994,"^1:","^2E","^2F","~$goog.functions","~$goog.math"],["^1K","goog/async/nexttick.js"],[1530991559994,"^1:","^3=","~$goog.dom.TagName","^4F","^2N","^2O"],["^1K","goog/debug/logger.js"],[1530991559994,"^1:","^2E","^2F","~$goog.debug","~$goog.debug.LogBuffer","^45"],["^1K","goog/events/event.js"],[1530991559994,"^1:","^3Q","~$goog.events.EventId"],["^1K","cljs/tools/reader/impl/commons.cljs"],[1535586405375,"^1:","^19","^3B","^2T","^3C"],["^21","systeminformation"],["^?","shadow.js.shim.module$systeminformation.js","^1:"],["^1K","goog/dom/htmlelement.js"],[1530991559994,"^1:"],["^1K","cljs/core.cljs"],[1534380137690,"~$goog.math.Long","~$goog.math.Integer","^24","^2=","^2E","^1X","^31"],["^1K","goog/log/log.js"],[1530991559994,"^1:","^4I","~$goog.debug.LogManager","^45","~$goog.debug.Logger"],["^1K","goog/structs/collection.js"],[1530991559994,"^1:"],["^1K","goog/events/browserevent.js"],[1530991559994,"^1:","^3?","^3R","~$goog.events.EventType","^2Q","^2G"],["^1K","goog/math/integer.js"],[1530991559994,"^1:"],["^1K","goog/structs/node.js"],[1530991559994,"^1:"],["^25","^3X"],[1535586406000],["^1K","clojure/set.cljs"],[1534380137690,"^1:","^19"],["^1K","goog/uri/utils.js"],[1530991559994,"^1:","^2E","^2F","^24"],["^1K","taoensso/timbre.cljs"],[1535586406375,"^1:","^19","^2?","^40","~$taoensso.timbre.appenders.core"],["^1K","goog/json/json.js"],[1530991559994,"^1:"],["^1K","goog/events/listenable.js"],[1530991559994,"^1:","^4K"],["^1K","goog/net/xmlhttpfactory.js"],[1530991559994,"^1:","^3O"],["^1K","goog/net/xmlhttp.js"],[1530991559994,"^1:","^2F","~$goog.net.WrapperXmlHttpFactory","^3P"],["^1K","cljs/test.cljs"],[1534380137690,"~$shadow.test.env","^1:","^19","^2?","^2A"],["^1K","goog/net/xhrlike.js"],[1530991559994,"^1:"],["^25","^2Y"],[1534380137000]]],"~:analyzer",["^ ","^3",null,"^4",["^ "],"^5",["^ ","^6","huginn/sensors.cljs","^7",1,"^8",5,"^9",1,"^:",19],"^;",["^ ","^<","^=","^>","^?","^@","^A","^B","^C"],"^D",["^ ","^E","^F","^G","^F","^H","^F","^I","^F","^J","^F","^K","^F","^L","^F","^M","^F","^N","^F","^O","^F","^P","^F","^Q","^F","^R","^F","^S","^F","^T","^F","^U","^F","^V","^F","^W","^F"],"^X",["^Y",[]],"~:shadow/js-access-properties",["^Y",["read"]],"^Z","^[","^10",["^ ","^11","^12"],"^15",null,"^16",["^ ","^12","^12","~$p","^17","^17","^17","^18","^F","~$a","^A","^19","^19","^1:","^1:","^A","^A","^@","^A","~$s","^12","^1;","^1;","^F","^F"],"^1<",["^Y",["^1="]],"~:shadow/js-access-global",["^Y",["Object","Error"]],"^1>",["^ ","^1?","^1;"],"~:defs",["^ ","~$build-sensor-packet",["^ ","~:protocol-inline",null,"^5",["^ ","^6","huginn/sensors.cljs","^7",13,"^8",7,"^9",13,"^:",26,"~:arglists",["^1B",["~$quote",["^1B",[["~$sensor-name","~$sensor-reading"]]]]]],"^Z","~$huginn.sensors/build-sensor-packet","~:variadic",false,"^6","huginn/sensors.cljs","^:",26,"~:method-params",["^1B",[["^50","^51"]]],"~:protocol-impl",null,"~:arglists-meta",["^1B",[null,null]],"^8",1,"^7",13,"^9",13,"~:max-fixed-arity",2,"~:fn-var",true,"^4Z",["^1B",["^4[",["^1B",[["^50","^51"]]]]]],"~$publish-sensor-reading",["^ ","^4Y",null,"^5",["^ ","^6","huginn/sensors.cljs","^7",18,"^8",7,"^9",18,"^:",29,"^4Z",["^1B",["^4[",["^1B",[["~$opts","~$out-chan","~$err","~$temp","~$humidity"]]]]]],"^Z","~$huginn.sensors/publish-sensor-reading","^53",false,"^6","huginn/sensors.cljs","^:",29,"^54",["^1B",[["^5:","^5;","^5<","^5=","^5>"]]],"^55",null,"^56",["^1B",[null,null]],"^8",1,"^7",18,"^9",18,"^57",5,"^58",true,"^4Z",["^1B",["^4[",["^1B",[["^5:","^5;","^5<","^5=","^5>"]]]]]],"~$sensor-chan",["^ ","^4Y",null,"^5",["^ ","^6","huginn/sensors.cljs","^7",30,"^8",7,"^9",30,"^:",18,"^4Z",["^1B",["^4[",["^1B",[["^5:","~$gpio-channel"]]]]],"~:doc","this creates a channel with sensor readings from a given gpio channel\n  Use\n  Please note that there are two different and confusing ways to reference a channel; either using the Raspberry Pi or the BCM/SoC naming schema (sadly, neither of which match the physical pins!). This module supports both schemas, with Raspberry Pi being the default. Please see this page for more details.\n\n  taken from rpi-gpio readem "],"^Z","~$huginn.sensors/sensor-chan","^53",false,"^6","huginn/sensors.cljs","^:",18,"^54",["^1B",[["^5:","^5A"]]],"^55",null,"^56",["^1B",[null,null]],"^8",1,"^7",30,"^9",30,"^57",2,"^58",true,"^4Z",["^1B",["^4[",["^1B",[["^5:","^5A"]]]]],"^5B","this creates a channel with sensor readings from a given gpio channel\n  Use\n  Please note that there are two different and confusing ways to reference a channel; either using the Raspberry Pi or the BCM/SoC naming schema (sadly, neither of which match the physical pins!). This module supports both schemas, with Raspberry Pi being the default. Please see this page for more details.\n\n  taken from rpi-gpio readem "],"~$cleanup-sensor",["^ ","^4Y",null,"^5",["^ ","^6","huginn/sensors.cljs","^7",48,"^8",7,"^9",48,"^:",21,"^4Z",["^1B",["^4[",["^1B",[[["^ ","~:keys",["^5@"],"^1D","~$system"]]]]]]],"^Z","~$huginn.sensors/cleanup-sensor","^53",false,"^6","huginn/sensors.cljs","^:",21,"^54",["^1B",[["~$p__22671"]]],"^55",null,"^56",["^1B",[null,null]],"^8",1,"^7",48,"^9",48,"^57",1,"^58",true,"^4Z",["^1B",["^4[",["^1B",[[["^ ","^5E",["^5@"],"^1D","^5F"]]]]]]],"~$-start-mix-sensor",["^ ","^4Y",null,"^5",["^ ","^6","huginn/sensors.cljs","^7",55,"^8",7,"^9",55,"^:",24,"^4Z",["^1B",["^4[",["^1B",[["^5:","~$sensor-gpio",["^ ","^5E",["~$telemetry-chan","~$mixer"],"^1D","^5F"]]]]]]],"^Z","~$huginn.sensors/-start-mix-sensor","^53",false,"^6","huginn/sensors.cljs","^:",24,"^54",["^1B",[["^5:","^5J","~$p__22674"]]],"^55",null,"^56",["^1B",[null,null]],"^8",1,"^7",55,"^9",55,"^57",3,"^58",true,"^4Z",["^1B",["^4[",["^1B",[["^5:","^5J",["^ ","^5E",["^5K","^5L"],"^1D","^5F"]]]]]]],"~$start-mix-sensor",["^ ","^4Y",null,"^5",["^ ","^6","huginn/sensors.cljs","^7",64,"^8",7,"^9",64,"^:",23,"^4Z",["^1B",["^4[",["^1B",[["~$system-promise","^5:","^5J"]]]]]],"^Z","~$huginn.sensors/start-mix-sensor","^53",false,"^6","huginn/sensors.cljs","^:",23,"^54",["^1B",[["^5P","^5:","^5J"]]],"^55",null,"^56",["^1B",[null,null]],"^8",1,"^7",64,"^9",64,"^57",3,"^58",true,"^4Z",["^1B",["^4[",["^1B",[["^5P","^5:","^5J"]]]]]]],"^1@",["^ ","^F","^F","^18","^F","^19","^19","~$a","^A","^A","^A","^@","^A"],"~:cljs.analyzer/constants",["^ ","^1<",["^Y",["~:dht11Delay","^51","^5L","~:payload","~:else","^50","~:subfolder","~:telemetry-chan","~$s-chan","~$->","^5F","~:sensor-chan","~:recur","~:debug","~:info","~:error","~$str","~:auto","~$assoc","~:p","~:mixer"]],"~:order",["^62","~:p","^64","^5U","^5T","^5V","^60","^51","^63","^50","^61","^5[","^5S","^5Z","^5W","^66","^5Y","^5F","^65","^5L","^5X"]],"^1G",["^ ","^1=",["^Y",[]]],"^1H",["^ ","^11",["^ ","^1D","~$s"]],"^1I",["^1:","^19","^17","^F","^1;","^A","^12"]],"^14","^[","~:ns-specs",["^ "],"~:ns-speced-vars",[],"~:compiler-options",["^1W",[["^6:","~:static-fns"],true,["^6:","~:elide-asserts"],false,["^6:","~:optimize-constants"],null,["^6:","~:external-config"],null,["^6:","~:tooling-config"],null,["^6:","~:emit-constants"],null,["^6:","~:infer-externs"],true,["^6:","^1P"],null,["~:js-options","~:js-provider"],"^1=",["~:mode"],"~:dev",["^6:","~:fn-invoke-direct"],null,["^6:","~:source-map"],"/dev/null"]]]