["^ ","~:output",["^ ","~:js","goog.provide('huginn.sensors');\ngoog.require('cljs.core');\ngoog.require('promesa.core');\ngoog.require('taoensso.timbre');\ngoog.require('huginn.mqtt');\ngoog.require('cljs.core.async');\ngoog.require('shadow.js.shim.module$node_dht_sensor');\nhuginn.sensors.build_sensor_packet = (function huginn$sensors$build_sensor_packet(sensor_name,sensor_reading){\ntry{var result__26768__auto__ = new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\"payload\",\"payload\",-383036092),sensor_reading,new cljs.core.Keyword(null,\"subfolder\",\"subfolder\",1044158439),[\"metrics/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(sensor_name)].join('')], null)], null);\ntaoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"debug\",\"debug\",-1608172596),\"huginn.sensors\",null,15,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay(((function (result__26768__auto__){\nreturn (function (){\nreturn new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\"payload\",\"payload\",-383036092),new cljs.core.Symbol(null,\"sensor-reading\",\"sensor-reading\",1514517376,null),new cljs.core.Keyword(null,\"subfolder\",\"subfolder\",1044158439),cljs.core.list(new cljs.core.Symbol(null,\"str\",\"str\",-1564826950,null),\"metrics/\",new cljs.core.Symbol(null,\"sensor-name\",\"sensor-name\",-817206841,null))], null)], null),\"=>\",result__26768__auto__], null);\n});})(result__26768__auto__))\n,null)),null,1706272029);\n\nreturn result__26768__auto__;\n}catch (e41169){if((e41169 instanceof Error)){\nvar e__26704__auto__ = e41169;\ntaoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"error\",\"error\",-978969032),\"huginn.sensors\",null,15,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay(((function (e__26704__auto__){\nreturn (function (){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [e__26704__auto__], null);\n});})(e__26704__auto__))\n,null)),null,1837071504);\n\nthrow e__26704__auto__;\n} else {\nthrow e41169;\n\n}\n}});\nhuginn.sensors.publish_sensor_reading = (function huginn$sensors$publish_sensor_reading(opts,out_chan,err,temp,humidity){\nif(cljs.core.truth_(err)){\nreturn taoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"info\",\"info\",-317069002),\"huginn.sensors\",null,21,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay((function (){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [err], null);\n}),null)),null,844807796);\n} else {\nvar c__23855__auto__ = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run(((function (c__23855__auto__){\nreturn (function (){\nvar f__23856__auto__ = (function (){var switch__23690__auto__ = ((function (c__23855__auto__){\nreturn (function (state_41198){\nvar state_val_41199 = (state_41198[(1)]);\nif((state_val_41199 === (1))){\nvar inst_41176 = cljs.core.PersistentVector.EMPTY_NODE;\nvar inst_41177 = [new cljs.core.Keyword(null,\"payload\",\"payload\",-383036092),new cljs.core.Keyword(null,\"subfolder\",\"subfolder\",1044158439)];\nvar inst_41178 = huginn.mqtt.payload_root(opts);\nvar inst_41179 = [cljs.core.str.cljs$core$IFn$_invoke$arity$1(temp)].join('');\nvar inst_41180 = [cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_41178),\"-room-temp/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_41179)].join('');\nvar inst_41181 = [inst_41180,\"metrics/temperature\"];\nvar inst_41182 = cljs.core.PersistentHashMap.fromArrays(inst_41177,inst_41181);\nvar inst_41183 = [new cljs.core.Keyword(null,\"payload\",\"payload\",-383036092),new cljs.core.Keyword(null,\"subfolder\",\"subfolder\",1044158439)];\nvar inst_41184 = huginn.mqtt.payload_root(opts);\nvar inst_41189 = [cljs.core.str.cljs$core$IFn$_invoke$arity$1(humidity)].join('');\nvar inst_41190 = [cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_41184),\"-room-humidity/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_41189)].join('');\nvar inst_41191 = [inst_41190,\"metrics/humidity\"];\nvar inst_41192 = cljs.core.PersistentHashMap.fromArrays(inst_41183,inst_41191);\nvar inst_41193 = [inst_41182,inst_41192];\nvar inst_41194 = (new cljs.core.PersistentVector(null,2,(5),inst_41176,inst_41193,null));\nvar state_41198__$1 = state_41198;\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_41198__$1,(2),out_chan,inst_41194);\n} else {\nif((state_val_41199 === (2))){\nvar inst_41196 = (state_41198[(2)]);\nvar state_41198__$1 = state_41198;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_41198__$1,inst_41196);\n} else {\nreturn null;\n}\n}\n});})(c__23855__auto__))\n;\nreturn ((function (switch__23690__auto__,c__23855__auto__){\nreturn (function() {\nvar huginn$sensors$publish_sensor_reading_$_state_machine__23691__auto__ = null;\nvar huginn$sensors$publish_sensor_reading_$_state_machine__23691__auto____0 = (function (){\nvar statearr_41204 = [null,null,null,null,null,null,null];\n(statearr_41204[(0)] = huginn$sensors$publish_sensor_reading_$_state_machine__23691__auto__);\n\n(statearr_41204[(1)] = (1));\n\nreturn statearr_41204;\n});\nvar huginn$sensors$publish_sensor_reading_$_state_machine__23691__auto____1 = (function (state_41198){\nwhile(true){\nvar ret_value__23692__auto__ = (function (){try{while(true){\nvar result__23693__auto__ = switch__23690__auto__(state_41198);\nif(cljs.core.keyword_identical_QMARK_(result__23693__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\ncontinue;\n} else {\nreturn result__23693__auto__;\n}\nbreak;\n}\n}catch (e41205){if((e41205 instanceof Object)){\nvar ex__23694__auto__ = e41205;\nvar statearr_41206_41243 = state_41198;\n(statearr_41206_41243[(5)] = ex__23694__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_41198);\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nthrow e41205;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__23692__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\nvar G__41244 = state_41198;\nstate_41198 = G__41244;\ncontinue;\n} else {\nreturn ret_value__23692__auto__;\n}\nbreak;\n}\n});\nhuginn$sensors$publish_sensor_reading_$_state_machine__23691__auto__ = function(state_41198){\nswitch(arguments.length){\ncase 0:\nreturn huginn$sensors$publish_sensor_reading_$_state_machine__23691__auto____0.call(this);\ncase 1:\nreturn huginn$sensors$publish_sensor_reading_$_state_machine__23691__auto____1.call(this,state_41198);\n}\nthrow(new Error('Invalid arity: ' + arguments.length));\n};\nhuginn$sensors$publish_sensor_reading_$_state_machine__23691__auto__.cljs$core$IFn$_invoke$arity$0 = huginn$sensors$publish_sensor_reading_$_state_machine__23691__auto____0;\nhuginn$sensors$publish_sensor_reading_$_state_machine__23691__auto__.cljs$core$IFn$_invoke$arity$1 = huginn$sensors$publish_sensor_reading_$_state_machine__23691__auto____1;\nreturn huginn$sensors$publish_sensor_reading_$_state_machine__23691__auto__;\n})()\n;})(switch__23690__auto__,c__23855__auto__))\n})();\nvar state__23857__auto__ = (function (){var statearr_41207 = (f__23856__auto__.cljs$core$IFn$_invoke$arity$0 ? f__23856__auto__.cljs$core$IFn$_invoke$arity$0() : f__23856__auto__.call(null));\n(statearr_41207[(6)] = c__23855__auto__);\n\nreturn statearr_41207;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__23857__auto__);\n});})(c__23855__auto__))\n);\n\nreturn c__23855__auto__;\n}\n});\n/**\n * this creates a channel with sensor readings from a given gpio channel\n *   Use\n *   Please note that there are two different and confusing ways to reference a channel; either using the Raspberry Pi or the BCM/SoC naming schema (sadly, neither of which match the physical pins!). This module supports both schemas, with Raspberry Pi being the default. Please see this page for more details.\n * \n *   taken from rpi-gpio readem \n */\nhuginn.sensors.sensor_chan = (function huginn$sensors$sensor_chan(opts,gpio_channel){\nvar out_chan = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$0();\ntaoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"info\",\"info\",-317069002),\"huginn.sensors\",null,38,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay(((function (out_chan){\nreturn (function (){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [gpio_channel], null);\n});})(out_chan))\n,null)),null,358834472);\n\nvar G__41208_41245 = (22);\nvar G__41209_41246 = gpio_channel;\nvar G__41210_41247 = cljs.core.partial.cljs$core$IFn$_invoke$arity$3(huginn.sensors.publish_sensor_reading,opts,out_chan);\nshadow.js.shim.module$node_dht_sensor.read(G__41208_41245,G__41209_41246,G__41210_41247);\n\nvar c__23855__auto___41248 = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run(((function (c__23855__auto___41248,out_chan){\nreturn (function (){\nvar f__23856__auto__ = (function (){var switch__23690__auto__ = ((function (c__23855__auto___41248,out_chan){\nreturn (function (state_41222){\nvar state_val_41223 = (state_41222[(1)]);\nif((state_val_41223 === (1))){\nvar state_41222__$1 = state_41222;\nvar statearr_41224_41249 = state_41222__$1;\n(statearr_41224_41249[(2)] = null);\n\n(statearr_41224_41249[(1)] = (2));\n\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nif((state_val_41223 === (2))){\nvar inst_41212 = new cljs.core.Keyword(null,\"dht11Delay\",\"dht11Delay\",-1809446912).cljs$core$IFn$_invoke$arity$1(opts);\nvar inst_41213 = cljs.core.async.timeout(inst_41212);\nvar state_41222__$1 = state_41222;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_41222__$1,(4),inst_41213);\n} else {\nif((state_val_41223 === (3))){\nvar inst_41220 = (state_41222[(2)]);\nvar state_41222__$1 = state_41222;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_41222__$1,inst_41220);\n} else {\nif((state_val_41223 === (4))){\nvar inst_41215 = (state_41222[(2)]);\nvar inst_41216 = cljs.core.partial.cljs$core$IFn$_invoke$arity$3(huginn.sensors.publish_sensor_reading,opts,out_chan);\nvar inst_41217 = shadow.js.shim.module$node_dht_sensor.read((22),gpio_channel,inst_41216);\nvar state_41222__$1 = (function (){var statearr_41225 = state_41222;\n(statearr_41225[(7)] = inst_41215);\n\n(statearr_41225[(8)] = inst_41217);\n\nreturn statearr_41225;\n})();\nvar statearr_41226_41250 = state_41222__$1;\n(statearr_41226_41250[(2)] = null);\n\n(statearr_41226_41250[(1)] = (2));\n\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nreturn null;\n}\n}\n}\n}\n});})(c__23855__auto___41248,out_chan))\n;\nreturn ((function (switch__23690__auto__,c__23855__auto___41248,out_chan){\nreturn (function() {\nvar huginn$sensors$sensor_chan_$_state_machine__23691__auto__ = null;\nvar huginn$sensors$sensor_chan_$_state_machine__23691__auto____0 = (function (){\nvar statearr_41227 = [null,null,null,null,null,null,null,null,null];\n(statearr_41227[(0)] = huginn$sensors$sensor_chan_$_state_machine__23691__auto__);\n\n(statearr_41227[(1)] = (1));\n\nreturn statearr_41227;\n});\nvar huginn$sensors$sensor_chan_$_state_machine__23691__auto____1 = (function (state_41222){\nwhile(true){\nvar ret_value__23692__auto__ = (function (){try{while(true){\nvar result__23693__auto__ = switch__23690__auto__(state_41222);\nif(cljs.core.keyword_identical_QMARK_(result__23693__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\ncontinue;\n} else {\nreturn result__23693__auto__;\n}\nbreak;\n}\n}catch (e41228){if((e41228 instanceof Object)){\nvar ex__23694__auto__ = e41228;\nvar statearr_41229_41251 = state_41222;\n(statearr_41229_41251[(5)] = ex__23694__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_41222);\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nthrow e41228;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__23692__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\nvar G__41252 = state_41222;\nstate_41222 = G__41252;\ncontinue;\n} else {\nreturn ret_value__23692__auto__;\n}\nbreak;\n}\n});\nhuginn$sensors$sensor_chan_$_state_machine__23691__auto__ = function(state_41222){\nswitch(arguments.length){\ncase 0:\nreturn huginn$sensors$sensor_chan_$_state_machine__23691__auto____0.call(this);\ncase 1:\nreturn huginn$sensors$sensor_chan_$_state_machine__23691__auto____1.call(this,state_41222);\n}\nthrow(new Error('Invalid arity: ' + arguments.length));\n};\nhuginn$sensors$sensor_chan_$_state_machine__23691__auto__.cljs$core$IFn$_invoke$arity$0 = huginn$sensors$sensor_chan_$_state_machine__23691__auto____0;\nhuginn$sensors$sensor_chan_$_state_machine__23691__auto__.cljs$core$IFn$_invoke$arity$1 = huginn$sensors$sensor_chan_$_state_machine__23691__auto____1;\nreturn huginn$sensors$sensor_chan_$_state_machine__23691__auto__;\n})()\n;})(switch__23690__auto__,c__23855__auto___41248,out_chan))\n})();\nvar state__23857__auto__ = (function (){var statearr_41230 = (f__23856__auto__.cljs$core$IFn$_invoke$arity$0 ? f__23856__auto__.cljs$core$IFn$_invoke$arity$0() : f__23856__auto__.call(null));\n(statearr_41230[(6)] = c__23855__auto___41248);\n\nreturn statearr_41230;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__23857__auto__);\n});})(c__23855__auto___41248,out_chan))\n);\n\n\nreturn out_chan;\n});\nhuginn.sensors.cleanup_sensor = (function huginn$sensors$cleanup_sensor(p__41231){\nvar map__41232 = p__41231;\nvar map__41232__$1 = ((((!((map__41232 == null)))?(((((map__41232.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__41232.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__41232):map__41232);\nvar system = map__41232__$1;\nvar sensor_chan = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__41232__$1,new cljs.core.Keyword(null,\"sensor-chan\",\"sensor-chan\",-1323578869));\ncljs.core.async.close_BANG_(sensor_chan);\n\nreturn cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(system,new cljs.core.Keyword(null,\"sensor-chan\",\"sensor-chan\",-1323578869));\n});\nhuginn.sensors._start_mix_sensor = (function huginn$sensors$_start_mix_sensor(opts,sensor_gpio,p__41234){\nvar map__41235 = p__41234;\nvar map__41235__$1 = ((((!((map__41235 == null)))?(((((map__41235.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__41235.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__41235):map__41235);\nvar system = map__41235__$1;\nvar telemetry_chan = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__41235__$1,new cljs.core.Keyword(null,\"telemetry-chan\",\"telemetry-chan\",-1991836503));\nvar mixer = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__41235__$1,new cljs.core.Keyword(null,\"mixer\",\"mixer\",-120313315));\nvar s_chan = huginn.sensors.sensor_chan(opts,sensor_gpio);\ntaoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"info\",\"info\",-317069002),\"huginn.sensors\",null,58,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay(((function (s_chan,map__41235,map__41235__$1,system,telemetry_chan,mixer){\nreturn (function (){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [\"connecting sensor to mixer\"], null);\n});})(s_chan,map__41235,map__41235__$1,system,telemetry_chan,mixer))\n,null)),null,1551509084);\n\ncljs.core.async.admix(mixer,s_chan);\n\ntry{var result__26768__auto__ = cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(system,new cljs.core.Keyword(null,\"mixer\",\"mixer\",-120313315),mixer),new cljs.core.Keyword(null,\"sensor-chan\",\"sensor-chan\",-1323578869),s_chan);\ntaoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"debug\",\"debug\",-1608172596),\"huginn.sensors\",null,60,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay(((function (result__26768__auto__,s_chan,map__41235,map__41235__$1,system,telemetry_chan,mixer){\nreturn (function (){\nreturn new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(new cljs.core.Symbol(null,\"->\",\"->\",-2139605430,null),new cljs.core.Symbol(null,\"system\",\"system\",1611149803,null),cljs.core.list(new cljs.core.Symbol(null,\"assoc\",\"assoc\",2071440380,null),new cljs.core.Keyword(null,\"mixer\",\"mixer\",-120313315),new cljs.core.Symbol(null,\"mixer\",\"mixer\",1520218212,null)),cljs.core.list(new cljs.core.Symbol(null,\"assoc\",\"assoc\",2071440380,null),new cljs.core.Keyword(null,\"sensor-chan\",\"sensor-chan\",-1323578869),new cljs.core.Symbol(null,\"s-chan\",\"s-chan\",-1902503670,null))),\"=>\",result__26768__auto__], null);\n});})(result__26768__auto__,s_chan,map__41235,map__41235__$1,system,telemetry_chan,mixer))\n,null)),null,2038359757);\n\nreturn result__26768__auto__;\n}catch (e41237){if((e41237 instanceof Error)){\nvar e__26704__auto__ = e41237;\ntaoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"error\",\"error\",-978969032),\"huginn.sensors\",null,60,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay(((function (e__26704__auto__,s_chan,map__41235,map__41235__$1,system,telemetry_chan,mixer){\nreturn (function (){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [e__26704__auto__], null);\n});})(e__26704__auto__,s_chan,map__41235,map__41235__$1,system,telemetry_chan,mixer))\n,null)),null,1379263467);\n\nthrow e__26704__auto__;\n} else {\nthrow e41237;\n\n}\n}});\nhuginn.sensors.start_mix_sensor = (function huginn$sensors$start_mix_sensor(system_promise,opts,sensor_gpio){\nreturn promesa.core.then(system_promise,cljs.core.partial.cljs$core$IFn$_invoke$arity$3(huginn.sensors._start_mix_sensor,opts,sensor_gpio));\n});\n","~:ns-info",["^ ","~:rename-macros",null,"~:renames",["^ "],"~:meta",["^ ","~:file","huginn/sensors.cljs","~:line",1,"~:column",5,"~:end-line",1,"~:end-column",19],"~:ns-aliases",["^ ","~$jsonwebtoken","~$shadow.js.shim.module$jsonwebtoken","~$mqtt","~$shadow.js.shim.module$mqtt","~$systeminformation","~$shadow.js.shim.module$systeminformation","~$clojure.core.async","~$cljs.core.async","~$raspicam","~$shadow.js.shim.module$raspicam"],"~:use-macros",["^ ","~$get-env","~$taoensso.timbre","~$log","^H","~$logf","^H","~$reportf","^H","~$fatalf","^H","~$warnf","^H","~$report","^H","~$spy","^H","~$warn","^H","~$trace","^H","~$debug","^H","~$debugf","^H","~$tracef","^H","~$infof","^H","~$fatal","^H","~$errorf","^H","~$info","^H","~$error","^H"],"~:excludes",["~#set",[]],"~:name","~$huginn.sensors","~:js-aliases",["^ ","node-dht-sensor","~$shadow.js.shim.module$node_dht_sensor"],"~:op","~:ns","~:imports",null,"~:requires",["^ ","^14","^14","~$p","~$promesa.core","^19","^19","~$timbre","^H","~$a","^C","~$cljs.core","^1;","~$goog","^1<","^C","^C","^B","^C","~$s","^14","~$huginn.mqtt","^1=","^H","^H"],"~:seen",["^[",["~:require"]],"~:uses",["^ ","~$payload-root","^1="],"~:require-macros",["^ ","^H","^H","^1:","^H","^1;","^1;","~$a","^C","^C","^C","^B","^C"],"~:form",["~#list",["~$ns","^11",["^1D",["^1?",["^19","~:as","~$p"],["^H","^1F","^1:","~:refer-macros",["^I","^Q","^R","^X","^P","^Y","^V","^N","^J","^T","^S","^U","^M","^W","^L","^K","^O","^G"]],["^1=","~:refer",["^1A"]],["^B","^1F","~$a"],["node-dht-sensor","^1F","~$s"]]]]],"~:flags",["^ ","^1?",["^[",[]]],"~:js-deps",["^ ","^13",["^ ","^1F","~$s"]],"~:deps",["^1<","^1;","^19","^H","^1=","^C","^14"]],"^16","^11","~:resource-id",["~:shadow.build.classpath/resource","huginn/sensors.cljs"],"~:compiled-at",1540148870306,"~:resource-name","huginn/sensors.cljs","~:warnings",[],"~:source","(ns huginn.sensors\n  (:require\n   [promesa.core :as p]\n   [taoensso.timbre :as timbre\n    :refer-macros [log  trace  debug  info  warn  error  fatal  report\n                   logf tracef debugf infof warnf errorf fatalf reportf\n                   spy get-env]]\n   [huginn.mqtt :refer [payload-root]]\n   [clojure.core.async :as a]\n   [\"node-dht-sensor\" :as s]))\n\n\n(defn build-sensor-packet\n  [sensor-name  sensor-reading]\n  (spy  [{:payload sensor-reading\n          :subfolder (str \"metrics/\" sensor-name)}]))\n\n(defn publish-sensor-reading\n  [opts out-chan err temp humidity]\n  (if err\n    (do (info err))\n    (a/go\n      (a/>! out-chan\n            [{:payload (str (payload-root opts) \"-room-temp/\" (str temp))\n              :subfolder \"metrics/temperature\"}\n             {:payload (str\n                        (payload-root opts) \"-room-humidity/\" (str humidity))\n              :subfolder \"metrics/humidity\"}]))))\n\n(defn sensor-chan\n  \"this creates a channel with sensor readings from a given gpio channel\n  Use\n  Please note that there are two different and confusing ways to reference a channel; either using the Raspberry Pi or the BCM/SoC naming schema (sadly, neither of which match the physical pins!). This module supports both schemas, with Raspberry Pi being the default. Please see this page for more details.\n\n  taken from rpi-gpio readem \"\n  [opts gpio-channel]\n  (let [out-chan (a/chan)]\n    (info gpio-channel)\n    (s/read 22 gpio-channel (partial publish-sensor-reading opts out-chan))\n    (a/go-loop []\n      (a/<! (a/timeout (:dht11Delay opts)))\n      (s/read 22 gpio-channel (partial publish-sensor-reading opts out-chan))\n        (recur))\n    out-chan))\n\n\n\n(defn cleanup-sensor\n  [{:keys [sensor-chan] :as system}]\n  (a/close! sensor-chan)\n  (-> system\n      (dissoc :sensor-chan)))\n\n\n(defn -start-mix-sensor\n  [opts sensor-gpio  {:keys [telemetry-chan mixer] :as system} ]\n  (let [s-chan (sensor-chan opts sensor-gpio)]\n              (info \"connecting sensor to mixer\")\n              (a/admix mixer s-chan)\n              (spy (-> system\n                       (assoc :mixer mixer)\n                       (assoc :sensor-chan s-chan)))))\n\n(defn start-mix-sensor\n  [system-promise opts sensor-gpio]\n  (p/then system-promise (partial -start-mix-sensor opts sensor-gpio)))\n","~:reader-features",["^[",["~:cljs"]],"~:cljc",false,"~:source-map-compact",["^ ","mappings","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","names",["huginn.sensors/build-sensor-packet","sensor-name","sensor-reading","result__26768__auto__","taoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10","taoensso.timbre/*config*","cljs.core/Delay","e41169","js/Error","e__26704__auto__","huginn.sensors/publish-sensor-reading","opts","out-chan","err","temp","humidity","c__23855__auto__","cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1","cljs.core.async.impl.dispatch/run","f__23856__auto__","switch__23690__auto__","state_41198","state_val_41199","inst_41176","cljs.core/PersistentVector","inst_41177","inst_41178","inst_41179","inst_41180","inst_41181","inst_41182","cljs.core/PersistentHashMap","inst_41183","inst_41184","inst_41189","inst_41190","inst_41191","inst_41192","inst_41193","inst_41194","cljs.core.async.impl.ioc-helpers/put!","inst_41196","cljs.core.async.impl.ioc-helpers/return-chan","statearr-41204","state-machine__23691__auto__","ret-value__23692__auto__","result__23693__auto__","cljs.core/keyword-identical?","e41205","js/Object","ex__23694__auto__","statearr-41206","cljs.core.async.impl.ioc-helpers/process-exception","state__23857__auto__","statearr-41207","cljs.core.async.impl.ioc-helpers/USER-START-IDX","cljs.core.async.impl.ioc-helpers/run-state-machine-wrapped","huginn.mqtt/payload-root","huginn.sensors/sensor-chan","gpio-channel","cljs.core.async.chan.cljs$core$IFn$_invoke$arity$0","G__41208","G__41209","G__41210","js/shadow.js.shim.module$node_dht_sensor.read","cljs.core.partial.cljs$core$IFn$_invoke$arity$3","state_41222","state_val_41223","statearr-41224","inst_41212","inst_41213","cljs.core.async.impl.ioc-helpers/take!","inst_41220","inst_41215","inst_41216","inst_41217","statearr-41225","statearr-41226","statearr-41227","e41228","statearr-41229","statearr-41230","cljs.core.async/timeout","p__41231","map__41232","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","cljs.core.get.cljs$core$IFn$_invoke$arity$2","huginn.sensors/cleanup-sensor","sensor-chan","system","cljs.core.async/close!","cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2","p__41234","map__41235","huginn.sensors/-start-mix-sensor","sensor-gpio","telemetry-chan","mixer","s-chan","cljs.core.async/admix","e41237","cljs.core.assoc.cljs$core$IFn$_invoke$arity$3","huginn.sensors/start-mix-sensor","system-promise","promesa.core/then"]]],"~:cache-keys",["~#cmap",[["^1M","cljs_node_io/file.cljs"],[1537666007418,"^1<","^1;","~$goog.Uri","~$cljs-node-io.streams","~$cljs-node-io.fs","~$cljs-node-io.protocols"],["^1M","goog/dom/tagname.js"],[1530991559994,"^1<","~$goog.dom.HtmlElement"],["^1M","goog/async/freelist.js"],[1530991559994,"^1<"],["~:shadow.build.js-support/require","node-dht-sensor"],["^14","shadow.js.shim.module$node_dht_sensor.js","^1<"],["^1M","cljs/core/async/impl/ioc_helpers.cljs"],[1534380136417,"^1<","^1;","~$cljs.core.async.impl.protocols"],["^1M","goog/labs/useragent/platform.js"],[1530991559994,"^1<","~$goog.labs.userAgent.util","~$goog.string"],["~:macro","^1;"],[1534380137000],["^1M","cljs/core/async.cljs"],[1534380136417,"^1<","^1;","^24","~$cljs.core.async.impl.channels","~$cljs.core.async.impl.buffers","~$cljs.core.async.impl.timers","~$cljs.core.async.impl.dispatch","~$cljs.core.async.impl.ioc-helpers"],["^1M","goog/timer/timer.js"],[1530991559994,"^1<","~$goog.Promise","~$goog.events.EventTarget"],["^1M","cljs/nodejs.cljs"],[1534380137690,"^1<","^1;"],["^1M","cljs/spec/gen/alpha.cljs"],[1534380137690,"^1<","^1;","^1Z"],["^1M","cljs/tools/reader/impl/utils.cljs"],[1535586405375,"^1<","^1;","~$clojure.string","^26"],["^1M","cljs_node_io/fs.cljs"],[1537666007418,"^1<","^1;","^C","^24"],["^1M","cljs_node_io/core.cljs"],[1537666007418,"^1<","^1;","^C","^24","~$cljs-node-io.file","^1[","^21","^1Z"],["^1M","goog/math/math.js"],[1530991559994,"^1<","~$goog.array","~$goog.asserts"],["^1M","goog/string/stringformat.js"],[1530991559994,"^1<","^26"],["^1M","goog/events/eventtype.js"],[1530991559994,"^1<","~$goog.userAgent"],["^1M","goog/labs/useragent/browser.js"],[1530991559994,"^1<","^2A","^25","~$goog.object","^26"],["^1M","goog/array/array.js"],[1530991559994,"^1<","^2B"],["^1M","huginn/mqtt.cljs"],[1540148849141,"^1<","^1;","^19","^2?","~$huginn.jwt","^?","~$huginn.config","^H","^C","^A","~$cljs.spec.alpha","~$cljs.nodejs"],["^1M","cljs_node_io/protocols.cljs"],[1537666007418,"^1<","^1;"],["^27","~$cljs.core.async.macros"],[1534380136000],["^1M","cljs_node_io/streams.cljs"],[1537666007418,"^1<","^1;","^1Z","^C","^21"],["^1M","huginn/config.cljs"],[1535728206166,"^1<","^1;"],["^1M","goog/useragent/useragent.js"],[1530991559994,"^1<","~$goog.labs.userAgent.browser","~$goog.labs.userAgent.engine","~$goog.labs.userAgent.platform","^25","~$goog.reflect","^26"],["^1M","goog/structs/prioritypool.js"],[1530991559994,"^1<","~$goog.structs.Pool","~$goog.structs.PriorityQueue"],["^27","~$cljs.tools.reader.reader-types"],[1535586405000],["^1M","goog/async/run.js"],[1530991559994,"^1<","~$goog.async.WorkQueue","~$goog.async.nextTick","~$goog.async.throwException"],["^1M","taoensso/encore.cljs"],[1535586406568,"^1<","^1;","^2?","~$clojure.set","~$cljs.reader","~$cljs.tools.reader.edn","~$cljs.test","^2D","^26","~$goog.string.format","~$goog.string.StringBuffer","~$goog.events","~$goog.net.XhrIo","~$goog.net.XhrIoPool","~$goog.Uri.QueryData","~$goog.structs","~$goog.net.EventType","~$goog.net.ErrorCode","~$taoensso.truss"],["^1M","goog/debug/error.js"],[1530991559994,"^1<"],["^1M","huginn/sensors.cljs"],[1539537129814,"^1<","^1;","^19","^H","^1=","^C","^14"],["^1M","goog/async/workqueue.js"],[1530991559994,"^1<","^2B","~$goog.async.FreeList"],["^1M","huginn/jwt.cljs"],[1540148196738,"^1<","^1;","^2?","^19","~$cljs-node-io.core","^2H","^="],["^1M","promesa/impl/scheduler.cljc"],[1535586406328,"^1<","^1;","~$promesa.protocols"],["^23","mqtt"],["^?","shadow.js.shim.module$mqtt.js","^1<"],["^1M","goog/events/events.js"],[1530991559994,"^1<","^2B","~$goog.debug.entryPointRegistry","~$goog.events.BrowserEvent","~$goog.events.BrowserFeature","~$goog.events.Listenable","~$goog.events.ListenerMap"],["^1M","goog/promise/resolver.js"],[1530991559994,"^1<"],["^1M","goog/events/browserfeature.js"],[1530991559994,"^1<","^2C"],["^1M","cljs/tools/reader/edn.cljs"],[1535586405375,"^1<","^1;","~$cljs.tools.reader.impl.errors","^2P","~$cljs.tools.reader.impl.utils","~$cljs.tools.reader.impl.commons","~$cljs.tools.reader","^26","^2Y"],["^1M","goog/structs/priorityqueue.js"],[1530991559994,"^1<","~$goog.structs.Heap"],["^1M","goog/net/xhrio.js"],[1530991559994,"^1<","~$goog.Timer","^2A","^2B","^39","^2>","~$goog.json.hybrid","~$goog.log","^34","^33","~$goog.net.HttpStatus","~$goog.net.XmlHttp","^26","^32","~$goog.structs.Map","~$goog.uri.utils","^2C"],["^1M","goog/promise/thenable.js"],[1530991559994,"^1<"],["^1M","promesa/impl.cljc"],[1535586406328,"^1<","^1;","^38","~$org.bluebird"],["^1M","goog/dom/nodetype.js"],[1530991559994,"^1<"],["^27","^H"],[1535586406000],["^1M","cljs/tools/reader/impl/inspect.cljs"],[1535586405375,"^1<","^1;"],["^1M","cljs/pprint.cljs"],[1534380137690,"^1<","^1;","^2?","^26","^2Y"],["^27","~$cljs.spec.gen.alpha"],[1534380137000],["^1M","cljs/tools/reader.cljs"],[1535586405375,"^1<","^1;","^2P","^3?","^3@","^3>","^2A","^26","^2Y"],["^1M","goog/net/wrapperxmlhttpfactory.js"],[1530991559994,"^1<","~$goog.net.XhrLike","~$goog.net.XmlHttpFactory"],["^1M","goog/events/eventtarget.js"],[1530991559994,"^1<","~$goog.Disposable","^2B","^2Z","~$goog.events.Event","^3<","^3=","^2D"],["^1M","goog/disposable/disposable.js"],[1530991559994,"^1<","~$goog.disposable.IDisposable"],["^1M","goog/object/object.js"],[1530991559994,"^1<"],["^1M","goog/structs/set.js"],[1530991559994,"^1<","^32","~$goog.structs.Collection","^3H"],"~:SHADOW-TIMESTAMP",[1540077702000,1534380137000],["^1M","goog/math/long.js"],[1530991559994,"^1<","^2B","^2M"],["^1M","goog/events/listener.js"],[1530991559994,"^1<","~$goog.events.ListenableKey"],["^1M","cljs/core/async/impl/channels.cljs"],[1534380136417,"^1<","^1;","^24","^2;","^29"],["^1M","goog/events/listenermap.js"],[1530991559994,"^1<","^2A","~$goog.events.Listener","^2D"],["^1M","goog/events/eventid.js"],[1530991559994,"^1<"],["^1M","taoensso/truss.cljs"],[1535586406478,"^1<","^1;","~$taoensso.truss.impl"],["^1M","shadow/test/env.cljs"],[1540077702615,"^1<","^1;"],["^1M","goog/functions/functions.js"],[1530991559994,"^1<"],["^1M","cljs/core/async/impl/dispatch.cljs"],[1534380136417,"^1<","^1;","^29","^2R"],["^1M","taoensso/truss/impl.cljs"],[1535586406478,"^1<","^1;","^2T"],["^1M","clojure/walk.cljs"],[1534380137690,"^1<","^1;"],["^1M","cljs/core/async/impl/protocols.cljs"],[1534380136417,"^1<","^1;"],["^1M","goog/net/eventtype.js"],[1530991559994,"^1<"],["^1M","goog/structs/map.js"],[1530991559994,"^1<","~$goog.iter.Iterator","~$goog.iter.StopIteration","^2D"],["^1M","goog/net/xhriopool.js"],[1530991559994,"^1<","^2[","~$goog.structs.PriorityPool"],["^1M","goog/structs/queue.js"],[1530991559994,"^1<","^2A"],["^1M","goog/labs/useragent/engine.js"],[1530991559994,"^1<","^2A","^25","^26"],["^1M","taoensso/timbre/appenders/core.cljs"],[1535586406375,"^1<","^1;","^2?","~$taoensso.encore"],["^1M","cljs/reader.cljs"],[1534380137690,"^1<","^1;","^2D","^3A","^2V","^2Y"],["^23","bluebird"],["~$shadow.js.shim.module$bluebird","shadow.js.shim.module$bluebird.js","^1<"],["^27","~$cljs-node-io.macros"],[1537666007000],["^27","^2G"],[1534380137000],["^1M","goog/asserts/asserts.js"],[1530991559994,"^1<","~$goog.debug.Error","~$goog.dom.NodeType","^26"],["^1M","cljs/core/async/impl/buffers.cljs"],[1534380136417,"^1<","^1;","^24"],["^27","~$cljs.pprint"],[1534380137000],["^1M","goog/debug/logbuffer.js"],[1530991559994,"^1<","^2B","~$goog.debug.LogRecord"],["^23","jsonwebtoken"],["^=","shadow.js.shim.module$jsonwebtoken.js","^1<"],["^27","^3Y"],[1535586406000],["^1M","goog/uri/uri.js"],[1530991559994,"^1<","^2A","^2B","^26","^32","^3H","^3I","~$goog.uri.utils.ComponentIndex","~$goog.uri.utils.StandardQueryParam"],["^1M","goog/net/errorcode.js"],[1530991559994,"^1<"],["^27","^2W"],[1534380137000],["^27","^C"],[1534380136000],["^1M","goog/disposable/idisposable.js"],[1530991559994,"^1<"],["^1M","goog/promise/promise.js"],[1530991559994,"^1<","~$goog.Thenable","^2B","^36","~$goog.async.run","^2S","^40","~$goog.promise.Resolver"],["^1M","cljs/core/async/impl/timers.cljs"],[1534380136417,"^1<","^1;","^24","^28","^2;"],["^1M","cljs/spec/alpha.cljs"],[1534380137690,"^1<","^1;","^2D","~$clojure.walk","^3K","^2?"],["^1M","goog/debug/logrecord.js"],[1530991559994,"^1<"],["^1M","goog/base.js"],[1530991559994],["^1M","promesa/core.cljc"],[1535586406328,"^1<","^1;","^38","~$promesa.impl","~$promesa.impl.scheduler"],["^1M","goog/json/hybrid.js"],[1530991559994,"^1<","^2B","~$goog.json"],["^1M","goog/structs/structs.js"],[1530991559994,"^1<","^2A","^2D"],["^1M","cljs/tools/reader/impl/errors.cljs"],[1535586405375,"^1<","^1;","^2P","^2?","~$cljs.tools.reader.impl.inspect"],["^1M","org/bluebird.cljs"],[1535669979047,"^1<","^1;","^3Z"],["^1M","clojure/string.cljs"],[1534380137690,"^1<","^1;","^26","^2Y"],["^1M","goog/structs/pool.js"],[1530991559994,"^1<","^3N","~$goog.structs.Queue","~$goog.structs.Set"],["^1M","goog/net/httpstatus.js"],[1530991559994,"^1<"],["^1M","goog/structs/heap.js"],[1530991559994,"^1<","^2A","^2D","~$goog.structs.Node"],["^1M","goog/debug/entrypointregistry.js"],[1530991559994,"^1<","^2B"],["^1M","goog/string/string.js"],[1530991559994,"^1<"],["^1M","goog/reflect/reflect.js"],[1530991559994,"^1<"],["^1M","goog/labs/useragent/util.js"],[1530991559994,"^1<","^26"],["^27","~$clojure.template"],[1534380136000],["^27","~$cljs.core.async.impl.ioc-macros"],[1534380136000],["^1M","goog/debug/debug.js"],[1530991559994,"^1<","^2A","~$goog.debug.errorcontext","^2C"],["^1M","goog/string/stringbuffer.js"],[1530991559994,"^1<"],["^1M","goog/debug/errorcontext.js"],[1530991559994,"^1<"],["^1M","cljs/tools/reader/reader_types.cljs"],[1535586405375,"^1<","^1;","^3?","^26","^2Y"],["^1M","promesa/protocols.cljc"],[1535586406328,"^1<","^1;"],["^1M","goog/iter/iter.js"],[1530991559994,"^1<","^2A","^2B","~$goog.functions","~$goog.math"],["^1M","goog/async/nexttick.js"],[1530991559994,"^1<","^39","~$goog.dom.TagName","^4D","^2J","^2K"],["^1M","goog/debug/logger.js"],[1530991559994,"^1<","^2A","^2B","~$goog.debug","~$goog.debug.LogBuffer","^43"],["^1M","goog/events/event.js"],[1530991559994,"^1<","^3N","~$goog.events.EventId"],["^1M","cljs/tools/reader/impl/commons.cljs"],[1535586405375,"^1<","^1;","^3>","^2P","^3?"],["^23","systeminformation"],["^A","shadow.js.shim.module$systeminformation.js","^1<"],["^1M","goog/dom/htmlelement.js"],[1530991559994,"^1<"],["^1M","cljs/core.cljs"],[1534380137690,"~$goog.math.Long","~$goog.math.Integer","^26","^2D","^2A","^1Z","^2Y"],["^1M","goog/log/log.js"],[1530991559994,"^1<","^4G","~$goog.debug.LogManager","^43","~$goog.debug.Logger"],["^1M","goog/structs/collection.js"],[1530991559994,"^1<"],["^1M","goog/events/browserevent.js"],[1530991559994,"^1<","^3;","^3O","~$goog.events.EventType","^2M","^2C"],["^1M","goog/math/integer.js"],[1530991559994,"^1<"],["^1M","goog/structs/node.js"],[1530991559994,"^1<"],["^27","^3U"],[1535586406000],["^1M","clojure/set.cljs"],[1534380137690,"^1<","^1;"],["^1M","goog/uri/utils.js"],[1530991559994,"^1<","^2A","^2B","^26"],["^1M","taoensso/timbre.cljs"],[1535586406375,"^1<","^1;","^2?","^3Y","~$taoensso.timbre.appenders.core"],["^1M","goog/json/json.js"],[1530991559994,"^1<"],["^1M","goog/events/listenable.js"],[1530991559994,"^1<","^4I"],["^1M","goog/net/xmlhttpfactory.js"],[1530991559994,"^1<","^3L"],["^1M","goog/net/xmlhttp.js"],[1530991559994,"^1<","^2B","~$goog.net.WrapperXmlHttpFactory","^3M"],["^1M","cljs/test.cljs"],[1534380137690,"~$shadow.test.env","^1<","^1;","^2?","^42"],["^1M","goog/net/xhrlike.js"],[1530991559994,"^1<"],["^27","^2U"],[1534380137000]]],"~:analyzer",["^ ","^3",null,"^4",["^ "],"^5",["^ ","^6","huginn/sensors.cljs","^7",1,"^8",5,"^9",1,"^:",19],"^;",["^ ","^<","^=","^>","^?","^@","^A","^B","^C","^D","^E"],"^F",["^ ","^G","^H","^I","^H","^J","^H","^K","^H","^L","^H","^M","^H","^N","^H","^O","^H","^P","^H","^Q","^H","^R","^H","^S","^H","^T","^H","^U","^H","^V","^H","^W","^H","^X","^H","^Y","^H"],"^Z",["^[",[]],"~:shadow/js-access-properties",["^[",["read"]],"^10","^11","^12",["^ ","^13","^14"],"^17",null,"^18",["^ ","^14","^14","~$p","^19","^19","^19","^1:","^H","~$a","^C","^1;","^1;","^1<","^1<","^C","^C","^B","^C","~$s","^14","^1=","^1=","^H","^H"],"^1>",["^[",["^1?"]],"~:shadow/js-access-global",["^[",["Object","Error"]],"^1@",["^ ","^1A","^1="],"~:defs",["^ ","~$build-sensor-packet",["^ ","~:protocol-inline",null,"^5",["^ ","^6","huginn/sensors.cljs","^7",13,"^8",7,"^9",13,"^:",26,"~:arglists",["^1D",["~$quote",["^1D",[["~$sensor-name","~$sensor-reading"]]]]]],"^10","~$huginn.sensors/build-sensor-packet","~:variadic",false,"^6","huginn/sensors.cljs","^:",26,"~:method-params",["^1D",[["^4Z","^4["]]],"~:protocol-impl",null,"~:arglists-meta",["^1D",[null,null]],"^8",1,"^7",13,"^9",13,"~:max-fixed-arity",2,"~:fn-var",true,"^4X",["^1D",["^4Y",["^1D",[["^4Z","^4["]]]]]],"~$publish-sensor-reading",["^ ","^4W",null,"^5",["^ ","^6","huginn/sensors.cljs","^7",18,"^8",7,"^9",18,"^:",29,"^4X",["^1D",["^4Y",["^1D",[["~$opts","~$out-chan","~$err","~$temp","~$humidity"]]]]]],"^10","~$huginn.sensors/publish-sensor-reading","^51",false,"^6","huginn/sensors.cljs","^:",29,"^52",["^1D",[["^58","^59","^5:","^5;","^5<"]]],"^53",null,"^54",["^1D",[null,null]],"^8",1,"^7",18,"^9",18,"^55",5,"^56",true,"^4X",["^1D",["^4Y",["^1D",[["^58","^59","^5:","^5;","^5<"]]]]]],"~$sensor-chan",["^ ","^4W",null,"^5",["^ ","^6","huginn/sensors.cljs","^7",30,"^8",7,"^9",30,"^:",18,"^4X",["^1D",["^4Y",["^1D",[["^58","~$gpio-channel"]]]]],"~:doc","this creates a channel with sensor readings from a given gpio channel\n  Use\n  Please note that there are two different and confusing ways to reference a channel; either using the Raspberry Pi or the BCM/SoC naming schema (sadly, neither of which match the physical pins!). This module supports both schemas, with Raspberry Pi being the default. Please see this page for more details.\n\n  taken from rpi-gpio readem "],"^10","~$huginn.sensors/sensor-chan","^51",false,"^6","huginn/sensors.cljs","^:",18,"^52",["^1D",[["^58","^5?"]]],"^53",null,"^54",["^1D",[null,null]],"^8",1,"^7",30,"^9",30,"^55",2,"^56",true,"^4X",["^1D",["^4Y",["^1D",[["^58","^5?"]]]]],"^5@","this creates a channel with sensor readings from a given gpio channel\n  Use\n  Please note that there are two different and confusing ways to reference a channel; either using the Raspberry Pi or the BCM/SoC naming schema (sadly, neither of which match the physical pins!). This module supports both schemas, with Raspberry Pi being the default. Please see this page for more details.\n\n  taken from rpi-gpio readem "],"~$cleanup-sensor",["^ ","^4W",null,"^5",["^ ","^6","huginn/sensors.cljs","^7",48,"^8",7,"^9",48,"^:",21,"^4X",["^1D",["^4Y",["^1D",[[["^ ","~:keys",["^5>"],"^1F","~$system"]]]]]]],"^10","~$huginn.sensors/cleanup-sensor","^51",false,"^6","huginn/sensors.cljs","^:",21,"^52",["^1D",[["~$p__41231"]]],"^53",null,"^54",["^1D",[null,null]],"^8",1,"^7",48,"^9",48,"^55",1,"^56",true,"^4X",["^1D",["^4Y",["^1D",[[["^ ","^5C",["^5>"],"^1F","^5D"]]]]]]],"~$-start-mix-sensor",["^ ","^4W",null,"^5",["^ ","^6","huginn/sensors.cljs","^7",55,"^8",7,"^9",55,"^:",24,"^4X",["^1D",["^4Y",["^1D",[["^58","~$sensor-gpio",["^ ","^5C",["~$telemetry-chan","~$mixer"],"^1F","^5D"]]]]]]],"^10","~$huginn.sensors/-start-mix-sensor","^51",false,"^6","huginn/sensors.cljs","^:",24,"^52",["^1D",[["^58","^5H","~$p__41234"]]],"^53",null,"^54",["^1D",[null,null]],"^8",1,"^7",55,"^9",55,"^55",3,"^56",true,"^4X",["^1D",["^4Y",["^1D",[["^58","^5H",["^ ","^5C",["^5I","^5J"],"^1F","^5D"]]]]]]],"~$start-mix-sensor",["^ ","^4W",null,"^5",["^ ","^6","huginn/sensors.cljs","^7",64,"^8",7,"^9",64,"^:",23,"^4X",["^1D",["^4Y",["^1D",[["~$system-promise","^58","^5H"]]]]]],"^10","~$huginn.sensors/start-mix-sensor","^51",false,"^6","huginn/sensors.cljs","^:",23,"^52",["^1D",[["^5N","^58","^5H"]]],"^53",null,"^54",["^1D",[null,null]],"^8",1,"^7",64,"^9",64,"^55",3,"^56",true,"^4X",["^1D",["^4Y",["^1D",[["^5N","^58","^5H"]]]]]]],"^1B",["^ ","^H","^H","^1:","^H","^1;","^1;","~$a","^C","^C","^C","^B","^C"],"~:cljs.analyzer/constants",["^ ","^1>",["^[",["~:dht11Delay","^4[","^5J","~:payload","~:else","^4Z","~:subfolder","~:telemetry-chan","~$s-chan","~$->","^5D","~:sensor-chan","~:recur","~:debug","~:info","~:error","~$str","~:auto","~$assoc","~:p","~:mixer"]],"~:order",["^60","~:p","^62","^5S","^5R","^5T","^5Z","^4[","^61","^4Z","^5[","^5Y","^5Q","^5X","^5U","^64","^5W","^5D","^63","^5J","^5V"]],"^1I",["^ ","^1?",["^[",[]]],"^1J",["^ ","^13",["^ ","^1F","~$s"]],"^1K",["^1<","^1;","^19","^H","^1=","^C","^14"]],"^16","^11","~:ns-specs",["^ "],"~:ns-speced-vars",[],"~:compiler-options",["^1Y",[["^68","~:static-fns"],true,["^68","~:elide-asserts"],false,["^68","~:optimize-constants"],null,["^68","~:external-config"],null,["^68","~:tooling-config"],null,["^68","~:emit-constants"],null,["^68","~:infer-externs"],true,["^68","^1R"],null,["~:js-options","~:js-provider"],"^1?",["~:mode"],"~:dev",["^68","~:fn-invoke-direct"],null,["^68","~:source-map"],"/dev/null"]]]