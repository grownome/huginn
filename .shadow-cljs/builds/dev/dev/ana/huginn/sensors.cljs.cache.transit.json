["^ ","~:output",["^ ","~:js","goog.provide('huginn.sensors');\ngoog.require('cljs.core');\ngoog.require('promesa.core');\ngoog.require('taoensso.timbre');\ngoog.require('huginn.mqtt');\ngoog.require('cljs.core.async');\ngoog.require('shadow.js.shim.module$node_dht_sensor');\nhuginn.sensors.build_sensor_packet = (function huginn$sensors$build_sensor_packet(sensor_name,sensor_reading){\ntry{var result__26768__auto__ = new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\"payload\",\"payload\",-383036092),sensor_reading,new cljs.core.Keyword(null,\"subfolder\",\"subfolder\",1044158439),[\"metrics/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(sensor_name)].join('')], null)], null);\ntaoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"debug\",\"debug\",-1608172596),\"huginn.sensors\",\"*cider-repl src/huginn:localhost:46665(clj)*\",15,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay(((function (result__26768__auto__){\nreturn (function (){\nreturn new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\"payload\",\"payload\",-383036092),new cljs.core.Symbol(null,\"sensor-reading\",\"sensor-reading\",1514517376,null),new cljs.core.Keyword(null,\"subfolder\",\"subfolder\",1044158439),cljs.core.list(new cljs.core.Symbol(null,\"str\",\"str\",-1564826950,null),\"metrics/\",new cljs.core.Symbol(null,\"sensor-name\",\"sensor-name\",-817206841,null))], null)], null),\"=>\",result__26768__auto__], null);\n});})(result__26768__auto__))\n,null)),null,-1187675839);\n\nreturn result__26768__auto__;\n}catch (e42586){if((e42586 instanceof Error)){\nvar e__26704__auto__ = e42586;\ntaoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"error\",\"error\",-978969032),\"huginn.sensors\",\"*cider-repl src/huginn:localhost:46665(clj)*\",15,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay(((function (e__26704__auto__){\nreturn (function (){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [e__26704__auto__], null);\n});})(e__26704__auto__))\n,null)),null,-504389024);\n\nthrow e__26704__auto__;\n} else {\nthrow e42586;\n\n}\n}});\nhuginn.sensors.publish_sensor_reading = (function huginn$sensors$publish_sensor_reading(opts,out_chan,err,temp,humidity){\nif(cljs.core.truth_(err)){\nreturn taoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"info\",\"info\",-317069002),\"huginn.sensors\",\"*cider-repl src/huginn:localhost:46665(clj)*\",21,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay((function (){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [err], null);\n}),null)),null,214787469);\n} else {\nvar c__23855__auto__ = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run(((function (c__23855__auto__){\nreturn (function (){\nvar f__23856__auto__ = (function (){var switch__23690__auto__ = ((function (c__23855__auto__){\nreturn (function (state_42605){\nvar state_val_42606 = (state_42605[(1)]);\nif((state_val_42606 === (1))){\nvar inst_42587 = cljs.core.PersistentVector.EMPTY_NODE;\nvar inst_42588 = [new cljs.core.Keyword(null,\"payload\",\"payload\",-383036092),new cljs.core.Keyword(null,\"subfolder\",\"subfolder\",1044158439)];\nvar inst_42589 = huginn.mqtt.payload_root(opts);\nvar inst_42590 = [cljs.core.str.cljs$core$IFn$_invoke$arity$1(temp)].join('');\nvar inst_42591 = [cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_42589),\"-room-temp/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_42590)].join('');\nvar inst_42592 = [inst_42591,\"metrics/temperature\"];\nvar inst_42593 = cljs.core.PersistentHashMap.fromArrays(inst_42588,inst_42592);\nvar inst_42594 = [new cljs.core.Keyword(null,\"payload\",\"payload\",-383036092),new cljs.core.Keyword(null,\"subfolder\",\"subfolder\",1044158439)];\nvar inst_42595 = huginn.mqtt.payload_root(opts);\nvar inst_42596 = [cljs.core.str.cljs$core$IFn$_invoke$arity$1(humidity)].join('');\nvar inst_42597 = [cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_42595),\"-room-humidity/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_42596)].join('');\nvar inst_42598 = [inst_42597,\"metrics/humidity\"];\nvar inst_42599 = cljs.core.PersistentHashMap.fromArrays(inst_42594,inst_42598);\nvar inst_42600 = [inst_42593,inst_42599];\nvar inst_42601 = (new cljs.core.PersistentVector(null,2,(5),inst_42587,inst_42600,null));\nvar state_42605__$1 = state_42605;\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_42605__$1,(2),out_chan,inst_42601);\n} else {\nif((state_val_42606 === (2))){\nvar inst_42603 = (state_42605[(2)]);\nvar state_42605__$1 = state_42605;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_42605__$1,inst_42603);\n} else {\nreturn null;\n}\n}\n});})(c__23855__auto__))\n;\nreturn ((function (switch__23690__auto__,c__23855__auto__){\nreturn (function() {\nvar huginn$sensors$publish_sensor_reading_$_state_machine__23691__auto__ = null;\nvar huginn$sensors$publish_sensor_reading_$_state_machine__23691__auto____0 = (function (){\nvar statearr_42621 = [null,null,null,null,null,null,null];\n(statearr_42621[(0)] = huginn$sensors$publish_sensor_reading_$_state_machine__23691__auto__);\n\n(statearr_42621[(1)] = (1));\n\nreturn statearr_42621;\n});\nvar huginn$sensors$publish_sensor_reading_$_state_machine__23691__auto____1 = (function (state_42605){\nwhile(true){\nvar ret_value__23692__auto__ = (function (){try{while(true){\nvar result__23693__auto__ = switch__23690__auto__(state_42605);\nif(cljs.core.keyword_identical_QMARK_(result__23693__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\ncontinue;\n} else {\nreturn result__23693__auto__;\n}\nbreak;\n}\n}catch (e42622){if((e42622 instanceof Object)){\nvar ex__23694__auto__ = e42622;\nvar statearr_42623_42660 = state_42605;\n(statearr_42623_42660[(5)] = ex__23694__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_42605);\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nthrow e42622;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__23692__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\nvar G__42661 = state_42605;\nstate_42605 = G__42661;\ncontinue;\n} else {\nreturn ret_value__23692__auto__;\n}\nbreak;\n}\n});\nhuginn$sensors$publish_sensor_reading_$_state_machine__23691__auto__ = function(state_42605){\nswitch(arguments.length){\ncase 0:\nreturn huginn$sensors$publish_sensor_reading_$_state_machine__23691__auto____0.call(this);\ncase 1:\nreturn huginn$sensors$publish_sensor_reading_$_state_machine__23691__auto____1.call(this,state_42605);\n}\nthrow(new Error('Invalid arity: ' + arguments.length));\n};\nhuginn$sensors$publish_sensor_reading_$_state_machine__23691__auto__.cljs$core$IFn$_invoke$arity$0 = huginn$sensors$publish_sensor_reading_$_state_machine__23691__auto____0;\nhuginn$sensors$publish_sensor_reading_$_state_machine__23691__auto__.cljs$core$IFn$_invoke$arity$1 = huginn$sensors$publish_sensor_reading_$_state_machine__23691__auto____1;\nreturn huginn$sensors$publish_sensor_reading_$_state_machine__23691__auto__;\n})()\n;})(switch__23690__auto__,c__23855__auto__))\n})();\nvar state__23857__auto__ = (function (){var statearr_42624 = (f__23856__auto__.cljs$core$IFn$_invoke$arity$0 ? f__23856__auto__.cljs$core$IFn$_invoke$arity$0() : f__23856__auto__.call(null));\n(statearr_42624[(6)] = c__23855__auto__);\n\nreturn statearr_42624;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__23857__auto__);\n});})(c__23855__auto__))\n);\n\nreturn c__23855__auto__;\n}\n});\n/**\n * this creates a channel with sensor readings from a given gpio channel\n *   Use\n *   Please note that there are two different and confusing ways to reference a channel; either using the Raspberry Pi or the BCM/SoC naming schema (sadly, neither of which match the physical pins!). This module supports both schemas, with Raspberry Pi being the default. Please see this page for more details.\n * \n *   taken from rpi-gpio readem \n */\nhuginn.sensors.sensor_chan = (function huginn$sensors$sensor_chan(opts,gpio_channel){\nvar out_chan = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$0();\ntaoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"info\",\"info\",-317069002),\"huginn.sensors\",\"*cider-repl src/huginn:localhost:46665(clj)*\",38,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay(((function (out_chan){\nreturn (function (){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [gpio_channel], null);\n});})(out_chan))\n,null)),null,1574106839);\n\nvar G__42625_42662 = (22);\nvar G__42626_42663 = gpio_channel;\nvar G__42627_42664 = cljs.core.partial.cljs$core$IFn$_invoke$arity$3(huginn.sensors.publish_sensor_reading,opts,out_chan);\nshadow.js.shim.module$node_dht_sensor.read(G__42625_42662,G__42626_42663,G__42627_42664);\n\nvar c__23855__auto___42665 = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run(((function (c__23855__auto___42665,out_chan){\nreturn (function (){\nvar f__23856__auto__ = (function (){var switch__23690__auto__ = ((function (c__23855__auto___42665,out_chan){\nreturn (function (state_42639){\nvar state_val_42640 = (state_42639[(1)]);\nif((state_val_42640 === (1))){\nvar state_42639__$1 = state_42639;\nvar statearr_42641_42666 = state_42639__$1;\n(statearr_42641_42666[(2)] = null);\n\n(statearr_42641_42666[(1)] = (2));\n\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nif((state_val_42640 === (2))){\nvar inst_42629 = new cljs.core.Keyword(null,\"dht11Delay\",\"dht11Delay\",-1809446912).cljs$core$IFn$_invoke$arity$1(opts);\nvar inst_42630 = cljs.core.async.timeout(inst_42629);\nvar state_42639__$1 = state_42639;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_42639__$1,(4),inst_42630);\n} else {\nif((state_val_42640 === (3))){\nvar inst_42637 = (state_42639[(2)]);\nvar state_42639__$1 = state_42639;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_42639__$1,inst_42637);\n} else {\nif((state_val_42640 === (4))){\nvar inst_42632 = (state_42639[(2)]);\nvar inst_42633 = cljs.core.partial.cljs$core$IFn$_invoke$arity$3(huginn.sensors.publish_sensor_reading,opts,out_chan);\nvar inst_42634 = shadow.js.shim.module$node_dht_sensor.read((22),gpio_channel,inst_42633);\nvar state_42639__$1 = (function (){var statearr_42642 = state_42639;\n(statearr_42642[(7)] = inst_42634);\n\n(statearr_42642[(8)] = inst_42632);\n\nreturn statearr_42642;\n})();\nvar statearr_42643_42668 = state_42639__$1;\n(statearr_42643_42668[(2)] = null);\n\n(statearr_42643_42668[(1)] = (2));\n\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nreturn null;\n}\n}\n}\n}\n});})(c__23855__auto___42665,out_chan))\n;\nreturn ((function (switch__23690__auto__,c__23855__auto___42665,out_chan){\nreturn (function() {\nvar huginn$sensors$sensor_chan_$_state_machine__23691__auto__ = null;\nvar huginn$sensors$sensor_chan_$_state_machine__23691__auto____0 = (function (){\nvar statearr_42644 = [null,null,null,null,null,null,null,null,null];\n(statearr_42644[(0)] = huginn$sensors$sensor_chan_$_state_machine__23691__auto__);\n\n(statearr_42644[(1)] = (1));\n\nreturn statearr_42644;\n});\nvar huginn$sensors$sensor_chan_$_state_machine__23691__auto____1 = (function (state_42639){\nwhile(true){\nvar ret_value__23692__auto__ = (function (){try{while(true){\nvar result__23693__auto__ = switch__23690__auto__(state_42639);\nif(cljs.core.keyword_identical_QMARK_(result__23693__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\ncontinue;\n} else {\nreturn result__23693__auto__;\n}\nbreak;\n}\n}catch (e42645){if((e42645 instanceof Object)){\nvar ex__23694__auto__ = e42645;\nvar statearr_42646_42671 = state_42639;\n(statearr_42646_42671[(5)] = ex__23694__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_42639);\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nthrow e42645;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__23692__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\nvar G__42672 = state_42639;\nstate_42639 = G__42672;\ncontinue;\n} else {\nreturn ret_value__23692__auto__;\n}\nbreak;\n}\n});\nhuginn$sensors$sensor_chan_$_state_machine__23691__auto__ = function(state_42639){\nswitch(arguments.length){\ncase 0:\nreturn huginn$sensors$sensor_chan_$_state_machine__23691__auto____0.call(this);\ncase 1:\nreturn huginn$sensors$sensor_chan_$_state_machine__23691__auto____1.call(this,state_42639);\n}\nthrow(new Error('Invalid arity: ' + arguments.length));\n};\nhuginn$sensors$sensor_chan_$_state_machine__23691__auto__.cljs$core$IFn$_invoke$arity$0 = huginn$sensors$sensor_chan_$_state_machine__23691__auto____0;\nhuginn$sensors$sensor_chan_$_state_machine__23691__auto__.cljs$core$IFn$_invoke$arity$1 = huginn$sensors$sensor_chan_$_state_machine__23691__auto____1;\nreturn huginn$sensors$sensor_chan_$_state_machine__23691__auto__;\n})()\n;})(switch__23690__auto__,c__23855__auto___42665,out_chan))\n})();\nvar state__23857__auto__ = (function (){var statearr_42647 = (f__23856__auto__.cljs$core$IFn$_invoke$arity$0 ? f__23856__auto__.cljs$core$IFn$_invoke$arity$0() : f__23856__auto__.call(null));\n(statearr_42647[(6)] = c__23855__auto___42665);\n\nreturn statearr_42647;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__23857__auto__);\n});})(c__23855__auto___42665,out_chan))\n);\n\n\nreturn out_chan;\n});\nhuginn.sensors.cleanup_sensor = (function huginn$sensors$cleanup_sensor(p__42648){\nvar map__42649 = p__42648;\nvar map__42649__$1 = ((((!((map__42649 == null)))?(((((map__42649.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__42649.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__42649):map__42649);\nvar system = map__42649__$1;\nvar sensor_chan = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__42649__$1,new cljs.core.Keyword(null,\"sensor-chan\",\"sensor-chan\",-1323578869));\ncljs.core.async.close_BANG_(sensor_chan);\n\nreturn cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(system,new cljs.core.Keyword(null,\"sensor-chan\",\"sensor-chan\",-1323578869));\n});\nhuginn.sensors._start_mix_sensor = (function huginn$sensors$_start_mix_sensor(opts,sensor_gpio,p__42651){\nvar map__42652 = p__42651;\nvar map__42652__$1 = ((((!((map__42652 == null)))?(((((map__42652.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__42652.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__42652):map__42652);\nvar system = map__42652__$1;\nvar telemetry_chan = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__42652__$1,new cljs.core.Keyword(null,\"telemetry-chan\",\"telemetry-chan\",-1991836503));\nvar mixer = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__42652__$1,new cljs.core.Keyword(null,\"mixer\",\"mixer\",-120313315));\nvar s_chan = huginn.sensors.sensor_chan(opts,sensor_gpio);\ntaoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"info\",\"info\",-317069002),\"huginn.sensors\",\"*cider-repl src/huginn:localhost:46665(clj)*\",58,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay(((function (s_chan,map__42652,map__42652__$1,system,telemetry_chan,mixer){\nreturn (function (){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [\"connecting sensor to mixer\"], null);\n});})(s_chan,map__42652,map__42652__$1,system,telemetry_chan,mixer))\n,null)),null,-1521052695);\n\ncljs.core.async.admix(mixer,s_chan);\n\ntry{var result__26768__auto__ = cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(system,new cljs.core.Keyword(null,\"mixer\",\"mixer\",-120313315),mixer),new cljs.core.Keyword(null,\"sensor-chan\",\"sensor-chan\",-1323578869),s_chan);\ntaoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"debug\",\"debug\",-1608172596),\"huginn.sensors\",\"*cider-repl src/huginn:localhost:46665(clj)*\",60,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay(((function (result__26768__auto__,s_chan,map__42652,map__42652__$1,system,telemetry_chan,mixer){\nreturn (function (){\nreturn new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(new cljs.core.Symbol(null,\"->\",\"->\",-2139605430,null),new cljs.core.Symbol(null,\"system\",\"system\",1611149803,null),cljs.core.list(new cljs.core.Symbol(null,\"assoc\",\"assoc\",2071440380,null),new cljs.core.Keyword(null,\"mixer\",\"mixer\",-120313315),new cljs.core.Symbol(null,\"mixer\",\"mixer\",1520218212,null)),cljs.core.list(new cljs.core.Symbol(null,\"assoc\",\"assoc\",2071440380,null),new cljs.core.Keyword(null,\"sensor-chan\",\"sensor-chan\",-1323578869),new cljs.core.Symbol(null,\"s-chan\",\"s-chan\",-1902503670,null))),\"=>\",result__26768__auto__], null);\n});})(result__26768__auto__,s_chan,map__42652,map__42652__$1,system,telemetry_chan,mixer))\n,null)),null,-150945094);\n\nreturn result__26768__auto__;\n}catch (e42655){if((e42655 instanceof Error)){\nvar e__26704__auto__ = e42655;\ntaoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"error\",\"error\",-978969032),\"huginn.sensors\",\"*cider-repl src/huginn:localhost:46665(clj)*\",60,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay(((function (e__26704__auto__,s_chan,map__42652,map__42652__$1,system,telemetry_chan,mixer){\nreturn (function (){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [e__26704__auto__], null);\n});})(e__26704__auto__,s_chan,map__42652,map__42652__$1,system,telemetry_chan,mixer))\n,null)),null,-1367583053);\n\nthrow e__26704__auto__;\n} else {\nthrow e42655;\n\n}\n}});\nhuginn.sensors.start_mix_sensor = (function huginn$sensors$start_mix_sensor(system_promise,opts,sensor_gpio){\nreturn promesa.core.then(system_promise,cljs.core.partial.cljs$core$IFn$_invoke$arity$3(huginn.sensors._start_mix_sensor,opts,sensor_gpio));\n});\n","~:ns-info",["^ ","~:rename-macros",null,"~:renames",["^ "],"~:meta",["^ ","~:file","huginn/sensors.cljs","~:line",1,"~:column",5,"~:end-line",1,"~:end-column",19],"~:ns-aliases",["^ ","~$jsonwebtoken","~$shadow.js.shim.module$jsonwebtoken","~$systeminformation","~$shadow.js.shim.module$systeminformation","~$clojure.core.async","~$cljs.core.async","~$raspicam","~$shadow.js.shim.module$raspicam"],"~:use-macros",["^ ","~$get-env","~$taoensso.timbre","~$log","^F","~$logf","^F","~$reportf","^F","~$fatalf","^F","~$warnf","^F","~$report","^F","~$spy","^F","~$warn","^F","~$trace","^F","~$debug","^F","~$debugf","^F","~$tracef","^F","~$infof","^F","~$fatal","^F","~$errorf","^F","~$info","^F","~$error","^F"],"~:excludes",["~#set",[]],"~:name","~$huginn.sensors","~:js-aliases",["^ ","node-dht-sensor","~$shadow.js.shim.module$node_dht_sensor"],"~:op","~:ns","~:imports",null,"~:requires",["^ ","^12","^12","~$p","~$promesa.core","^17","^17","~$timbre","^F","~$a","^A","~$cljs.core","^19","~$goog","^1:","^A","^A","^@","^A","~$s","^12","~$huginn.mqtt","^1;","^F","^F"],"~:seen",["^Y",["~:require"]],"~:uses",["^ ","~$payload-root","^1;"],"~:require-macros",["^ ","^F","^F","^18","^F","^19","^19","~$a","^A","^A","^A","^@","^A"],"~:form",["~#list",["~$ns","^[",["^1B",["^1=",["^17","~:as","~$p"],["^F","^1D","^18","~:refer-macros",["^G","^O","^P","^V","^N","^W","^T","^L","^H","^R","^Q","^S","^K","^U","^J","^I","^M","^E"]],["^1;","~:refer",["^1?"]],["^@","^1D","~$a"],["node-dht-sensor","^1D","~$s"]]]]],"~:flags",["^ ","^1=",["^Y",[]]],"~:js-deps",["^ ","^11",["^ ","^1D","~$s"]],"~:deps",["^1:","^19","^17","^F","^1;","^A","^12"]],"^14","^[","~:resource-id",["~:shadow.build.classpath/resource","huginn/sensors.cljs"],"~:compiled-at",1540153693409,"~:resource-name","huginn/sensors.cljs","~:warnings",[],"~:source","(ns huginn.sensors\n  (:require\n   [promesa.core :as p]\n   [taoensso.timbre :as timbre\n    :refer-macros [log  trace  debug  info  warn  error  fatal  report\n                   logf tracef debugf infof warnf errorf fatalf reportf\n                   spy get-env]]\n   [huginn.mqtt :refer [payload-root]]\n   [clojure.core.async :as a]\n   [\"node-dht-sensor\" :as s]))\n\n\n(defn build-sensor-packet\n  [sensor-name  sensor-reading]\n  (spy  [{:payload sensor-reading\n          :subfolder (str \"metrics/\" sensor-name)}]))\n\n(defn publish-sensor-reading\n  [opts out-chan err temp humidity]\n  (if err\n    (do (info err))\n    (a/go\n      (a/>! out-chan\n            [{:payload (str (payload-root opts) \"-room-temp/\" (str temp))\n              :subfolder \"metrics/temperature\"}\n             {:payload (str\n                        (payload-root opts) \"-room-humidity/\" (str humidity))\n              :subfolder \"metrics/humidity\"}]))))\n\n(defn sensor-chan\n  \"this creates a channel with sensor readings from a given gpio channel\n  Use\n  Please note that there are two different and confusing ways to reference a channel; either using the Raspberry Pi or the BCM/SoC naming schema (sadly, neither of which match the physical pins!). This module supports both schemas, with Raspberry Pi being the default. Please see this page for more details.\n\n  taken from rpi-gpio readem \"\n  [opts gpio-channel]\n  (let [out-chan (a/chan)]\n    (info gpio-channel)\n    (s/read 22 gpio-channel (partial publish-sensor-reading opts out-chan))\n    (a/go-loop []\n      (a/<! (a/timeout (:dht11Delay opts)))\n      (s/read 22 gpio-channel (partial publish-sensor-reading opts out-chan))\n        (recur))\n    out-chan))\n\n\n\n(defn cleanup-sensor\n  [{:keys [sensor-chan] :as system}]\n  (a/close! sensor-chan)\n  (-> system\n      (dissoc :sensor-chan)))\n\n\n(defn -start-mix-sensor\n  [opts sensor-gpio  {:keys [telemetry-chan mixer] :as system} ]\n  (let [s-chan (sensor-chan opts sensor-gpio)]\n              (info \"connecting sensor to mixer\")\n              (a/admix mixer s-chan)\n              (spy (-> system\n                       (assoc :mixer mixer)\n                       (assoc :sensor-chan s-chan)))))\n\n(defn start-mix-sensor\n  [system-promise opts sensor-gpio]\n  (p/then system-promise (partial -start-mix-sensor opts sensor-gpio)))\n","~:reader-features",["^Y",["~:cljs"]],"~:cljc",false,"~:source-map-compact",["^ ","mappings","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","names",["huginn.sensors/build-sensor-packet","sensor-name","sensor-reading","result__26768__auto__","taoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10","taoensso.timbre/*config*","cljs.core/Delay","e42586","js/Error","e__26704__auto__","huginn.sensors/publish-sensor-reading","opts","out-chan","err","temp","humidity","c__23855__auto__","cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1","cljs.core.async.impl.dispatch/run","f__23856__auto__","switch__23690__auto__","state_42605","state_val_42606","inst_42587","cljs.core/PersistentVector","inst_42588","inst_42589","inst_42590","inst_42591","inst_42592","inst_42593","cljs.core/PersistentHashMap","inst_42594","inst_42595","inst_42596","inst_42597","inst_42598","inst_42599","inst_42600","inst_42601","cljs.core.async.impl.ioc-helpers/put!","inst_42603","cljs.core.async.impl.ioc-helpers/return-chan","statearr-42621","state-machine__23691__auto__","ret-value__23692__auto__","result__23693__auto__","cljs.core/keyword-identical?","e42622","js/Object","ex__23694__auto__","statearr-42623","cljs.core.async.impl.ioc-helpers/process-exception","state__23857__auto__","statearr-42624","cljs.core.async.impl.ioc-helpers/USER-START-IDX","cljs.core.async.impl.ioc-helpers/run-state-machine-wrapped","huginn.mqtt/payload-root","huginn.sensors/sensor-chan","gpio-channel","cljs.core.async.chan.cljs$core$IFn$_invoke$arity$0","G__42625","G__42626","G__42627","js/shadow.js.shim.module$node_dht_sensor.read","cljs.core.partial.cljs$core$IFn$_invoke$arity$3","state_42639","state_val_42640","statearr-42641","inst_42629","inst_42630","cljs.core.async.impl.ioc-helpers/take!","inst_42637","inst_42632","inst_42633","inst_42634","statearr-42642","statearr-42643","statearr-42644","e42645","statearr-42646","statearr-42647","cljs.core.async/timeout","p__42648","map__42649","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","cljs.core.get.cljs$core$IFn$_invoke$arity$2","huginn.sensors/cleanup-sensor","sensor-chan","system","cljs.core.async/close!","cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2","p__42651","map__42652","huginn.sensors/-start-mix-sensor","sensor-gpio","telemetry-chan","mixer","s-chan","cljs.core.async/admix","e42655","cljs.core.assoc.cljs$core$IFn$_invoke$arity$3","huginn.sensors/start-mix-sensor","system-promise","promesa.core/then"]]],"~:cache-keys",["~#cmap",[["^1K","cljs_node_io/file.cljs"],[1537666007418,"^1:","^19","~$goog.Uri","~$cljs-node-io.streams","~$cljs-node-io.fs","~$cljs-node-io.protocols"],["^1K","goog/dom/tagname.js"],[1530991559994,"^1:","~$goog.dom.HtmlElement"],["^1K","goog/async/freelist.js"],[1530991559994,"^1:"],["~:shadow.build.js-support/require","node-dht-sensor"],["^12","shadow.js.shim.module$node_dht_sensor.js","^1:"],["^1K","cljs/core/async/impl/ioc_helpers.cljs"],[1534380136417,"^1:","^19","~$cljs.core.async.impl.protocols"],["^1K","goog/labs/useragent/platform.js"],[1530991559994,"^1:","~$goog.labs.userAgent.util","~$goog.string"],["~:macro","^19"],[1534380137000],["^1K","cljs/core/async.cljs"],[1534380136417,"^1:","^19","^22","~$cljs.core.async.impl.channels","~$cljs.core.async.impl.buffers","~$cljs.core.async.impl.timers","~$cljs.core.async.impl.dispatch","~$cljs.core.async.impl.ioc-helpers"],["^1K","goog/timer/timer.js"],[1530991559994,"^1:","~$goog.Promise","~$goog.events.EventTarget"],["^1K","cljs/nodejs.cljs"],[1534380137690,"^1:","^19"],["^1K","cljs/spec/gen/alpha.cljs"],[1534380137690,"^1:","^19","^1X"],["^1K","cljs/tools/reader/impl/utils.cljs"],[1535586405375,"^1:","^19","~$clojure.string","^24"],["^1K","cljs_node_io/fs.cljs"],[1537666007418,"^1:","^19","^A","^22"],["^1K","cljs_node_io/core.cljs"],[1537666007418,"^1:","^19","^A","^22","~$cljs-node-io.file","^1Y","^1[","^1X"],["^1K","goog/math/math.js"],[1530991559994,"^1:","~$goog.array","~$goog.asserts"],["^1K","goog/string/stringformat.js"],[1530991559994,"^1:","^24"],["^1K","goog/events/eventtype.js"],[1530991559994,"^1:","~$goog.userAgent"],["^1K","goog/labs/useragent/browser.js"],[1530991559994,"^1:","^2?","^23","~$goog.object","^24"],["^1K","goog/array/array.js"],[1530991559994,"^1:","^2@"],["^1K","huginn/mqtt.cljs"],[1540153680927,"^1:","^19","^17","^2=","~$huginn.jwt","~$shadow.js.shim.module$gcic_mqtt_client","~$huginn.config","^F","^A","^?","~$cljs.spec.alpha","~$cljs.nodejs"],["^1K","cljs_node_io/protocols.cljs"],[1537666007418,"^1:","^19"],["^25","~$cljs.core.async.macros"],[1534380136000],["^1K","cljs_node_io/streams.cljs"],[1537666007418,"^1:","^19","^1X","^A","^1["],["^1K","huginn/config.cljs"],[1535728206166,"^1:","^19"],["^1K","goog/useragent/useragent.js"],[1530991559994,"^1:","~$goog.labs.userAgent.browser","~$goog.labs.userAgent.engine","~$goog.labs.userAgent.platform","^23","~$goog.reflect","^24"],["^1K","goog/structs/prioritypool.js"],[1530991559994,"^1:","~$goog.structs.Pool","~$goog.structs.PriorityQueue"],["^25","~$cljs.tools.reader.reader-types"],[1535586405000],["^1K","goog/async/run.js"],[1530991559994,"^1:","~$goog.async.WorkQueue","~$goog.async.nextTick","~$goog.async.throwException"],["^1K","taoensso/encore.cljs"],[1535586406568,"^1:","^19","^2=","~$clojure.set","~$cljs.reader","~$cljs.tools.reader.edn","~$cljs.test","^2B","^24","~$goog.string.format","~$goog.string.StringBuffer","~$goog.events","~$goog.net.XhrIo","~$goog.net.XhrIoPool","~$goog.Uri.QueryData","~$goog.structs","~$goog.net.EventType","~$goog.net.ErrorCode","~$taoensso.truss"],["^1K","goog/debug/error.js"],[1530991559994,"^1:"],["^1K","huginn/sensors.cljs"],[1539537129814,"^1:","^19","^17","^F","^1;","^A","^12"],["^1K","goog/async/workqueue.js"],[1530991559994,"^1:","^2@","~$goog.async.FreeList"],["^1K","huginn/jwt.cljs"],[1540153314459,"^1:","^19","^2=","^17","~$cljs-node-io.core","^2G","^="],["^1K","promesa/impl/scheduler.cljc"],[1535586406328,"^1:","^19","~$promesa.protocols"],["^1K","goog/events/events.js"],[1530991559994,"^1:","^2@","~$goog.debug.entryPointRegistry","~$goog.events.BrowserEvent","~$goog.events.BrowserFeature","~$goog.events.Listenable","~$goog.events.ListenerMap"],["^1K","goog/promise/resolver.js"],[1530991559994,"^1:"],["^1K","goog/events/browserfeature.js"],[1530991559994,"^1:","^2A"],["^1K","cljs/tools/reader/edn.cljs"],[1535586405375,"^1:","^19","~$cljs.tools.reader.impl.errors","^2O","~$cljs.tools.reader.impl.utils","~$cljs.tools.reader.impl.commons","~$cljs.tools.reader","^24","^2X"],["^1K","goog/structs/priorityqueue.js"],[1530991559994,"^1:","~$goog.structs.Heap"],["^1K","goog/net/xhrio.js"],[1530991559994,"^1:","~$goog.Timer","^2?","^2@","^38","^2<","~$goog.json.hybrid","~$goog.log","^33","^32","~$goog.net.HttpStatus","~$goog.net.XmlHttp","^24","^31","~$goog.structs.Map","~$goog.uri.utils","^2A"],["^1K","goog/promise/thenable.js"],[1530991559994,"^1:"],["^1K","promesa/impl.cljc"],[1535586406328,"^1:","^19","^37","~$org.bluebird"],["^1K","goog/dom/nodetype.js"],[1530991559994,"^1:"],["^25","^F"],[1535586406000],["^1K","cljs/tools/reader/impl/inspect.cljs"],[1535586405375,"^1:","^19"],["^1K","cljs/pprint.cljs"],[1534380137690,"^1:","^19","^2=","^24","^2X"],["^25","~$cljs.spec.gen.alpha"],[1534380137000],["^1K","cljs/tools/reader.cljs"],[1535586405375,"^1:","^19","^2O","^3>","^3?","^3=","^2?","^24","^2X"],["^1K","goog/net/wrapperxmlhttpfactory.js"],[1530991559994,"^1:","~$goog.net.XhrLike","~$goog.net.XmlHttpFactory"],["^1K","goog/events/eventtarget.js"],[1530991559994,"^1:","~$goog.Disposable","^2@","^2Y","~$goog.events.Event","^3;","^3<","^2B"],["^1K","goog/disposable/disposable.js"],[1530991559994,"^1:","~$goog.disposable.IDisposable"],["^1K","goog/object/object.js"],[1530991559994,"^1:"],["^1K","goog/structs/set.js"],[1530991559994,"^1:","^31","~$goog.structs.Collection","^3G"],"~:SHADOW-TIMESTAMP",[1540077702000,1534380137000],["^1K","goog/math/long.js"],[1530991559994,"^1:","^2@","^2L"],["^1K","goog/events/listener.js"],[1530991559994,"^1:","~$goog.events.ListenableKey"],["^1K","cljs/core/async/impl/channels.cljs"],[1534380136417,"^1:","^19","^22","^29","^27"],["^1K","goog/events/listenermap.js"],[1530991559994,"^1:","^2?","~$goog.events.Listener","^2B"],["^1K","goog/events/eventid.js"],[1530991559994,"^1:"],["^1K","taoensso/truss.cljs"],[1535586406478,"^1:","^19","~$taoensso.truss.impl"],["^1K","shadow/test/env.cljs"],[1540077702615,"^1:","^19"],["^1K","goog/functions/functions.js"],[1530991559994,"^1:"],["^1K","cljs/core/async/impl/dispatch.cljs"],[1534380136417,"^1:","^19","^27","^2Q"],["^1K","taoensso/truss/impl.cljs"],[1535586406478,"^1:","^19","^2S"],["^1K","clojure/walk.cljs"],[1534380137690,"^1:","^19"],["^1K","cljs/core/async/impl/protocols.cljs"],[1534380136417,"^1:","^19"],["^1K","goog/net/eventtype.js"],[1530991559994,"^1:"],["^1K","goog/structs/map.js"],[1530991559994,"^1:","~$goog.iter.Iterator","~$goog.iter.StopIteration","^2B"],["^1K","goog/net/xhriopool.js"],[1530991559994,"^1:","^2Z","~$goog.structs.PriorityPool"],["^1K","goog/structs/queue.js"],[1530991559994,"^1:","^2?"],["^1K","goog/labs/useragent/engine.js"],[1530991559994,"^1:","^2?","^23","^24"],["^1K","taoensso/timbre/appenders/core.cljs"],[1535586406375,"^1:","^19","^2=","~$taoensso.encore"],["^1K","cljs/reader.cljs"],[1534380137690,"^1:","^19","^2B","^3@","^2U","^2X"],["^21","bluebird"],["~$shadow.js.shim.module$bluebird","shadow.js.shim.module$bluebird.js","^1:"],["^25","~$cljs-node-io.macros"],[1537666007000],["^25","^2F"],[1534380137000],["^1K","goog/asserts/asserts.js"],[1530991559994,"^1:","~$goog.debug.Error","~$goog.dom.NodeType","^24"],["^1K","cljs/core/async/impl/buffers.cljs"],[1534380136417,"^1:","^19","^22"],["^25","~$cljs.pprint"],[1534380137000],["^1K","goog/debug/logbuffer.js"],[1530991559994,"^1:","^2@","~$goog.debug.LogRecord"],["^21","jsonwebtoken"],["^=","shadow.js.shim.module$jsonwebtoken.js","^1:"],["^25","^3X"],[1535586406000],["^1K","goog/uri/uri.js"],[1530991559994,"^1:","^2?","^2@","^24","^31","^3G","^3H","~$goog.uri.utils.ComponentIndex","~$goog.uri.utils.StandardQueryParam"],["^1K","goog/net/errorcode.js"],[1530991559994,"^1:"],["^25","^2V"],[1534380137000],["^25","^A"],[1534380136000],["^1K","goog/disposable/idisposable.js"],[1530991559994,"^1:"],["^1K","goog/promise/promise.js"],[1530991559994,"^1:","~$goog.Thenable","^2@","^35","~$goog.async.run","^2R","^3[","~$goog.promise.Resolver"],["^1K","cljs/core/async/impl/timers.cljs"],[1534380136417,"^1:","^19","^22","^26","^29"],["^1K","cljs/spec/alpha.cljs"],[1534380137690,"^1:","^19","^2B","~$clojure.walk","^3J","^2="],["^1K","goog/debug/logrecord.js"],[1530991559994,"^1:"],["^1K","goog/base.js"],[1530991559994],["^1K","promesa/core.cljc"],[1535586406328,"^1:","^19","^37","~$promesa.impl","~$promesa.impl.scheduler"],["^1K","goog/json/hybrid.js"],[1530991559994,"^1:","^2@","~$goog.json"],["^1K","goog/structs/structs.js"],[1530991559994,"^1:","^2?","^2B"],["^1K","cljs/tools/reader/impl/errors.cljs"],[1535586405375,"^1:","^19","^2O","^2=","~$cljs.tools.reader.impl.inspect"],["^1K","org/bluebird.cljs"],[1535669979047,"^1:","^19","^3Y"],["^1K","clojure/string.cljs"],[1534380137690,"^1:","^19","^24","^2X"],["^1K","goog/structs/pool.js"],[1530991559994,"^1:","^3M","~$goog.structs.Queue","~$goog.structs.Set"],["^1K","goog/net/httpstatus.js"],[1530991559994,"^1:"],["^1K","goog/structs/heap.js"],[1530991559994,"^1:","^2?","^2B","~$goog.structs.Node"],["^1K","goog/debug/entrypointregistry.js"],[1530991559994,"^1:","^2@"],["^1K","goog/string/string.js"],[1530991559994,"^1:"],["^1K","goog/reflect/reflect.js"],[1530991559994,"^1:"],["^1K","goog/labs/useragent/util.js"],[1530991559994,"^1:","^24"],["^25","~$clojure.template"],[1534380136000],["^25","~$cljs.core.async.impl.ioc-macros"],[1534380136000],["^21","gcic-mqtt-client"],["^2D","shadow.js.shim.module$gcic_mqtt_client.js","^1:"],["^1K","goog/debug/debug.js"],[1530991559994,"^1:","^2?","~$goog.debug.errorcontext","^2A"],["^1K","goog/string/stringbuffer.js"],[1530991559994,"^1:"],["^1K","goog/debug/errorcontext.js"],[1530991559994,"^1:"],["^1K","cljs/tools/reader/reader_types.cljs"],[1535586405375,"^1:","^19","^3>","^24","^2X"],["^1K","promesa/protocols.cljc"],[1535586406328,"^1:","^19"],["^1K","goog/iter/iter.js"],[1530991559994,"^1:","^2?","^2@","~$goog.functions","~$goog.math"],["^1K","goog/async/nexttick.js"],[1530991559994,"^1:","^38","~$goog.dom.TagName","^4C","^2I","^2J"],["^1K","goog/debug/logger.js"],[1530991559994,"^1:","^2?","^2@","~$goog.debug","~$goog.debug.LogBuffer","^42"],["^1K","goog/events/event.js"],[1530991559994,"^1:","^3M","~$goog.events.EventId"],["^1K","cljs/tools/reader/impl/commons.cljs"],[1535586405375,"^1:","^19","^3=","^2O","^3>"],["^21","systeminformation"],["^?","shadow.js.shim.module$systeminformation.js","^1:"],["^1K","goog/dom/htmlelement.js"],[1530991559994,"^1:"],["^1K","cljs/core.cljs"],[1534380137690,"~$goog.math.Long","~$goog.math.Integer","^24","^2B","^2?","^1X","^2X"],["^1K","goog/log/log.js"],[1530991559994,"^1:","^4F","~$goog.debug.LogManager","^42","~$goog.debug.Logger"],["^1K","goog/structs/collection.js"],[1530991559994,"^1:"],["^1K","goog/events/browserevent.js"],[1530991559994,"^1:","^3:","^3N","~$goog.events.EventType","^2L","^2A"],["^1K","goog/math/integer.js"],[1530991559994,"^1:"],["^1K","goog/structs/node.js"],[1530991559994,"^1:"],["^25","^3T"],[1535586406000],["^1K","clojure/set.cljs"],[1534380137690,"^1:","^19"],["^1K","goog/uri/utils.js"],[1530991559994,"^1:","^2?","^2@","^24"],["^1K","taoensso/timbre.cljs"],[1535586406375,"^1:","^19","^2=","^3X","~$taoensso.timbre.appenders.core"],["^1K","goog/json/json.js"],[1530991559994,"^1:"],["^1K","goog/events/listenable.js"],[1530991559994,"^1:","^4H"],["^1K","goog/net/xmlhttpfactory.js"],[1530991559994,"^1:","^3K"],["^1K","goog/net/xmlhttp.js"],[1530991559994,"^1:","^2@","~$goog.net.WrapperXmlHttpFactory","^3L"],["^1K","cljs/test.cljs"],[1534380137690,"~$shadow.test.env","^1:","^19","^2=","^41"],["^1K","goog/net/xhrlike.js"],[1530991559994,"^1:"],["^25","^2T"],[1534380137000]]],"~:analyzer",["^ ","^3",null,"^4",["^ "],"^5",["^ ","^6","huginn/sensors.cljs","^7",1,"^8",5,"^9",1,"^:",19],"^;",["^ ","^<","^=","^>","^?","^@","^A","^B","^C"],"^D",["^ ","^E","^F","^G","^F","^H","^F","^I","^F","^J","^F","^K","^F","^L","^F","^M","^F","^N","^F","^O","^F","^P","^F","^Q","^F","^R","^F","^S","^F","^T","^F","^U","^F","^V","^F","^W","^F"],"^X",["^Y",[]],"~:shadow/js-access-properties",["^Y",["read"]],"^Z","^[","^10",["^ ","^11","^12"],"^15",null,"^16",["^ ","^12","^12","~$p","^17","^17","^17","^18","^F","~$a","^A","^19","^19","^1:","^1:","^A","^A","^@","^A","~$s","^12","^1;","^1;","^F","^F"],"^1<",["^Y",["^1="]],"~:shadow/js-access-global",["^Y",["Object","Error"]],"^1>",["^ ","^1?","^1;"],"~:defs",["^ ","~$build-sensor-packet",["^ ","~:protocol-inline",null,"^5",["^ ","^6","huginn/sensors.cljs","^7",13,"^8",7,"^9",13,"^:",26,"~:arglists",["^1B",["~$quote",["^1B",[["~$sensor-name","~$sensor-reading"]]]]]],"^Z","~$huginn.sensors/build-sensor-packet","~:variadic",false,"^6","huginn/sensors.cljs","^:",26,"~:method-params",["^1B",[["^4Y","^4Z"]]],"~:protocol-impl",null,"~:arglists-meta",["^1B",[null,null]],"^8",1,"^7",13,"^9",13,"~:max-fixed-arity",2,"~:fn-var",true,"^4W",["^1B",["^4X",["^1B",[["^4Y","^4Z"]]]]]],"~$publish-sensor-reading",["^ ","^4V",null,"^5",["^ ","^6","huginn/sensors.cljs","^7",18,"^8",7,"^9",18,"^:",29,"^4W",["^1B",["^4X",["^1B",[["~$opts","~$out-chan","~$err","~$temp","~$humidity"]]]]]],"^Z","~$huginn.sensors/publish-sensor-reading","^50",false,"^6","huginn/sensors.cljs","^:",29,"^51",["^1B",[["^57","^58","^59","^5:","^5;"]]],"^52",null,"^53",["^1B",[null,null]],"^8",1,"^7",18,"^9",18,"^54",5,"^55",true,"^4W",["^1B",["^4X",["^1B",[["^57","^58","^59","^5:","^5;"]]]]]],"~$sensor-chan",["^ ","^4V",null,"^5",["^ ","^6","huginn/sensors.cljs","^7",30,"^8",7,"^9",30,"^:",18,"^4W",["^1B",["^4X",["^1B",[["^57","~$gpio-channel"]]]]],"~:doc","this creates a channel with sensor readings from a given gpio channel\n  Use\n  Please note that there are two different and confusing ways to reference a channel; either using the Raspberry Pi or the BCM/SoC naming schema (sadly, neither of which match the physical pins!). This module supports both schemas, with Raspberry Pi being the default. Please see this page for more details.\n\n  taken from rpi-gpio readem "],"^Z","~$huginn.sensors/sensor-chan","^50",false,"^6","huginn/sensors.cljs","^:",18,"^51",["^1B",[["^57","^5>"]]],"^52",null,"^53",["^1B",[null,null]],"^8",1,"^7",30,"^9",30,"^54",2,"^55",true,"^4W",["^1B",["^4X",["^1B",[["^57","^5>"]]]]],"^5?","this creates a channel with sensor readings from a given gpio channel\n  Use\n  Please note that there are two different and confusing ways to reference a channel; either using the Raspberry Pi or the BCM/SoC naming schema (sadly, neither of which match the physical pins!). This module supports both schemas, with Raspberry Pi being the default. Please see this page for more details.\n\n  taken from rpi-gpio readem "],"~$cleanup-sensor",["^ ","^4V",null,"^5",["^ ","^6","huginn/sensors.cljs","^7",48,"^8",7,"^9",48,"^:",21,"^4W",["^1B",["^4X",["^1B",[[["^ ","~:keys",["^5="],"^1D","~$system"]]]]]]],"^Z","~$huginn.sensors/cleanup-sensor","^50",false,"^6","huginn/sensors.cljs","^:",21,"^51",["^1B",[["~$p__42648"]]],"^52",null,"^53",["^1B",[null,null]],"^8",1,"^7",48,"^9",48,"^54",1,"^55",true,"^4W",["^1B",["^4X",["^1B",[[["^ ","^5B",["^5="],"^1D","^5C"]]]]]]],"~$-start-mix-sensor",["^ ","^4V",null,"^5",["^ ","^6","huginn/sensors.cljs","^7",55,"^8",7,"^9",55,"^:",24,"^4W",["^1B",["^4X",["^1B",[["^57","~$sensor-gpio",["^ ","^5B",["~$telemetry-chan","~$mixer"],"^1D","^5C"]]]]]]],"^Z","~$huginn.sensors/-start-mix-sensor","^50",false,"^6","huginn/sensors.cljs","^:",24,"^51",["^1B",[["^57","^5G","~$p__42651"]]],"^52",null,"^53",["^1B",[null,null]],"^8",1,"^7",55,"^9",55,"^54",3,"^55",true,"^4W",["^1B",["^4X",["^1B",[["^57","^5G",["^ ","^5B",["^5H","^5I"],"^1D","^5C"]]]]]]],"~$start-mix-sensor",["^ ","^4V",null,"^5",["^ ","^6","huginn/sensors.cljs","^7",64,"^8",7,"^9",64,"^:",23,"^4W",["^1B",["^4X",["^1B",[["~$system-promise","^57","^5G"]]]]]],"^Z","~$huginn.sensors/start-mix-sensor","^50",false,"^6","huginn/sensors.cljs","^:",23,"^51",["^1B",[["^5M","^57","^5G"]]],"^52",null,"^53",["^1B",[null,null]],"^8",1,"^7",64,"^9",64,"^54",3,"^55",true,"^4W",["^1B",["^4X",["^1B",[["^5M","^57","^5G"]]]]]]],"^1@",["^ ","^F","^F","^18","^F","^19","^19","~$a","^A","^A","^A","^@","^A"],"~:cljs.analyzer/constants",["^ ","^1<",["^Y",["~:dht11Delay","^4Z","^5I","~:payload","~:else","^4Y","~:subfolder","~:telemetry-chan","~$s-chan","~$->","^5C","~:sensor-chan","~:recur","~:debug","~:info","~:error","~$str","~:auto","~$assoc","~:p","~:mixer"]],"~:order",["^5[","~:p","^61","^5R","^5Q","^5S","^5Y","^4Z","^60","^4Y","^5Z","^5X","^5P","^5W","^5T","^63","^5V","^5C","^62","^5I","^5U"]],"^1G",["^ ","^1=",["^Y",[]]],"^1H",["^ ","^11",["^ ","^1D","~$s"]],"^1I",["^1:","^19","^17","^F","^1;","^A","^12"]],"^14","^[","~:ns-specs",["^ "],"~:ns-speced-vars",[],"~:compiler-options",["^1W",[["^67","~:static-fns"],true,["^67","~:elide-asserts"],false,["^67","~:optimize-constants"],null,["^67","~:external-config"],null,["^67","~:tooling-config"],null,["^67","~:emit-constants"],null,["^67","~:infer-externs"],true,["^67","^1P"],null,["~:js-options","~:js-provider"],"^1=",["~:mode"],"~:dev",["^67","~:fn-invoke-direct"],null,["^67","~:source-map"],"/dev/null"]]]