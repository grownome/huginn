["^ ","~:output",["^ ","~:js","goog.provide('huginn.mqtt');\ngoog.require('cljs.core');\ngoog.require('promesa.core');\ngoog.require('clojure.string');\ngoog.require('huginn.jwt');\ngoog.require('shadow.js.shim.module$gcic_mqtt_client');\ngoog.require('orchestra_cljs.spec.test');\ngoog.require('huginn.config');\ngoog.require('taoensso.timbre');\ngoog.require('cljs.core.async');\ngoog.require('shadow.js.shim.module$systeminformation');\ngoog.require('cljs.spec.alpha');\ngoog.require('cljs.nodejs');\nvar opts18778_18968 = null;\ncljs.core.reduce.cljs$core$IFn$_invoke$arity$3(((function (opts18778_18968){\nreturn (function (ret__15628__auto__,p__18779){\nvar vec__18780 = p__18779;\nvar ___15629__auto__ = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__18780,(0),null);\nvar f__15630__auto__ = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__18780,(1),null);\nvar sym__15631__auto__ = (f__15630__auto__.cljs$core$IFn$_invoke$arity$0 ? f__15630__auto__.cljs$core$IFn$_invoke$arity$0() : f__15630__auto__.call(null));\nvar G__18783 = ret__15628__auto__;\nif(cljs.core.truth_(sym__15631__auto__)){\nreturn cljs.core.conj.cljs$core$IFn$_invoke$arity$2(G__18783,sym__15631__auto__);\n} else {\nreturn G__18783;\n}\n});})(opts18778_18968))\n,cljs.core.PersistentVector.EMPTY,orchestra_cljs.spec.test.distinct_by(cljs.core.first,cljs.core.filter.cljs$core$IFn$_invoke$arity$2(((function (opts18778_18968){\nreturn (function (p1__15627__15632__auto__){\nvar G__18785 = cljs.core.first(p1__15627__15632__auto__);\nvar fexpr__18784 = orchestra_cljs.spec.test.instrumentable_syms.cljs$core$IFn$_invoke$arity$1(opts18778_18968);\nreturn (fexpr__18784.cljs$core$IFn$_invoke$arity$1 ? fexpr__18784.cljs$core$IFn$_invoke$arity$1(G__18785) : fexpr__18784.call(null,G__18785));\n});})(opts18778_18968))\n,cljs.core.zipmap(cljs.core.PersistentVector.EMPTY,cljs.core.PersistentVector.EMPTY))));\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\"huginn.mqtt\",\"projectId\",\"huginn.mqtt/projectId\",-2109218287),new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null),cljs.core.string_QMARK_);\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\"huginn.mqtt\",\"registryId\",\"huginn.mqtt/registryId\",970901079),new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null),cljs.core.string_QMARK_);\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\"huginn.mqtt\",\"cloudRegion\",\"huginn.mqtt/cloudRegion\",-1432542491),new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null),cljs.core.string_QMARK_);\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\"huginn.mqtt\",\"deviceId\",\"huginn.mqtt/deviceId\",1335615099),new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null),cljs.core.string_QMARK_);\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null),cljs.core.any_QMARK_);\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\"huginn.mqtt\",\"topic-type\",\"huginn.mqtt/topic-type\",-1269163830),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [\"events\",null,\"state\",null], null), null),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [\"events\",null,\"state\",null], null), null));\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"keys\",\"cljs.spec.alpha/keys\",1109346032,null),new cljs.core.Keyword(null,\"req-un\",\"req-un\",1074571008),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"projectId\",\"huginn.mqtt/projectId\",-2109218287),new cljs.core.Keyword(\"huginn.mqtt\",\"registryId\",\"huginn.mqtt/registryId\",970901079),new cljs.core.Keyword(\"huginn.mqtt\",\"cloudRegion\",\"huginn.mqtt/cloudRegion\",-1432542491),new cljs.core.Keyword(\"huginn.mqtt\",\"deviceId\",\"huginn.mqtt/deviceId\",1335615099)], null)),cljs.spec.alpha.map_spec_impl(cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,\"req-un\",\"req-un\",1074571008),new cljs.core.Keyword(null,\"opt-un\",\"opt-un\",883442496),new cljs.core.Keyword(null,\"gfn\",\"gfn\",791517474),new cljs.core.Keyword(null,\"pred-exprs\",\"pred-exprs\",1792271395),new cljs.core.Keyword(null,\"keys-pred\",\"keys-pred\",858984739),new cljs.core.Keyword(null,\"opt-keys\",\"opt-keys\",1262688261),new cljs.core.Keyword(null,\"req-specs\",\"req-specs\",553962313),new cljs.core.Keyword(null,\"req\",\"req\",-326448303),new cljs.core.Keyword(null,\"req-keys\",\"req-keys\",514319221),new cljs.core.Keyword(null,\"opt-specs\",\"opt-specs\",-384905450),new cljs.core.Keyword(null,\"pred-forms\",\"pred-forms\",172611832),new cljs.core.Keyword(null,\"opt\",\"opt\",-794706369)],[new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"projectId\",\"huginn.mqtt/projectId\",-2109218287),new cljs.core.Keyword(\"huginn.mqtt\",\"registryId\",\"huginn.mqtt/registryId\",970901079),new cljs.core.Keyword(\"huginn.mqtt\",\"cloudRegion\",\"huginn.mqtt/cloudRegion\",-1432542491),new cljs.core.Keyword(\"huginn.mqtt\",\"deviceId\",\"huginn.mqtt/deviceId\",1335615099)], null),null,null,new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [(function (G__18786){\nreturn cljs.core.map_QMARK_(G__18786);\n}),(function (G__18786){\nreturn cljs.core.contains_QMARK_(G__18786,new cljs.core.Keyword(null,\"projectId\",\"projectId\",-1551013096));\n}),(function (G__18786){\nreturn cljs.core.contains_QMARK_(G__18786,new cljs.core.Keyword(null,\"registryId\",\"registryId\",-1767694006));\n}),(function (G__18786){\nreturn cljs.core.contains_QMARK_(G__18786,new cljs.core.Keyword(null,\"cloudRegion\",\"cloudRegion\",-857757214));\n}),(function (G__18786){\nreturn cljs.core.contains_QMARK_(G__18786,new cljs.core.Keyword(null,\"deviceId\",\"deviceId\",1909987208));\n})], null),(function (G__18786){\nreturn ((cljs.core.map_QMARK_(G__18786)) && (cljs.core.contains_QMARK_(G__18786,new cljs.core.Keyword(null,\"projectId\",\"projectId\",-1551013096))) && (cljs.core.contains_QMARK_(G__18786,new cljs.core.Keyword(null,\"registryId\",\"registryId\",-1767694006))) && (cljs.core.contains_QMARK_(G__18786,new cljs.core.Keyword(null,\"cloudRegion\",\"cloudRegion\",-857757214))) && (cljs.core.contains_QMARK_(G__18786,new cljs.core.Keyword(null,\"deviceId\",\"deviceId\",1909987208))));\n}),cljs.core.PersistentVector.EMPTY,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"projectId\",\"huginn.mqtt/projectId\",-2109218287),new cljs.core.Keyword(\"huginn.mqtt\",\"registryId\",\"huginn.mqtt/registryId\",970901079),new cljs.core.Keyword(\"huginn.mqtt\",\"cloudRegion\",\"huginn.mqtt/cloudRegion\",-1432542491),new cljs.core.Keyword(\"huginn.mqtt\",\"deviceId\",\"huginn.mqtt/deviceId\",1335615099)], null),null,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"projectId\",\"projectId\",-1551013096),new cljs.core.Keyword(null,\"registryId\",\"registryId\",-1767694006),new cljs.core.Keyword(null,\"cloudRegion\",\"cloudRegion\",-857757214),new cljs.core.Keyword(null,\"deviceId\",\"deviceId\",1909987208)], null),cljs.core.PersistentVector.EMPTY,new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"fn\",\"cljs.core/fn\",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"map?\",\"cljs.core/map?\",-1390345523,null),new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null))),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"fn\",\"cljs.core/fn\",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"contains?\",\"cljs.core/contains?\",-976526835,null),new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null),new cljs.core.Keyword(null,\"projectId\",\"projectId\",-1551013096))),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"fn\",\"cljs.core/fn\",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"contains?\",\"cljs.core/contains?\",-976526835,null),new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null),new cljs.core.Keyword(null,\"registryId\",\"registryId\",-1767694006))),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"fn\",\"cljs.core/fn\",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"contains?\",\"cljs.core/contains?\",-976526835,null),new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null),new cljs.core.Keyword(null,\"cloudRegion\",\"cloudRegion\",-857757214))),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"fn\",\"cljs.core/fn\",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"contains?\",\"cljs.core/contains?\",-976526835,null),new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null),new cljs.core.Keyword(null,\"deviceId\",\"deviceId\",1909987208)))], null),null])));\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\"huginn.mqtt\",\"payload\",\"huginn.mqtt/payload\",-916460991),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"and\",\"cljs.spec.alpha/and\",-2060279705,null),new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null),cljs.core.list(new cljs.core.Symbol(null,\"fn*\",\"fn*\",-752876845,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"p1__18787#\",\"p1__18787#\",-400673653,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"<\",\"cljs.core/<\",1677496129,null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"count\",\"cljs.core/count\",-921270233,null),new cljs.core.Symbol(null,\"p1__18787#\",\"p1__18787#\",-400673653,null)),(200000)))),cljs.spec.alpha.and_spec_impl(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"fn\",\"cljs.core/fn\",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"<\",\"cljs.core/<\",1677496129,null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"count\",\"cljs.core/count\",-921270233,null),new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)),(200000)))], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.string_QMARK_,(function (p1__18787_SHARP_){\nreturn (cljs.core.count(p1__18787_SHARP_) < (200000));\n})], null),null));\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\"huginn.mqtt\",\"subfolder\",\"huginn.mqtt/subfolder\",754461404),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"and\",\"cljs.spec.alpha/and\",-2060279705,null),new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null),cljs.core.list(new cljs.core.Symbol(null,\"fn*\",\"fn*\",-752876845,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"p1__18788#\",\"p1__18788#\",-732709173,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"<\",\"cljs.core/<\",1677496129,null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"count\",\"cljs.core/count\",-921270233,null),new cljs.core.Symbol(null,\"p1__18788#\",\"p1__18788#\",-732709173,null)),(200)))),cljs.spec.alpha.and_spec_impl(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"fn\",\"cljs.core/fn\",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"<\",\"cljs.core/<\",1677496129,null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"count\",\"cljs.core/count\",-921270233,null),new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)),(200)))], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.string_QMARK_,(function (p1__18788_SHARP_){\nreturn (cljs.core.count(p1__18788_SHARP_) < (200));\n})], null),null));\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\"huginn.mqtt\",\"ts\",\"huginn.mqtt/ts\",2127118637),new cljs.core.Symbol(\"cljs.core\",\"float?\",\"cljs.core/float?\",-941017745,null),cljs.core.float_QMARK_);\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\"huginn.mqtt\",\"qos\",\"huginn.mqtt/qos\",-601553370),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [(0),null,(1),null], null), null),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [(0),null,(1),null], null), null));\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\"huginn.mqtt\",\"mqtt-packet\",\"huginn.mqtt/mqtt-packet\",1651733234),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"keys\",\"cljs.spec.alpha/keys\",1109346032,null),new cljs.core.Keyword(null,\"req-un\",\"req-un\",1074571008),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"payload\",\"huginn.mqtt/payload\",-916460991),new cljs.core.Keyword(\"huginn.mqtt\",\"subfolder\",\"huginn.mqtt/subfolder\",754461404),new cljs.core.Keyword(\"huginn.mqtt\",\"qos\",\"huginn.mqtt/qos\",-601553370),new cljs.core.Keyword(\"huginn.mqtt\",\"ts\",\"huginn.mqtt/ts\",2127118637)], null)),cljs.spec.alpha.map_spec_impl(cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,\"req-un\",\"req-un\",1074571008),new cljs.core.Keyword(null,\"opt-un\",\"opt-un\",883442496),new cljs.core.Keyword(null,\"gfn\",\"gfn\",791517474),new cljs.core.Keyword(null,\"pred-exprs\",\"pred-exprs\",1792271395),new cljs.core.Keyword(null,\"keys-pred\",\"keys-pred\",858984739),new cljs.core.Keyword(null,\"opt-keys\",\"opt-keys\",1262688261),new cljs.core.Keyword(null,\"req-specs\",\"req-specs\",553962313),new cljs.core.Keyword(null,\"req\",\"req\",-326448303),new cljs.core.Keyword(null,\"req-keys\",\"req-keys\",514319221),new cljs.core.Keyword(null,\"opt-specs\",\"opt-specs\",-384905450),new cljs.core.Keyword(null,\"pred-forms\",\"pred-forms\",172611832),new cljs.core.Keyword(null,\"opt\",\"opt\",-794706369)],[new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"payload\",\"huginn.mqtt/payload\",-916460991),new cljs.core.Keyword(\"huginn.mqtt\",\"subfolder\",\"huginn.mqtt/subfolder\",754461404),new cljs.core.Keyword(\"huginn.mqtt\",\"qos\",\"huginn.mqtt/qos\",-601553370),new cljs.core.Keyword(\"huginn.mqtt\",\"ts\",\"huginn.mqtt/ts\",2127118637)], null),null,null,new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [(function (G__18789){\nreturn cljs.core.map_QMARK_(G__18789);\n}),(function (G__18789){\nreturn cljs.core.contains_QMARK_(G__18789,new cljs.core.Keyword(null,\"payload\",\"payload\",-383036092));\n}),(function (G__18789){\nreturn cljs.core.contains_QMARK_(G__18789,new cljs.core.Keyword(null,\"subfolder\",\"subfolder\",1044158439));\n}),(function (G__18789){\nreturn cljs.core.contains_QMARK_(G__18789,new cljs.core.Keyword(null,\"qos\",\"qos\",-2124292319));\n}),(function (G__18789){\nreturn cljs.core.contains_QMARK_(G__18789,new cljs.core.Keyword(null,\"ts\",\"ts\",1617209904));\n})], null),(function (G__18789){\nreturn ((cljs.core.map_QMARK_(G__18789)) && (cljs.core.contains_QMARK_(G__18789,new cljs.core.Keyword(null,\"payload\",\"payload\",-383036092))) && (cljs.core.contains_QMARK_(G__18789,new cljs.core.Keyword(null,\"subfolder\",\"subfolder\",1044158439))) && (cljs.core.contains_QMARK_(G__18789,new cljs.core.Keyword(null,\"qos\",\"qos\",-2124292319))) && (cljs.core.contains_QMARK_(G__18789,new cljs.core.Keyword(null,\"ts\",\"ts\",1617209904))));\n}),cljs.core.PersistentVector.EMPTY,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"payload\",\"huginn.mqtt/payload\",-916460991),new cljs.core.Keyword(\"huginn.mqtt\",\"subfolder\",\"huginn.mqtt/subfolder\",754461404),new cljs.core.Keyword(\"huginn.mqtt\",\"qos\",\"huginn.mqtt/qos\",-601553370),new cljs.core.Keyword(\"huginn.mqtt\",\"ts\",\"huginn.mqtt/ts\",2127118637)], null),null,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"payload\",\"payload\",-383036092),new cljs.core.Keyword(null,\"subfolder\",\"subfolder\",1044158439),new cljs.core.Keyword(null,\"qos\",\"qos\",-2124292319),new cljs.core.Keyword(null,\"ts\",\"ts\",1617209904)], null),cljs.core.PersistentVector.EMPTY,new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"fn\",\"cljs.core/fn\",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"map?\",\"cljs.core/map?\",-1390345523,null),new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null))),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"fn\",\"cljs.core/fn\",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"contains?\",\"cljs.core/contains?\",-976526835,null),new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null),new cljs.core.Keyword(null,\"payload\",\"payload\",-383036092))),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"fn\",\"cljs.core/fn\",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"contains?\",\"cljs.core/contains?\",-976526835,null),new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null),new cljs.core.Keyword(null,\"subfolder\",\"subfolder\",1044158439))),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"fn\",\"cljs.core/fn\",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"contains?\",\"cljs.core/contains?\",-976526835,null),new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null),new cljs.core.Keyword(null,\"qos\",\"qos\",-2124292319))),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"fn\",\"cljs.core/fn\",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"contains?\",\"cljs.core/contains?\",-976526835,null),new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null),new cljs.core.Keyword(null,\"ts\",\"ts\",1617209904)))], null),null])));\ncljs.spec.alpha.def_impl(new cljs.core.Symbol(\"huginn.mqtt\",\"client-id\",\"huginn.mqtt/client-id\",1699900680,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"fspec\",\"cljs.spec.alpha/fspec\",-1289128341,null),new cljs.core.Keyword(null,\"args\",\"args\",1315556576),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(null,\"ret\",\"ret\",-468222814),new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null)),cljs.spec.alpha.fspec_impl(cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),null,null),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null),cljs.core.string_QMARK_,null,null),new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null),null,null,null));\n/**\n * Builds a client id used to identify the device this message is\n *   comming from\n */\nhuginn.mqtt.client_id = (function huginn$mqtt$client_id(p__18790){\nvar map__18791 = p__18790;\nvar map__18791__$1 = ((((!((map__18791 == null)))?(((((map__18791.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__18791.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__18791):map__18791);\nvar opts = map__18791__$1;\nvar projectId = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__18791__$1,new cljs.core.Keyword(null,\"projectId\",\"projectId\",-1551013096));\nvar registryId = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__18791__$1,new cljs.core.Keyword(null,\"registryId\",\"registryId\",-1767694006));\nvar cloudRegion = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__18791__$1,new cljs.core.Keyword(null,\"cloudRegion\",\"cloudRegion\",-857757214));\nvar deviceId = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__18791__$1,new cljs.core.Keyword(null,\"deviceId\",\"deviceId\",1909987208));\nreturn [\"projects/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(projectId),\"/locations/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(cloudRegion),\"/registries/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(registryId),\"/devices/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(deviceId)].join('');\n});\ncljs.spec.alpha.def_impl(new cljs.core.Symbol(\"huginn.mqtt\",\"config-chan\",\"huginn.mqtt/config-chan\",-1665797133,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"fspec\",\"cljs.spec.alpha/fspec\",-1289128341,null),new cljs.core.Keyword(null,\"args\",\"args\",1315556576),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"keys\",\"cljs.spec.alpha/keys\",1109346032,null),new cljs.core.Keyword(null,\"req-un\",\"req-un\",1074571008),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"deviceId\",\"huginn.mqtt/deviceId\",1335615099)], null))),new cljs.core.Keyword(null,\"ret\",\"ret\",-468222814),new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null)),cljs.spec.alpha.fspec_impl(cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"keys\",\"cljs.spec.alpha/keys\",1109346032,null),new cljs.core.Keyword(null,\"req-un\",\"req-un\",1074571008),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"deviceId\",\"huginn.mqtt/deviceId\",1335615099)], null))),cljs.spec.alpha.cat_impl(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"opts\",\"opts\",155075701)], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.spec.alpha.map_spec_impl(cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,\"req-un\",\"req-un\",1074571008),new cljs.core.Keyword(null,\"opt-un\",\"opt-un\",883442496),new cljs.core.Keyword(null,\"gfn\",\"gfn\",791517474),new cljs.core.Keyword(null,\"pred-exprs\",\"pred-exprs\",1792271395),new cljs.core.Keyword(null,\"keys-pred\",\"keys-pred\",858984739),new cljs.core.Keyword(null,\"opt-keys\",\"opt-keys\",1262688261),new cljs.core.Keyword(null,\"req-specs\",\"req-specs\",553962313),new cljs.core.Keyword(null,\"req\",\"req\",-326448303),new cljs.core.Keyword(null,\"req-keys\",\"req-keys\",514319221),new cljs.core.Keyword(null,\"opt-specs\",\"opt-specs\",-384905450),new cljs.core.Keyword(null,\"pred-forms\",\"pred-forms\",172611832),new cljs.core.Keyword(null,\"opt\",\"opt\",-794706369)],[new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"deviceId\",\"huginn.mqtt/deviceId\",1335615099)], null),null,null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(function (G__18793){\nreturn cljs.core.map_QMARK_(G__18793);\n}),(function (G__18793){\nreturn cljs.core.contains_QMARK_(G__18793,new cljs.core.Keyword(null,\"deviceId\",\"deviceId\",1909987208));\n})], null),(function (G__18793){\nreturn ((cljs.core.map_QMARK_(G__18793)) && (cljs.core.contains_QMARK_(G__18793,new cljs.core.Keyword(null,\"deviceId\",\"deviceId\",1909987208))));\n}),cljs.core.PersistentVector.EMPTY,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"deviceId\",\"huginn.mqtt/deviceId\",1335615099)], null),null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"deviceId\",\"deviceId\",1909987208)], null),cljs.core.PersistentVector.EMPTY,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"fn\",\"cljs.core/fn\",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"map?\",\"cljs.core/map?\",-1390345523,null),new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null))),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"fn\",\"cljs.core/fn\",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\"cljs.core\",\"contains?\",\"cljs.core/contains?\",-976526835,null),new cljs.core.Symbol(null,\"%\",\"%\",-950237169,null),new cljs.core.Keyword(null,\"deviceId\",\"deviceId\",1909987208)))], null),null]))], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"keys\",\"cljs.spec.alpha/keys\",1109346032,null),new cljs.core.Keyword(null,\"req-un\",\"req-un\",1074571008),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"deviceId\",\"huginn.mqtt/deviceId\",1335615099)], null))], null)),null,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"keys\",\"cljs.spec.alpha/keys\",1109346032,null),new cljs.core.Keyword(null,\"req-un\",\"req-un\",1074571008),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"deviceId\",\"huginn.mqtt/deviceId\",1335615099)], null))),cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null),cljs.core.string_QMARK_,null,null),new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null),null,null,null));\n/**\n * google give each device two channeles, a state channel (the config channel)\n *   and a telemetry channel (the one that we push all our data over). The name of\n *   these channels are determined by google iot core.\n */\nhuginn.mqtt.config_chan = (function huginn$mqtt$config_chan(p__18794){\nvar map__18795 = p__18794;\nvar map__18795__$1 = ((((!((map__18795 == null)))?(((((map__18795.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__18795.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__18795):map__18795);\nvar opts = map__18795__$1;\nvar deviceId = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__18795__$1,new cljs.core.Keyword(null,\"deviceId\",\"deviceId\",1909987208));\nreturn [\"/devices/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(deviceId),\"/config\"].join('');\n});\ncljs.spec.alpha.def_impl(new cljs.core.Symbol(\"huginn.mqtt\",\"client-handlers\",\"huginn.mqtt/client-handlers\",1114981143,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"fspec\",\"cljs.spec.alpha/fspec\",-1289128341,null),new cljs.core.Keyword(null,\"args\",\"args\",1315556576),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"success-fn\",\"success-fn\",-506864067),new cljs.core.Symbol(\"cljs.core\",\"fn?\",\"cljs.core/fn?\",71876239,null),new cljs.core.Keyword(null,\"fail\",\"fail\",1706214930),new cljs.core.Symbol(\"cljs.core\",\"fn?\",\"cljs.core/fn?\",71876239,null),new cljs.core.Keyword(null,\"send\",\"send\",-652151114),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(null,\"recv\",\"recv\",558628610),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264))),cljs.spec.alpha.fspec_impl(cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"success-fn\",\"success-fn\",-506864067),new cljs.core.Symbol(\"cljs.core\",\"fn?\",\"cljs.core/fn?\",71876239,null),new cljs.core.Keyword(null,\"fail\",\"fail\",1706214930),new cljs.core.Symbol(\"cljs.core\",\"fn?\",\"cljs.core/fn?\",71876239,null),new cljs.core.Keyword(null,\"send\",\"send\",-652151114),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(null,\"recv\",\"recv\",558628610),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264)),cljs.spec.alpha.cat_impl(new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"success-fn\",\"success-fn\",-506864067),new cljs.core.Keyword(null,\"fail\",\"fail\",1706214930),new cljs.core.Keyword(null,\"send\",\"send\",-652151114),new cljs.core.Keyword(null,\"recv\",\"recv\",558628610)], null),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.fn_QMARK_,cljs.core.fn_QMARK_,new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264)], null),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(\"cljs.core\",\"fn?\",\"cljs.core/fn?\",71876239,null),new cljs.core.Symbol(\"cljs.core\",\"fn?\",\"cljs.core/fn?\",71876239,null),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264)], null)),null,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"success-fn\",\"success-fn\",-506864067),new cljs.core.Symbol(\"cljs.core\",\"fn?\",\"cljs.core/fn?\",71876239,null),new cljs.core.Keyword(null,\"fail\",\"fail\",1706214930),new cljs.core.Symbol(\"cljs.core\",\"fn?\",\"cljs.core/fn?\",71876239,null),new cljs.core.Keyword(null,\"send\",\"send\",-652151114),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(null,\"recv\",\"recv\",558628610),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264)),cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null),cljs.core.any_QMARK_,null,null),new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null),null,null,null));\n/**\n * builds a map of handels to attach to the mqtt object\n */\nhuginn.mqtt.client_handlers = (function huginn$mqtt$client_handlers(success_fn,fail,send,recv){\nreturn new cljs.core.PersistentArrayMap(null, 5, [\"connect\",(function (success){\nif(cljs.core.truth_(success)){\nreturn (success_fn.cljs$core$IFn$_invoke$arity$0 ? success_fn.cljs$core$IFn$_invoke$arity$0() : success_fn.call(null));\n} else {\ntaoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"debug\",\"debug\",-1608172596),\"huginn.mqtt\",\"*cider-repl src/huginn:localhost:41213(clj)*\",84,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay((function (){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [\"client connection failure\"], null);\n}),null)),null,-796788212);\n\nreturn (fail.cljs$core$IFn$_invoke$arity$0 ? fail.cljs$core$IFn$_invoke$arity$0() : fail.call(null));\n}\n}),\"close\",(function (){\nreturn null;\n}),\"reconnect\",(function (){\nreturn taoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"info\",\"info\",-317069002),\"huginn.mqtt\",\"*cider-repl src/huginn:localhost:41213(clj)*\",87,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay((function (){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [\"reconnecting\"], null);\n}),null)),null,616598726);\n}),\"error\",(function (err){\nreturn taoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"error\",\"error\",-978969032),\"huginn.mqtt\",\"*cider-repl src/huginn:localhost:41213(clj)*\",88,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay((function (){\nreturn new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [\"error: \",err], null);\n}),null)),null,994838751);\n}),\"message\",(function (topic,message,packet){\nvar c__15660__auto__ = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run(((function (c__15660__auto__){\nreturn (function (){\nvar f__15661__auto__ = (function (){var switch__15468__auto__ = ((function (c__15660__auto__){\nreturn (function (state_18803){\nvar state_val_18804 = (state_18803[(1)]);\nif((state_val_18804 === (1))){\nvar inst_18797 = [new cljs.core.Keyword(null,\"topic\",\"topic\",-1960480691),new cljs.core.Keyword(null,\"message\",\"message\",-406056002),new cljs.core.Keyword(null,\"packet\",\"packet\",-533558081)];\nvar inst_18798 = [topic,message,packet];\nvar inst_18799 = cljs.core.PersistentHashMap.fromArrays(inst_18797,inst_18798);\nvar state_18803__$1 = state_18803;\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_18803__$1,(2),recv,inst_18799);\n} else {\nif((state_val_18804 === (2))){\nvar inst_18801 = (state_18803[(2)]);\nvar state_18803__$1 = state_18803;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_18803__$1,inst_18801);\n} else {\nreturn null;\n}\n}\n});})(c__15660__auto__))\n;\nreturn ((function (switch__15468__auto__,c__15660__auto__){\nreturn (function() {\nvar huginn$mqtt$client_handlers_$_state_machine__15469__auto__ = null;\nvar huginn$mqtt$client_handlers_$_state_machine__15469__auto____0 = (function (){\nvar statearr_18805 = [null,null,null,null,null,null,null];\n(statearr_18805[(0)] = huginn$mqtt$client_handlers_$_state_machine__15469__auto__);\n\n(statearr_18805[(1)] = (1));\n\nreturn statearr_18805;\n});\nvar huginn$mqtt$client_handlers_$_state_machine__15469__auto____1 = (function (state_18803){\nwhile(true){\nvar ret_value__15470__auto__ = (function (){try{while(true){\nvar result__15471__auto__ = switch__15468__auto__(state_18803);\nif(cljs.core.keyword_identical_QMARK_(result__15471__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\ncontinue;\n} else {\nreturn result__15471__auto__;\n}\nbreak;\n}\n}catch (e18806){if((e18806 instanceof Object)){\nvar ex__15472__auto__ = e18806;\nvar statearr_18807_18979 = state_18803;\n(statearr_18807_18979[(5)] = ex__15472__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_18803);\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nthrow e18806;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__15470__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\nvar G__18980 = state_18803;\nstate_18803 = G__18980;\ncontinue;\n} else {\nreturn ret_value__15470__auto__;\n}\nbreak;\n}\n});\nhuginn$mqtt$client_handlers_$_state_machine__15469__auto__ = function(state_18803){\nswitch(arguments.length){\ncase 0:\nreturn huginn$mqtt$client_handlers_$_state_machine__15469__auto____0.call(this);\ncase 1:\nreturn huginn$mqtt$client_handlers_$_state_machine__15469__auto____1.call(this,state_18803);\n}\nthrow(new Error('Invalid arity: ' + arguments.length));\n};\nhuginn$mqtt$client_handlers_$_state_machine__15469__auto__.cljs$core$IFn$_invoke$arity$0 = huginn$mqtt$client_handlers_$_state_machine__15469__auto____0;\nhuginn$mqtt$client_handlers_$_state_machine__15469__auto__.cljs$core$IFn$_invoke$arity$1 = huginn$mqtt$client_handlers_$_state_machine__15469__auto____1;\nreturn huginn$mqtt$client_handlers_$_state_machine__15469__auto__;\n})()\n;})(switch__15468__auto__,c__15660__auto__))\n})();\nvar state__15662__auto__ = (function (){var statearr_18808 = (f__15661__auto__.cljs$core$IFn$_invoke$arity$0 ? f__15661__auto__.cljs$core$IFn$_invoke$arity$0() : f__15661__auto__.call(null));\n(statearr_18808[(6)] = c__15660__auto__);\n\nreturn statearr_18808;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__15662__auto__);\n});})(c__15660__auto__))\n);\n\nreturn c__15660__auto__;\n})], null);\n});\n/**\n * takes a map of handlers and attaches them to the mqtt object\n */\nhuginn.mqtt.add_handlers = (function huginn$mqtt$add_handlers(client,handlers){\nvar seq__18809 = cljs.core.seq(handlers);\nvar chunk__18810 = null;\nvar count__18811 = (0);\nvar i__18812 = (0);\nwhile(true){\nif((i__18812 < count__18811)){\nvar vec__18813 = chunk__18810.cljs$core$IIndexed$_nth$arity$2(null,i__18812);\nvar key = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__18813,(0),null);\nvar hand = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__18813,(1),null);\nclient.on(key,hand);\n\n\nvar G__18981 = seq__18809;\nvar G__18982 = chunk__18810;\nvar G__18983 = count__18811;\nvar G__18984 = (i__18812 + (1));\nseq__18809 = G__18981;\nchunk__18810 = G__18982;\ncount__18811 = G__18983;\ni__18812 = G__18984;\ncontinue;\n} else {\nvar temp__5457__auto__ = cljs.core.seq(seq__18809);\nif(temp__5457__auto__){\nvar seq__18809__$1 = temp__5457__auto__;\nif(cljs.core.chunked_seq_QMARK_(seq__18809__$1)){\nvar c__4351__auto__ = cljs.core.chunk_first(seq__18809__$1);\nvar G__18985 = cljs.core.chunk_rest(seq__18809__$1);\nvar G__18986 = c__4351__auto__;\nvar G__18987 = cljs.core.count(c__4351__auto__);\nvar G__18988 = (0);\nseq__18809 = G__18985;\nchunk__18810 = G__18986;\ncount__18811 = G__18987;\ni__18812 = G__18988;\ncontinue;\n} else {\nvar vec__18816 = cljs.core.first(seq__18809__$1);\nvar key = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__18816,(0),null);\nvar hand = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__18816,(1),null);\nclient.on(key,hand);\n\n\nvar G__18989 = cljs.core.next(seq__18809__$1);\nvar G__18990 = null;\nvar G__18991 = (0);\nvar G__18992 = (0);\nseq__18809 = G__18989;\nchunk__18810 = G__18990;\ncount__18811 = G__18991;\ni__18812 = G__18992;\ncontinue;\n}\n} else {\nreturn null;\n}\n}\nbreak;\n}\n});\ncljs.spec.alpha.def_impl(new cljs.core.Symbol(\"huginn.mqtt\",\"build-client\",\"huginn.mqtt/build-client\",-620852627,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"fspec\",\"cljs.spec.alpha/fspec\",-1289128341,null),new cljs.core.Keyword(null,\"args\",\"args\",1315556576),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891))),cljs.spec.alpha.fspec_impl(cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891)),cljs.spec.alpha.cat_impl(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"opts\",\"opts\",155075701)], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891)], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891)], null)),null,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891)),cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null),cljs.core.any_QMARK_,null,null),new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null),null,null,null));\nhuginn.mqtt.build_client = (function huginn$mqtt$build_client(opts){\n\nvar conn_args = huginn.jwt.google_iot_conn_args(opts);\nvar client = (new shadow.js.shim.module$gcic_mqtt_client(conn_args));\nreturn new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,\"client\",\"client\",-1323448117),client], null);\n});\ncljs.spec.alpha.def_impl(new cljs.core.Symbol(\"huginn.mqtt\",\"init-client\",\"huginn.mqtt/init-client\",-283765885,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"fspec\",\"cljs.spec.alpha/fspec\",-1289128341,null),new cljs.core.Keyword(null,\"args\",\"args\",1315556576),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(null,\"send\",\"send\",-652151114),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(null,\"recv\",\"recv\",558628610),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264)),new cljs.core.Keyword(null,\"ret\",\"ret\",-468222814),new cljs.core.Symbol(\"promesa.core\",\"promise?\",\"promesa.core/promise?\",-1893544292,null)),cljs.spec.alpha.fspec_impl(cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(null,\"send\",\"send\",-652151114),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(null,\"recv\",\"recv\",558628610),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264)),cljs.spec.alpha.cat_impl(new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(null,\"send\",\"send\",-652151114),new cljs.core.Keyword(null,\"recv\",\"recv\",558628610)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264)], null)),null,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(null,\"send\",\"send\",-652151114),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(null,\"recv\",\"recv\",558628610),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264)),cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(new cljs.core.Symbol(\"promesa.core\",\"promise?\",\"promesa.core/promise?\",-1893544292,null),promesa.core.promise_QMARK_,null,null),new cljs.core.Symbol(\"promesa.core\",\"promise?\",\"promesa.core/promise?\",-1893544292,null),null,null,null));\nhuginn.mqtt.init_client = (function huginn$mqtt$init_client(opts,send,recv){\n\nreturn promesa.core.promise((function (resolve,reject){\nvar map__18819 = huginn.mqtt.build_client(opts);\nvar map__18819__$1 = ((((!((map__18819 == null)))?(((((map__18819.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__18819.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__18819):map__18819);\nvar init = map__18819__$1;\nvar client = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__18819__$1,new cljs.core.Keyword(null,\"client\",\"client\",-1323448117));\nvar handlers = huginn.mqtt.client_handlers(((function (map__18819,map__18819__$1,init,client){\nreturn (function (){\nreturn (resolve.cljs$core$IFn$_invoke$arity$1 ? resolve.cljs$core$IFn$_invoke$arity$1(client) : resolve.call(null,client));\n});})(map__18819,map__18819__$1,init,client))\n,((function (map__18819,map__18819__$1,init,client){\nreturn (function (){\nvar G__18821 = new cljs.core.Keyword(null,\"client-fail\",\"client-fail\",1564298304);\nreturn (reject.cljs$core$IFn$_invoke$arity$1 ? reject.cljs$core$IFn$_invoke$arity$1(G__18821) : reject.call(null,G__18821));\n});})(map__18819,map__18819__$1,init,client))\n,send,recv);\ntaoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"debug\",\"debug\",-1608172596),\"huginn.mqtt\",\"*cider-repl src/huginn:localhost:41213(clj)*\",134,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay(((function (map__18819,map__18819__$1,init,client,handlers){\nreturn (function (){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [\"subscribe\"], null);\n});})(map__18819,map__18819__$1,init,client,handlers))\n,null)),null,1832757774);\n\nclient.subscribe(huginn.mqtt.config_chan(opts));\n\nreturn huginn.mqtt.add_handlers(client,handlers);\n}));\n});\n/**\n * builds the prefix of the actual values being sent\n *   (str (payload-root config) sensor-name /  sensor-value)\n */\nhuginn.mqtt.payload_root = (function huginn$mqtt$payload_root(p__18822){\nvar map__18823 = p__18822;\nvar map__18823__$1 = ((((!((map__18823 == null)))?(((((map__18823.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__18823.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__18823):map__18823);\nvar opts = map__18823__$1;\nvar registryId = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__18823__$1,new cljs.core.Keyword(null,\"registryId\",\"registryId\",-1767694006));\nvar userId = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__18823__$1,new cljs.core.Keyword(null,\"userId\",\"userId\",575594135));\nvar deviceId = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__18823__$1,new cljs.core.Keyword(null,\"deviceId\",\"deviceId\",1909987208));\nreturn [cljs.core.str.cljs$core$IFn$_invoke$arity$1(registryId),\"/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(userId),\"/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(deviceId),\"-payload\"].join('');\n});\ncljs.spec.alpha.def_impl(new cljs.core.Symbol(\"huginn.mqtt\",\"mqtt-topic\",\"huginn.mqtt/mqtt-topic\",-2087820524,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"fspec\",\"cljs.spec.alpha/fspec\",-1289128341,null),new cljs.core.Keyword(null,\"args\",\"args\",1315556576),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(null,\"msg-type\",\"msg-type\",-2132567822),new cljs.core.Keyword(\"huginn.mqtt\",\"topic-type\",\"huginn.mqtt/topic-type\",-1269163830)),new cljs.core.Keyword(null,\"ret\",\"ret\",-468222814),new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null)),cljs.spec.alpha.fspec_impl(cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(null,\"msg-type\",\"msg-type\",-2132567822),new cljs.core.Keyword(\"huginn.mqtt\",\"topic-type\",\"huginn.mqtt/topic-type\",-1269163830)),cljs.spec.alpha.cat_impl(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(null,\"msg-type\",\"msg-type\",-2132567822)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(\"huginn.mqtt\",\"topic-type\",\"huginn.mqtt/topic-type\",-1269163830)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(\"huginn.mqtt\",\"topic-type\",\"huginn.mqtt/topic-type\",-1269163830)], null)),null,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(null,\"msg-type\",\"msg-type\",-2132567822),new cljs.core.Keyword(\"huginn.mqtt\",\"topic-type\",\"huginn.mqtt/topic-type\",-1269163830)),cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null),cljs.core.string_QMARK_,null,null),new cljs.core.Symbol(\"cljs.core\",\"string?\",\"cljs.core/string?\",-2072921719,null),null,null,null));\n/**\n * msg-type can be 'state' for state updates\n * or 'events' to publish telemetry\n */\nhuginn.mqtt.mqtt_topic = (function huginn$mqtt$mqtt_topic(p__18825,msg_type){\nvar map__18826 = p__18825;\nvar map__18826__$1 = ((((!((map__18826 == null)))?(((((map__18826.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__18826.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__18826):map__18826);\nvar opts = map__18826__$1;\nvar deviceId = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__18826__$1,new cljs.core.Keyword(null,\"deviceId\",\"deviceId\",1909987208));\nreturn [\"/devices/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(deviceId),\"/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(msg_type)].join('');\n});\ncljs.spec.alpha.def_impl(new cljs.core.Symbol(\"huginn.mqtt\",\"prep-temps\",\"huginn.mqtt/prep-temps\",-1223395116,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"fspec\",\"cljs.spec.alpha/fspec\",-1289128341,null),new cljs.core.Keyword(null,\"args\",\"args\",1315556576),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(null,\"data\",\"data\",-232669377),new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null)),new cljs.core.Keyword(null,\"ret\",\"ret\",-468222814),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"coll-of\",\"cljs.spec.alpha/coll-of\",1019430407,null),new cljs.core.Keyword(\"huginn.mqtt\",\"mqtt-packet\",\"huginn.mqtt/mqtt-packet\",1651733234))),cljs.spec.alpha.fspec_impl(cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(null,\"data\",\"data\",-232669377),new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null)),cljs.spec.alpha.cat_impl(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(null,\"data\",\"data\",-232669377)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),cljs.core.any_QMARK_], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null)], null)),null,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(null,\"data\",\"data\",-232669377),new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null)),cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"coll-of\",\"cljs.spec.alpha/coll-of\",1019430407,null),new cljs.core.Keyword(\"huginn.mqtt\",\"mqtt-packet\",\"huginn.mqtt/mqtt-packet\",1651733234)),cljs.spec.alpha.every_impl.cljs$core$IFn$_invoke$arity$4(new cljs.core.Keyword(\"huginn.mqtt\",\"mqtt-packet\",\"huginn.mqtt/mqtt-packet\",1651733234),new cljs.core.Keyword(\"huginn.mqtt\",\"mqtt-packet\",\"huginn.mqtt/mqtt-packet\",1651733234),new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(\"cljs.spec.alpha\",\"kind-form\",\"cljs.spec.alpha/kind-form\",-1047104697),null,new cljs.core.Keyword(\"cljs.spec.alpha\",\"cpred\",\"cljs.spec.alpha/cpred\",-693471218),(function (G__18828){\nreturn cljs.core.coll_QMARK_(G__18828);\n}),new cljs.core.Keyword(\"cljs.spec.alpha\",\"conform-all\",\"cljs.spec.alpha/conform-all\",45201917),true,new cljs.core.Keyword(\"cljs.spec.alpha\",\"describe\",\"cljs.spec.alpha/describe\",1883026911),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"coll-of\",\"cljs.spec.alpha/coll-of\",1019430407,null),new cljs.core.Keyword(\"huginn.mqtt\",\"mqtt-packet\",\"huginn.mqtt/mqtt-packet\",1651733234))], null),null),null,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"coll-of\",\"cljs.spec.alpha/coll-of\",1019430407,null),new cljs.core.Keyword(\"huginn.mqtt\",\"mqtt-packet\",\"huginn.mqtt/mqtt-packet\",1651733234)),null,null,null));\n/**\n * pulls the data out of the systeminformation library and wrapping them up\n *   to be sent into mqtt\n */\nhuginn.mqtt.prep_temps = (function huginn$mqtt$prep_temps(opts,data){\nvar pr = huginn.mqtt.payload_root(opts);\nvar cores_raw = cljs.core.js__GT_clj.cljs$core$IFn$_invoke$arity$1(data.cores);\nvar cores = cljs.core.map_indexed.cljs$core$IFn$_invoke$arity$2(((function (pr,cores_raw){\nreturn (function (index,value){\nreturn new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,\"payload\",\"payload\",-383036092),[cljs.core.str.cljs$core$IFn$_invoke$arity$1(pr),\"-core-temp-\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(index),\"/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1([cljs.core.str.cljs$core$IFn$_invoke$arity$1(value)].join(''))].join(''),new cljs.core.Keyword(null,\"subfolder\",\"subfolder\",1044158439),[\"metrics/core-temp-\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(index)].join(''),new cljs.core.Keyword(null,\"qos\",\"qos\",-2124292319),(1),new cljs.core.Keyword(null,\"ts\",\"ts\",1617209904),huginn.jwt.round_now()], null);\n});})(pr,cores_raw))\n,cores_raw);\nvar main = (cljs.core.truth_(data.main)?new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,\"payload\",\"payload\",-383036092),[cljs.core.str.cljs$core$IFn$_invoke$arity$1(pr),\"-core-temp-main/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1([cljs.core.str.cljs$core$IFn$_invoke$arity$1(data.main)].join(''))].join(''),new cljs.core.Keyword(null,\"subfolder\",\"subfolder\",1044158439),\"metrics/core-temp-main\",new cljs.core.Keyword(null,\"qos\",\"qos\",-2124292319),(1),new cljs.core.Keyword(null,\"ts\",\"ts\",1617209904),huginn.jwt.round_now()], null):null);\nvar max = (cljs.core.truth_(data.max)?new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,\"payload\",\"payload\",-383036092),[cljs.core.str.cljs$core$IFn$_invoke$arity$1(pr),\"-core-temp-max/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1([cljs.core.str.cljs$core$IFn$_invoke$arity$1(data.max)].join(''))].join(''),new cljs.core.Keyword(null,\"subfolder\",\"subfolder\",1044158439),\"metrics/core-temp-max\",new cljs.core.Keyword(null,\"qos\",\"qos\",-2124292319),(1),new cljs.core.Keyword(null,\"ts\",\"ts\",1617209904),huginn.jwt.round_now()], null):null);\nreturn cljs.core.concat.cljs$core$IFn$_invoke$arity$variadic(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [main], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [max], null),cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cores], 0));\n});\nhuginn.mqtt.stop = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(false);\ncljs.spec.alpha.def_impl(new cljs.core.Symbol(\"huginn.mqtt\",\"publish-one\",\"huginn.mqtt/publish-one\",1981166109,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"fspec\",\"cljs.spec.alpha/fspec\",-1289128341,null),new cljs.core.Keyword(null,\"args\",\"args\",1315556576),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"client\",\"client\",-1323448117),new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null),new cljs.core.Keyword(null,\"packet\",\"packet\",-533558081),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"or\",\"cljs.spec.alpha/or\",-831679639,null),new cljs.core.Keyword(null,\"nil\",\"nil\",99600501),new cljs.core.Symbol(\"cljs.core\",\"nil?\",\"cljs.core/nil?\",945071861,null),new cljs.core.Keyword(null,\"value\",\"value\",305978217),new cljs.core.Keyword(\"huginn.mqtt\",\"mqtt-packet\",\"huginn.mqtt/mqtt-packet\",1651733234)))),cljs.spec.alpha.fspec_impl(cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"client\",\"client\",-1323448117),new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null),new cljs.core.Keyword(null,\"packet\",\"packet\",-533558081),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"or\",\"cljs.spec.alpha/or\",-831679639,null),new cljs.core.Keyword(null,\"nil\",\"nil\",99600501),new cljs.core.Symbol(\"cljs.core\",\"nil?\",\"cljs.core/nil?\",945071861,null),new cljs.core.Keyword(null,\"value\",\"value\",305978217),new cljs.core.Keyword(\"huginn.mqtt\",\"mqtt-packet\",\"huginn.mqtt/mqtt-packet\",1651733234))),cljs.spec.alpha.cat_impl(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"client\",\"client\",-1323448117),new cljs.core.Keyword(null,\"packet\",\"packet\",-533558081)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.any_QMARK_,cljs.spec.alpha.or_spec_impl(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"nil\",\"nil\",99600501),new cljs.core.Keyword(null,\"value\",\"value\",305978217)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(\"cljs.core\",\"nil?\",\"cljs.core/nil?\",945071861,null),new cljs.core.Keyword(\"huginn.mqtt\",\"mqtt-packet\",\"huginn.mqtt/mqtt-packet\",1651733234)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.nil_QMARK_,new cljs.core.Keyword(\"huginn.mqtt\",\"mqtt-packet\",\"huginn.mqtt/mqtt-packet\",1651733234)], null),null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"or\",\"cljs.spec.alpha/or\",-831679639,null),new cljs.core.Keyword(null,\"nil\",\"nil\",99600501),new cljs.core.Symbol(\"cljs.core\",\"nil?\",\"cljs.core/nil?\",945071861,null),new cljs.core.Keyword(null,\"value\",\"value\",305978217),new cljs.core.Keyword(\"huginn.mqtt\",\"mqtt-packet\",\"huginn.mqtt/mqtt-packet\",1651733234))], null)),null,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"client\",\"client\",-1323448117),new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null),new cljs.core.Keyword(null,\"packet\",\"packet\",-533558081),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"or\",\"cljs.spec.alpha/or\",-831679639,null),new cljs.core.Keyword(null,\"nil\",\"nil\",99600501),new cljs.core.Symbol(\"cljs.core\",\"nil?\",\"cljs.core/nil?\",945071861,null),new cljs.core.Keyword(null,\"value\",\"value\",305978217),new cljs.core.Keyword(\"huginn.mqtt\",\"mqtt-packet\",\"huginn.mqtt/mqtt-packet\",1651733234))),cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null),cljs.core.any_QMARK_,null,null),new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null),null,null,null));\n/**\n * Publises one mqtt packet to the client\n */\nhuginn.mqtt.publish_one = (function huginn$mqtt$publish_one(client,p__18829){\nvar map__18830 = p__18829;\nvar map__18830__$1 = ((((!((map__18830 == null)))?(((((map__18830.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__18830.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__18830):map__18830);\nvar p = map__18830__$1;\nvar topic = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__18830__$1,new cljs.core.Keyword(null,\"topic\",\"topic\",-1960480691));\nvar payload = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__18830__$1,new cljs.core.Keyword(null,\"payload\",\"payload\",-383036092));\nvar qos = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__18830__$1,new cljs.core.Keyword(null,\"qos\",\"qos\",-2124292319));\nif(cljs.core.truth_(p)){\nreturn client.publishEvent(payload,(1),topic);\n} else {\nreturn null;\n}\n});\n/**\n * main loop that pushes packets added to the send-chan to google iot core\n */\nhuginn.mqtt.publisher = (function huginn$mqtt$publisher(client_atom,send_chan){\nvar c__15660__auto__ = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run(((function (c__15660__auto__){\nreturn (function (){\nvar f__15661__auto__ = (function (){var switch__15468__auto__ = ((function (c__15660__auto__){\nreturn (function (state_18841){\nvar state_val_18842 = (state_18841[(1)]);\nif((state_val_18842 === (1))){\nvar state_18841__$1 = state_18841;\nvar statearr_18843_18997 = state_18841__$1;\n(statearr_18843_18997[(2)] = null);\n\n(statearr_18843_18997[(1)] = (2));\n\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nif((state_val_18842 === (2))){\nvar state_18841__$1 = state_18841;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_18841__$1,(4),send_chan);\n} else {\nif((state_val_18842 === (3))){\nvar inst_18839 = (state_18841[(2)]);\nvar state_18841__$1 = state_18841;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_18841__$1,inst_18839);\n} else {\nif((state_val_18842 === (4))){\nvar inst_18834 = (state_18841[(2)]);\nvar inst_18835 = cljs.core.deref(client_atom);\nvar inst_18836 = huginn.mqtt.publish_one(inst_18835,inst_18834);\nvar state_18841__$1 = (function (){var statearr_18844 = state_18841;\n(statearr_18844[(7)] = inst_18836);\n\nreturn statearr_18844;\n})();\nvar statearr_18845_18998 = state_18841__$1;\n(statearr_18845_18998[(2)] = null);\n\n(statearr_18845_18998[(1)] = (2));\n\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nreturn null;\n}\n}\n}\n}\n});})(c__15660__auto__))\n;\nreturn ((function (switch__15468__auto__,c__15660__auto__){\nreturn (function() {\nvar huginn$mqtt$publisher_$_state_machine__15469__auto__ = null;\nvar huginn$mqtt$publisher_$_state_machine__15469__auto____0 = (function (){\nvar statearr_18846 = [null,null,null,null,null,null,null,null];\n(statearr_18846[(0)] = huginn$mqtt$publisher_$_state_machine__15469__auto__);\n\n(statearr_18846[(1)] = (1));\n\nreturn statearr_18846;\n});\nvar huginn$mqtt$publisher_$_state_machine__15469__auto____1 = (function (state_18841){\nwhile(true){\nvar ret_value__15470__auto__ = (function (){try{while(true){\nvar result__15471__auto__ = switch__15468__auto__(state_18841);\nif(cljs.core.keyword_identical_QMARK_(result__15471__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\ncontinue;\n} else {\nreturn result__15471__auto__;\n}\nbreak;\n}\n}catch (e18847){if((e18847 instanceof Object)){\nvar ex__15472__auto__ = e18847;\nvar statearr_18848_18999 = state_18841;\n(statearr_18848_18999[(5)] = ex__15472__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_18841);\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nthrow e18847;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__15470__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\nvar G__19000 = state_18841;\nstate_18841 = G__19000;\ncontinue;\n} else {\nreturn ret_value__15470__auto__;\n}\nbreak;\n}\n});\nhuginn$mqtt$publisher_$_state_machine__15469__auto__ = function(state_18841){\nswitch(arguments.length){\ncase 0:\nreturn huginn$mqtt$publisher_$_state_machine__15469__auto____0.call(this);\ncase 1:\nreturn huginn$mqtt$publisher_$_state_machine__15469__auto____1.call(this,state_18841);\n}\nthrow(new Error('Invalid arity: ' + arguments.length));\n};\nhuginn$mqtt$publisher_$_state_machine__15469__auto__.cljs$core$IFn$_invoke$arity$0 = huginn$mqtt$publisher_$_state_machine__15469__auto____0;\nhuginn$mqtt$publisher_$_state_machine__15469__auto__.cljs$core$IFn$_invoke$arity$1 = huginn$mqtt$publisher_$_state_machine__15469__auto____1;\nreturn huginn$mqtt$publisher_$_state_machine__15469__auto__;\n})()\n;})(switch__15468__auto__,c__15660__auto__))\n})();\nvar state__15662__auto__ = (function (){var statearr_18849 = (f__15661__auto__.cljs$core$IFn$_invoke$arity$0 ? f__15661__auto__.cljs$core$IFn$_invoke$arity$0() : f__15661__auto__.call(null));\n(statearr_18849[(6)] = c__15660__auto__);\n\nreturn statearr_18849;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__15662__auto__);\n});})(c__15660__auto__))\n);\n\nreturn c__15660__auto__;\n});\n/**\n * loops and refreshs the client atom every token experation.\n *   Mqtt requires that you refresh your token frequently (less then 20 mins)\n */\nhuginn.mqtt.client_refresher = (function huginn$mqtt$client_refresher(client_atom,p__18850,send,recv){\nvar map__18851 = p__18850;\nvar map__18851__$1 = ((((!((map__18851 == null)))?(((((map__18851.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__18851.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__18851):map__18851);\nvar opts = map__18851__$1;\nvar tokenExpMins = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__18851__$1,new cljs.core.Keyword(null,\"tokenExpMins\",\"tokenExpMins\",-1638711857));\nvar delayMs = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__18851__$1,new cljs.core.Keyword(null,\"delayMs\",\"delayMs\",-1017330168));\nvar client_send_chan = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$0();\nvar client_mixer = cljs.core.async.mix(client_send_chan);\ncljs.core.async.admix(client_mixer,send);\n\nvar c__15660__auto__ = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run(((function (c__15660__auto__,client_send_chan,client_mixer,map__18851,map__18851__$1,opts,tokenExpMins,delayMs){\nreturn (function (){\nvar f__15661__auto__ = (function (){var switch__15468__auto__ = ((function (c__15660__auto__,client_send_chan,client_mixer,map__18851,map__18851__$1,opts,tokenExpMins,delayMs){\nreturn (function (state_18876){\nvar state_val_18877 = (state_18876[(1)]);\nif((state_val_18877 === (1))){\nvar state_18876__$1 = state_18876;\nvar statearr_18878_19004 = state_18876__$1;\n(statearr_18878_19004[(2)] = null);\n\n(statearr_18878_19004[(1)] = (2));\n\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nif((state_val_18877 === (2))){\nvar inst_18854 = (tokenExpMins * (1000));\nvar inst_18855 = (inst_18854 * (60));\nvar inst_18856 = cljs.core.async.timeout(inst_18855);\nvar state_18876__$1 = state_18876;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_18876__$1,(4),inst_18856);\n} else {\nif((state_val_18877 === (3))){\nvar inst_18874 = (state_18876[(2)]);\nvar state_18876__$1 = state_18876;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_18876__$1,inst_18874);\n} else {\nif((state_val_18877 === (4))){\nvar inst_18858 = (state_18876[(2)]);\nvar inst_18859 = (function (){var wait = inst_18858;\nreturn ((function (wait,inst_18858,state_val_18877,c__15660__auto__,client_send_chan,client_mixer,map__18851,map__18851__$1,opts,tokenExpMins,delayMs){\nreturn (function (){\nreturn new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [\"\\tRefreshing token after \",((tokenExpMins * (1000)) * (60)),\"ms\"], null);\n});\n;})(wait,inst_18858,state_val_18877,c__15660__auto__,client_send_chan,client_mixer,map__18851,map__18851__$1,opts,tokenExpMins,delayMs))\n})();\nvar inst_18860 = (new cljs.core.Delay(inst_18859,null));\nvar inst_18861 = taoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"info\",\"info\",-317069002),\"huginn.mqtt\",\"*cider-repl src/huginn:localhost:41213(clj)*\",214,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),inst_18860,null,298986055);\nvar inst_18862 = [send];\nvar inst_18863 = [new cljs.core.Keyword(null,\"pause\",\"pause\",-2095325672)];\nvar inst_18864 = [true];\nvar inst_18865 = cljs.core.PersistentHashMap.fromArrays(inst_18863,inst_18864);\nvar inst_18866 = [inst_18865];\nvar inst_18867 = cljs.core.PersistentHashMap.fromArrays(inst_18862,inst_18866);\nvar inst_18868 = cljs.core.async.toggle(client_mixer,inst_18867);\nvar inst_18869 = cljs.core.deref(client_atom);\nvar inst_18870 = (function (){var wait = inst_18858;\nreturn ((function (wait,inst_18858,inst_18859,inst_18860,inst_18861,inst_18862,inst_18863,inst_18864,inst_18865,inst_18866,inst_18867,inst_18868,inst_18869,state_val_18877,c__15660__auto__,client_send_chan,client_mixer,map__18851,map__18851__$1,opts,tokenExpMins,delayMs){\nreturn (function (){\n(cljs.core.deref(client_atom)[\"password\"] = cljs.core.clj__GT_js(huginn.jwt.create_jwt(opts)));\n\nreturn cljs.core.deref(client_atom).reconnect(((function (wait,inst_18858,inst_18859,inst_18860,inst_18861,inst_18862,inst_18863,inst_18864,inst_18865,inst_18866,inst_18867,inst_18868,inst_18869,state_val_18877,c__15660__auto__,client_send_chan,client_mixer,map__18851,map__18851__$1,opts,tokenExpMins,delayMs){\nreturn (function (){\nreturn cljs.core.async.toggle(client_mixer,cljs.core.PersistentArrayMap.createAsIfByAssoc([send,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,\"pause\",\"pause\",-2095325672),false], null)]));\n});})(wait,inst_18858,inst_18859,inst_18860,inst_18861,inst_18862,inst_18863,inst_18864,inst_18865,inst_18866,inst_18867,inst_18868,inst_18869,state_val_18877,c__15660__auto__,client_send_chan,client_mixer,map__18851,map__18851__$1,opts,tokenExpMins,delayMs))\n);\n});\n;})(wait,inst_18858,inst_18859,inst_18860,inst_18861,inst_18862,inst_18863,inst_18864,inst_18865,inst_18866,inst_18867,inst_18868,inst_18869,state_val_18877,c__15660__auto__,client_send_chan,client_mixer,map__18851,map__18851__$1,opts,tokenExpMins,delayMs))\n})();\nvar inst_18871 = inst_18869.end(({}),inst_18870);\nvar state_18876__$1 = (function (){var statearr_18879 = state_18876;\n(statearr_18879[(7)] = inst_18861);\n\n(statearr_18879[(8)] = inst_18871);\n\n(statearr_18879[(9)] = inst_18868);\n\nreturn statearr_18879;\n})();\nvar statearr_18880_19008 = state_18876__$1;\n(statearr_18880_19008[(2)] = null);\n\n(statearr_18880_19008[(1)] = (2));\n\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nreturn null;\n}\n}\n}\n}\n});})(c__15660__auto__,client_send_chan,client_mixer,map__18851,map__18851__$1,opts,tokenExpMins,delayMs))\n;\nreturn ((function (switch__15468__auto__,c__15660__auto__,client_send_chan,client_mixer,map__18851,map__18851__$1,opts,tokenExpMins,delayMs){\nreturn (function() {\nvar huginn$mqtt$client_refresher_$_state_machine__15469__auto__ = null;\nvar huginn$mqtt$client_refresher_$_state_machine__15469__auto____0 = (function (){\nvar statearr_18881 = [null,null,null,null,null,null,null,null,null,null];\n(statearr_18881[(0)] = huginn$mqtt$client_refresher_$_state_machine__15469__auto__);\n\n(statearr_18881[(1)] = (1));\n\nreturn statearr_18881;\n});\nvar huginn$mqtt$client_refresher_$_state_machine__15469__auto____1 = (function (state_18876){\nwhile(true){\nvar ret_value__15470__auto__ = (function (){try{while(true){\nvar result__15471__auto__ = switch__15468__auto__(state_18876);\nif(cljs.core.keyword_identical_QMARK_(result__15471__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\ncontinue;\n} else {\nreturn result__15471__auto__;\n}\nbreak;\n}\n}catch (e18882){if((e18882 instanceof Object)){\nvar ex__15472__auto__ = e18882;\nvar statearr_18883_19010 = state_18876;\n(statearr_18883_19010[(5)] = ex__15472__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_18876);\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nthrow e18882;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__15470__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\nvar G__19012 = state_18876;\nstate_18876 = G__19012;\ncontinue;\n} else {\nreturn ret_value__15470__auto__;\n}\nbreak;\n}\n});\nhuginn$mqtt$client_refresher_$_state_machine__15469__auto__ = function(state_18876){\nswitch(arguments.length){\ncase 0:\nreturn huginn$mqtt$client_refresher_$_state_machine__15469__auto____0.call(this);\ncase 1:\nreturn huginn$mqtt$client_refresher_$_state_machine__15469__auto____1.call(this,state_18876);\n}\nthrow(new Error('Invalid arity: ' + arguments.length));\n};\nhuginn$mqtt$client_refresher_$_state_machine__15469__auto__.cljs$core$IFn$_invoke$arity$0 = huginn$mqtt$client_refresher_$_state_machine__15469__auto____0;\nhuginn$mqtt$client_refresher_$_state_machine__15469__auto__.cljs$core$IFn$_invoke$arity$1 = huginn$mqtt$client_refresher_$_state_machine__15469__auto____1;\nreturn huginn$mqtt$client_refresher_$_state_machine__15469__auto__;\n})()\n;})(switch__15468__auto__,c__15660__auto__,client_send_chan,client_mixer,map__18851,map__18851__$1,opts,tokenExpMins,delayMs))\n})();\nvar state__15662__auto__ = (function (){var statearr_18884 = (f__15661__auto__.cljs$core$IFn$_invoke$arity$0 ? f__15661__auto__.cljs$core$IFn$_invoke$arity$0() : f__15661__auto__.call(null));\n(statearr_18884[(6)] = c__15660__auto__);\n\nreturn statearr_18884;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__15662__auto__);\n});})(c__15660__auto__,client_send_chan,client_mixer,map__18851,map__18851__$1,opts,tokenExpMins,delayMs))\n);\n\nreturn c__15660__auto__;\n});\ncljs.spec.alpha.def_impl(new cljs.core.Symbol(\"huginn.mqtt\",\"tele-chan\",\"huginn.mqtt/tele-chan\",1912072830,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"fspec\",\"cljs.spec.alpha/fspec\",-1289128341,null),new cljs.core.Keyword(null,\"args\",\"args\",1315556576),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891)),new cljs.core.Keyword(null,\"ret\",\"ret\",-468222814),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264)),cljs.spec.alpha.fspec_impl(cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891)),cljs.spec.alpha.cat_impl(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"opts\",\"opts\",155075701)], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891)], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891)], null)),null,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891)),cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),null,null),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),null,null,null));\n/**\n * takes the client opts and builds a channel with system telementry\n *   values on it (cpu tempratures specifically)\n */\nhuginn.mqtt.tele_chan = (function huginn$mqtt$tele_chan(opts){\nvar temp_chan = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$0();\nvar out_chan = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$0();\nvar c__15660__auto___19020 = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run(((function (c__15660__auto___19020,temp_chan,out_chan){\nreturn (function (){\nvar f__15661__auto__ = (function (){var switch__15468__auto__ = ((function (c__15660__auto___19020,temp_chan,out_chan){\nreturn (function (state_18899){\nvar state_val_18900 = (state_18899[(1)]);\nif((state_val_18900 === (1))){\nvar state_18899__$1 = state_18899;\nvar statearr_18901_19021 = state_18899__$1;\n(statearr_18901_19021[(2)] = null);\n\n(statearr_18901_19021[(1)] = (2));\n\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nif((state_val_18900 === (2))){\nvar inst_18887 = shadow.js.shim.module$systeminformation.cpuTemperature();\nvar inst_18888 = (function (){return ((function (inst_18887,state_val_18900,c__15660__auto___19020,temp_chan,out_chan){\nreturn (function (p1__18885_SHARP_){\nreturn huginn.mqtt.prep_temps(opts,p1__18885_SHARP_);\n});\n;})(inst_18887,state_val_18900,c__15660__auto___19020,temp_chan,out_chan))\n})();\nvar inst_18889 = (function (){return ((function (inst_18887,inst_18888,state_val_18900,c__15660__auto___19020,temp_chan,out_chan){\nreturn (function (mqtt_packets){\nvar c__15660__auto____$1 = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run(((function (c__15660__auto____$1,inst_18887,inst_18888,state_val_18900,c__15660__auto___19020,temp_chan,out_chan){\nreturn (function (){\nvar f__15661__auto__ = (function (){var switch__15468__auto__ = ((function (c__15660__auto____$1,inst_18887,inst_18888,state_val_18900,c__15660__auto___19020,temp_chan,out_chan){\nreturn (function (state_18910){\nvar state_val_18911 = (state_18910[(1)]);\nif((state_val_18911 === (1))){\nvar inst_18902 = ((1000) * (60));\nvar inst_18903 = (inst_18902 * (1));\nvar inst_18904 = cljs.core.async.timeout(inst_18903);\nvar state_18910__$1 = state_18910;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_18910__$1,(2),inst_18904);\n} else {\nif((state_val_18911 === (2))){\nvar inst_18906 = (state_18910[(2)]);\nvar state_18910__$1 = (function (){var statearr_18912 = state_18910;\n(statearr_18912[(7)] = inst_18906);\n\nreturn statearr_18912;\n})();\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_18910__$1,(3),temp_chan,mqtt_packets);\n} else {\nif((state_val_18911 === (3))){\nvar inst_18908 = (state_18910[(2)]);\nvar state_18910__$1 = state_18910;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_18910__$1,inst_18908);\n} else {\nreturn null;\n}\n}\n}\n});})(c__15660__auto____$1,inst_18887,inst_18888,state_val_18900,c__15660__auto___19020,temp_chan,out_chan))\n;\nreturn ((function (switch__15468__auto__,c__15660__auto____$1,inst_18887,inst_18888,state_val_18900,c__15660__auto___19020,temp_chan,out_chan){\nreturn (function() {\nvar huginn$mqtt$tele_chan_$_state_machine__15469__auto__ = null;\nvar huginn$mqtt$tele_chan_$_state_machine__15469__auto____0 = (function (){\nvar statearr_18913 = [null,null,null,null,null,null,null,null];\n(statearr_18913[(0)] = huginn$mqtt$tele_chan_$_state_machine__15469__auto__);\n\n(statearr_18913[(1)] = (1));\n\nreturn statearr_18913;\n});\nvar huginn$mqtt$tele_chan_$_state_machine__15469__auto____1 = (function (state_18910){\nwhile(true){\nvar ret_value__15470__auto__ = (function (){try{while(true){\nvar result__15471__auto__ = switch__15468__auto__(state_18910);\nif(cljs.core.keyword_identical_QMARK_(result__15471__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\ncontinue;\n} else {\nreturn result__15471__auto__;\n}\nbreak;\n}\n}catch (e18914){if((e18914 instanceof Object)){\nvar ex__15472__auto__ = e18914;\nvar statearr_18915_19030 = state_18910;\n(statearr_18915_19030[(5)] = ex__15472__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_18910);\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nthrow e18914;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__15470__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\nvar G__19031 = state_18910;\nstate_18910 = G__19031;\ncontinue;\n} else {\nreturn ret_value__15470__auto__;\n}\nbreak;\n}\n});\nhuginn$mqtt$tele_chan_$_state_machine__15469__auto__ = function(state_18910){\nswitch(arguments.length){\ncase 0:\nreturn huginn$mqtt$tele_chan_$_state_machine__15469__auto____0.call(this);\ncase 1:\nreturn huginn$mqtt$tele_chan_$_state_machine__15469__auto____1.call(this,state_18910);\n}\nthrow(new Error('Invalid arity: ' + arguments.length));\n};\nhuginn$mqtt$tele_chan_$_state_machine__15469__auto__.cljs$core$IFn$_invoke$arity$0 = huginn$mqtt$tele_chan_$_state_machine__15469__auto____0;\nhuginn$mqtt$tele_chan_$_state_machine__15469__auto__.cljs$core$IFn$_invoke$arity$1 = huginn$mqtt$tele_chan_$_state_machine__15469__auto____1;\nreturn huginn$mqtt$tele_chan_$_state_machine__15469__auto__;\n})()\n;})(switch__15468__auto__,c__15660__auto____$1,inst_18887,inst_18888,state_val_18900,c__15660__auto___19020,temp_chan,out_chan))\n})();\nvar state__15662__auto__ = (function (){var statearr_18916 = (f__15661__auto__.cljs$core$IFn$_invoke$arity$0 ? f__15661__auto__.cljs$core$IFn$_invoke$arity$0() : f__15661__auto__.call(null));\n(statearr_18916[(6)] = c__15660__auto____$1);\n\nreturn statearr_18916;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__15662__auto__);\n});})(c__15660__auto____$1,inst_18887,inst_18888,state_val_18900,c__15660__auto___19020,temp_chan,out_chan))\n);\n\nreturn c__15660__auto____$1;\n});\n;})(inst_18887,inst_18888,state_val_18900,c__15660__auto___19020,temp_chan,out_chan))\n})();\nvar inst_18890 = promesa.core.chain.cljs$core$IFn$_invoke$arity$variadic(inst_18887,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_18888,inst_18889], 0));\nvar state_18899__$1 = (function (){var statearr_18917 = state_18899;\n(statearr_18917[(7)] = inst_18890);\n\nreturn statearr_18917;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_18899__$1,(4),temp_chan);\n} else {\nif((state_val_18900 === (3))){\nvar inst_18897 = (state_18899[(2)]);\nvar state_18899__$1 = state_18899;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_18899__$1,inst_18897);\n} else {\nif((state_val_18900 === (4))){\nvar inst_18892 = (state_18899[(2)]);\nvar state_18899__$1 = state_18899;\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_18899__$1,(5),out_chan,inst_18892);\n} else {\nif((state_val_18900 === (5))){\nvar inst_18894 = (state_18899[(2)]);\nvar state_18899__$1 = (function (){var statearr_18918 = state_18899;\n(statearr_18918[(8)] = inst_18894);\n\nreturn statearr_18918;\n})();\nvar statearr_18919_19033 = state_18899__$1;\n(statearr_18919_19033[(2)] = null);\n\n(statearr_18919_19033[(1)] = (2));\n\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nreturn null;\n}\n}\n}\n}\n}\n});})(c__15660__auto___19020,temp_chan,out_chan))\n;\nreturn ((function (switch__15468__auto__,c__15660__auto___19020,temp_chan,out_chan){\nreturn (function() {\nvar huginn$mqtt$tele_chan_$_state_machine__15469__auto__ = null;\nvar huginn$mqtt$tele_chan_$_state_machine__15469__auto____0 = (function (){\nvar statearr_18920 = [null,null,null,null,null,null,null,null,null];\n(statearr_18920[(0)] = huginn$mqtt$tele_chan_$_state_machine__15469__auto__);\n\n(statearr_18920[(1)] = (1));\n\nreturn statearr_18920;\n});\nvar huginn$mqtt$tele_chan_$_state_machine__15469__auto____1 = (function (state_18899){\nwhile(true){\nvar ret_value__15470__auto__ = (function (){try{while(true){\nvar result__15471__auto__ = switch__15468__auto__(state_18899);\nif(cljs.core.keyword_identical_QMARK_(result__15471__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\ncontinue;\n} else {\nreturn result__15471__auto__;\n}\nbreak;\n}\n}catch (e18921){if((e18921 instanceof Object)){\nvar ex__15472__auto__ = e18921;\nvar statearr_18922_19035 = state_18899;\n(statearr_18922_19035[(5)] = ex__15472__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_18899);\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nthrow e18921;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__15470__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\nvar G__19036 = state_18899;\nstate_18899 = G__19036;\ncontinue;\n} else {\nreturn ret_value__15470__auto__;\n}\nbreak;\n}\n});\nhuginn$mqtt$tele_chan_$_state_machine__15469__auto__ = function(state_18899){\nswitch(arguments.length){\ncase 0:\nreturn huginn$mqtt$tele_chan_$_state_machine__15469__auto____0.call(this);\ncase 1:\nreturn huginn$mqtt$tele_chan_$_state_machine__15469__auto____1.call(this,state_18899);\n}\nthrow(new Error('Invalid arity: ' + arguments.length));\n};\nhuginn$mqtt$tele_chan_$_state_machine__15469__auto__.cljs$core$IFn$_invoke$arity$0 = huginn$mqtt$tele_chan_$_state_machine__15469__auto____0;\nhuginn$mqtt$tele_chan_$_state_machine__15469__auto__.cljs$core$IFn$_invoke$arity$1 = huginn$mqtt$tele_chan_$_state_machine__15469__auto____1;\nreturn huginn$mqtt$tele_chan_$_state_machine__15469__auto__;\n})()\n;})(switch__15468__auto__,c__15660__auto___19020,temp_chan,out_chan))\n})();\nvar state__15662__auto__ = (function (){var statearr_18923 = (f__15661__auto__.cljs$core$IFn$_invoke$arity$0 ? f__15661__auto__.cljs$core$IFn$_invoke$arity$0() : f__15661__auto__.call(null));\n(statearr_18923[(6)] = c__15660__auto___19020);\n\nreturn statearr_18923;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__15662__auto__);\n});})(c__15660__auto___19020,temp_chan,out_chan))\n);\n\n\nreturn out_chan;\n});\ncljs.spec.alpha.def_impl(new cljs.core.Symbol(\"huginn.mqtt\",\"sender\",\"huginn.mqtt/sender\",-581128399,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"fspec\",\"cljs.spec.alpha/fspec\",-1289128341,null),new cljs.core.Keyword(null,\"args\",\"args\",1315556576),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"topic-name\",\"topic-name\",759633328),new cljs.core.Keyword(\"huginn.mqtt\",\"topic-type\",\"huginn.mqtt/topic-type\",-1269163830),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(null,\"send\",\"send\",-652151114),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(null,\"t-chan\",\"t-chan\",-1090442551),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264))),cljs.spec.alpha.fspec_impl(cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"topic-name\",\"topic-name\",759633328),new cljs.core.Keyword(\"huginn.mqtt\",\"topic-type\",\"huginn.mqtt/topic-type\",-1269163830),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(null,\"send\",\"send\",-652151114),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(null,\"t-chan\",\"t-chan\",-1090442551),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264)),cljs.spec.alpha.cat_impl(new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"topic-name\",\"topic-name\",759633328),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(null,\"send\",\"send\",-652151114),new cljs.core.Keyword(null,\"t-chan\",\"t-chan\",-1090442551)], null),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"topic-type\",\"huginn.mqtt/topic-type\",-1269163830),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264)], null),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\"huginn.mqtt\",\"topic-type\",\"huginn.mqtt/topic-type\",-1269163830),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264)], null)),null,null),cljs.core.list(new cljs.core.Symbol(\"cljs.spec.alpha\",\"cat\",\"cljs.spec.alpha/cat\",-1471398329,null),new cljs.core.Keyword(null,\"topic-name\",\"topic-name\",759633328),new cljs.core.Keyword(\"huginn.mqtt\",\"topic-type\",\"huginn.mqtt/topic-type\",-1269163830),new cljs.core.Keyword(null,\"opts\",\"opts\",155075701),new cljs.core.Keyword(\"huginn.mqtt\",\"client-config\",\"huginn.mqtt/client-config\",239469891),new cljs.core.Keyword(null,\"send\",\"send\",-652151114),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264),new cljs.core.Keyword(null,\"t-chan\",\"t-chan\",-1090442551),new cljs.core.Keyword(\"huginn.mqtt\",\"chan\",\"huginn.mqtt/chan\",1668057264)),cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null),cljs.core.any_QMARK_,null,null),new cljs.core.Symbol(\"cljs.core\",\"any?\",\"cljs.core/any?\",-2068111842,null),null,null,null));\n/**\n * takes information for the tele-chan in the form of collections of\n *   mqtt-packets and assignes a default topic if a subfolder is set,\n *   adds a default qos. Then takes the resulting structures and puts\n *   them on to the send channel. waits for :delayMs between collections \n */\nhuginn.mqtt.sender = (function huginn$mqtt$sender(topic_name,opts,send,t_chan){\nvar c__15660__auto__ = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run(((function (c__15660__auto__){\nreturn (function (){\nvar f__15661__auto__ = (function (){var switch__15468__auto__ = ((function (c__15660__auto__){\nreturn (function (state_18948){\nvar state_val_18949 = (state_18948[(1)]);\nif((state_val_18949 === (1))){\nvar state_18948__$1 = state_18948;\nvar statearr_18950_19038 = state_18948__$1;\n(statearr_18950_19038[(2)] = null);\n\n(statearr_18950_19038[(1)] = (2));\n\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nif((state_val_18949 === (2))){\nvar state_18948__$1 = state_18948;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_18948__$1,(4),t_chan);\n} else {\nif((state_val_18949 === (3))){\nvar inst_18946 = (state_18948[(2)]);\nvar state_18948__$1 = state_18948;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_18948__$1,inst_18946);\n} else {\nif((state_val_18949 === (4))){\nvar inst_18926 = (state_18948[(2)]);\nvar inst_18927 = huginn.mqtt.mqtt_topic(opts,topic_name);\nvar inst_18928 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(\"state\",topic_name);\nvar state_18948__$1 = (function (){var statearr_18951 = state_18948;\n(statearr_18951[(7)] = inst_18926);\n\n(statearr_18951[(8)] = inst_18927);\n\nreturn statearr_18951;\n})();\nif(inst_18928){\nvar statearr_18952_19039 = state_18948__$1;\n(statearr_18952_19039[(1)] = (5));\n\n} else {\nvar statearr_18953_19040 = state_18948__$1;\n(statearr_18953_19040[(1)] = (6));\n\n}\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nif((state_val_18949 === (5))){\nvar inst_18926 = (state_18948[(7)]);\nvar inst_18927 = (state_18948[(8)]);\nvar inst_18930 = (function (){var teles = inst_18926;\nvar topic = inst_18927;\nvar qos = ({\"qos\": (1)});\nreturn ((function (teles,topic,qos,inst_18926,inst_18927,state_val_18949,c__15660__auto__){\nreturn (function (){\nreturn new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [\"pushing state\",topic], null);\n});\n;})(teles,topic,qos,inst_18926,inst_18927,state_val_18949,c__15660__auto__))\n})();\nvar inst_18931 = (new cljs.core.Delay(inst_18930,null));\nvar inst_18932 = taoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"debug\",\"debug\",-1608172596),\"huginn.mqtt\",\"*cider-repl src/huginn:localhost:41213(clj)*\",270,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),inst_18931,null,784392753);\nvar state_18948__$1 = state_18948;\nvar statearr_18954_19042 = state_18948__$1;\n(statearr_18954_19042[(2)] = inst_18932);\n\n(statearr_18954_19042[(1)] = (7));\n\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nif((state_val_18949 === (6))){\nvar state_18948__$1 = state_18948;\nvar statearr_18955_19043 = state_18948__$1;\n(statearr_18955_19043[(2)] = null);\n\n(statearr_18955_19043[(1)] = (7));\n\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nif((state_val_18949 === (7))){\nvar inst_18926 = (state_18948[(7)]);\nvar inst_18927 = (state_18948[(8)]);\nvar inst_18935 = (state_18948[(2)]);\nvar inst_18937 = (function (){var teles = inst_18926;\nvar topic = inst_18927;\nvar qos = ({\"qos\": (1)});\nreturn ((function (teles,topic,qos,inst_18926,inst_18927,inst_18935,state_val_18949,c__15660__auto__){\nreturn (function (p__18936){\nvar map__18956 = p__18936;\nvar map__18956__$1 = ((((!((map__18956 == null)))?(((((map__18956.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__18956.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__18956):map__18956);\nvar mqtt_packet = map__18956__$1;\nvar subfolder = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__18956__$1,new cljs.core.Keyword(null,\"subfolder\",\"subfolder\",1044158439));\nvar my_topic = (cljs.core.truth_(subfolder)?[cljs.core.str.cljs$core$IFn$_invoke$arity$1(topic),\"/\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(subfolder)].join(''):topic);\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(mqtt_packet,new cljs.core.Keyword(null,\"topic\",\"topic\",-1960480691),my_topic),new cljs.core.Keyword(null,\"qos\",\"qos\",-2124292319),qos);\n});\n;})(teles,topic,qos,inst_18926,inst_18927,inst_18935,state_val_18949,c__15660__auto__))\n})();\nvar inst_18938 = cljs.core.map.cljs$core$IFn$_invoke$arity$2(inst_18937,inst_18926);\nvar inst_18939 = cljs.core.async.onto_chan.cljs$core$IFn$_invoke$arity$3(send,inst_18938,false);\nvar inst_18940 = new cljs.core.Keyword(null,\"delayMs\",\"delayMs\",-1017330168).cljs$core$IFn$_invoke$arity$1(opts);\nvar inst_18941 = cljs.core.async.timeout(inst_18940);\nvar state_18948__$1 = (function (){var statearr_18958 = state_18948;\n(statearr_18958[(9)] = inst_18939);\n\n(statearr_18958[(10)] = inst_18935);\n\nreturn statearr_18958;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_18948__$1,(8),inst_18941);\n} else {\nif((state_val_18949 === (8))){\nvar inst_18943 = (state_18948[(2)]);\nvar state_18948__$1 = (function (){var statearr_18959 = state_18948;\n(statearr_18959[(11)] = inst_18943);\n\nreturn statearr_18959;\n})();\nvar statearr_18960_19044 = state_18948__$1;\n(statearr_18960_19044[(2)] = null);\n\n(statearr_18960_19044[(1)] = (2));\n\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nreturn null;\n}\n}\n}\n}\n}\n}\n}\n}\n});})(c__15660__auto__))\n;\nreturn ((function (switch__15468__auto__,c__15660__auto__){\nreturn (function() {\nvar huginn$mqtt$sender_$_state_machine__15469__auto__ = null;\nvar huginn$mqtt$sender_$_state_machine__15469__auto____0 = (function (){\nvar statearr_18961 = [null,null,null,null,null,null,null,null,null,null,null,null];\n(statearr_18961[(0)] = huginn$mqtt$sender_$_state_machine__15469__auto__);\n\n(statearr_18961[(1)] = (1));\n\nreturn statearr_18961;\n});\nvar huginn$mqtt$sender_$_state_machine__15469__auto____1 = (function (state_18948){\nwhile(true){\nvar ret_value__15470__auto__ = (function (){try{while(true){\nvar result__15471__auto__ = switch__15468__auto__(state_18948);\nif(cljs.core.keyword_identical_QMARK_(result__15471__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\ncontinue;\n} else {\nreturn result__15471__auto__;\n}\nbreak;\n}\n}catch (e18962){if((e18962 instanceof Object)){\nvar ex__15472__auto__ = e18962;\nvar statearr_18963_19045 = state_18948;\n(statearr_18963_19045[(5)] = ex__15472__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_18948);\n\nreturn new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268);\n} else {\nthrow e18962;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__15470__auto__,new cljs.core.Keyword(null,\"recur\",\"recur\",-437573268))){\nvar G__19046 = state_18948;\nstate_18948 = G__19046;\ncontinue;\n} else {\nreturn ret_value__15470__auto__;\n}\nbreak;\n}\n});\nhuginn$mqtt$sender_$_state_machine__15469__auto__ = function(state_18948){\nswitch(arguments.length){\ncase 0:\nreturn huginn$mqtt$sender_$_state_machine__15469__auto____0.call(this);\ncase 1:\nreturn huginn$mqtt$sender_$_state_machine__15469__auto____1.call(this,state_18948);\n}\nthrow(new Error('Invalid arity: ' + arguments.length));\n};\nhuginn$mqtt$sender_$_state_machine__15469__auto__.cljs$core$IFn$_invoke$arity$0 = huginn$mqtt$sender_$_state_machine__15469__auto____0;\nhuginn$mqtt$sender_$_state_machine__15469__auto__.cljs$core$IFn$_invoke$arity$1 = huginn$mqtt$sender_$_state_machine__15469__auto____1;\nreturn huginn$mqtt$sender_$_state_machine__15469__auto__;\n})()\n;})(switch__15468__auto__,c__15660__auto__))\n})();\nvar state__15662__auto__ = (function (){var statearr_18964 = (f__15661__auto__.cljs$core$IFn$_invoke$arity$0 ? f__15661__auto__.cljs$core$IFn$_invoke$arity$0() : f__15661__auto__.call(null));\n(statearr_18964[(6)] = c__15660__auto__);\n\nreturn statearr_18964;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__15662__auto__);\n});})(c__15660__auto__))\n);\n\nreturn c__15660__auto__;\n});\nhuginn.mqtt.state_send = cljs.core.partial.cljs$core$IFn$_invoke$arity$2(huginn.mqtt.sender,\"state\");\nhuginn.mqtt.tele_send = cljs.core.partial.cljs$core$IFn$_invoke$arity$2(huginn.mqtt.sender,\"events\");\nhuginn.mqtt.clean_up = (function huginn$mqtt$clean_up(p__18965){\nvar map__18966 = p__18965;\nvar map__18966__$1 = ((((!((map__18966 == null)))?(((((map__18966.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__18966.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__18966):map__18966);\nvar system = map__18966__$1;\nvar send_chan = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__18966__$1,new cljs.core.Keyword(null,\"send-chan\",\"send-chan\",1681189602));\nvar recv_chan = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__18966__$1,new cljs.core.Keyword(null,\"recv-chan\",\"recv-chan\",869238850));\nvar telemetry_chan = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__18966__$1,new cljs.core.Keyword(null,\"telemetry-chan\",\"telemetry-chan\",-1991836503));\nvar state_chan = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__18966__$1,new cljs.core.Keyword(null,\"state-chan\",\"state-chan\",-1042477017));\nvar client_atom = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__18966__$1,new cljs.core.Keyword(null,\"client-atom\",\"client-atom\",-1733084110));\ntaoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"debug\",\"debug\",-1608172596),\"huginn.mqtt\",\"*cider-repl src/huginn:localhost:41213(clj)*\",291,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay(((function (map__18966,map__18966__$1,system,send_chan,recv_chan,telemetry_chan,state_chan,client_atom){\nreturn (function (){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [\"Killing system\"], null);\n});})(map__18966,map__18966__$1,system,send_chan,recv_chan,telemetry_chan,state_chan,client_atom))\n,null)),null,454733930);\n\ncljs.core.doall.cljs$core$IFn$_invoke$arity$1(cljs.core.map.cljs$core$IFn$_invoke$arity$2(((function (map__18966,map__18966__$1,system,send_chan,recv_chan,telemetry_chan,state_chan,client_atom){\nreturn (function (c){\nreturn cljs.core.async.close_BANG_(c);\n});})(map__18966,map__18966__$1,system,send_chan,recv_chan,telemetry_chan,state_chan,client_atom))\n,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [send_chan,recv_chan,state_chan,telemetry_chan], null)));\n\ntaoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,\"debug\",\"debug\",-1608172596),\"huginn.mqtt\",\"*cider-repl src/huginn:localhost:41213(clj)*\",296,new cljs.core.Keyword(null,\"p\",\"p\",151049309),new cljs.core.Keyword(null,\"auto\",\"auto\",-566279492),(new cljs.core.Delay(((function (map__18966,map__18966__$1,system,send_chan,recv_chan,telemetry_chan,state_chan,client_atom){\nreturn (function (){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [\"killing client\"], null);\n});})(map__18966,map__18966__$1,system,send_chan,recv_chan,telemetry_chan,state_chan,client_atom))\n,null)),null,1478050394);\n\nreturn cljs.core.deref(client_atom).end();\n});\n/**\n * the heart of the system lies here.\n *   This function takes options (config/default-options works well)\n *   It returns a map\n *   This map has\n *   :send-chan A channel you can use to directly send messages of mqtt, must be of the\n *   form {:payload string? :qos #js {:qos #{0 1 2}} :topic (topics can be built with mqtt-topic)}\n *   :recv-chan has items in the form of {:topic string? :message string? :packet buffer?}\n *   :state-chan, send things of the form (coll-of {:payload string?}), onto the state channel\n *   (google publishes these values to a differnt pubsub channel then device telemetry)\n *   :telemetry-chan, sends (coll-of {:payload string?}), all the events in the collections\n *   are sent in the same batch, the same is true for stat-chan.\n *   :client-atom, contains the current version of the mqtt client. This is an atom so\n *   that the client-refersher can refresh the authentication token and swap it.\n *   this pattern also ensures only one client\n * \n *   payloads must be prefixed with a string describing where the data came (payload-root opts) will generate this for you\n */\nhuginn.mqtt.system_function = (function huginn$mqtt$system_function(opts){\nvar send = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$0();\nvar recv = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$0();\nvar kill = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(false);\nvar client_promise = huginn.mqtt.init_client(opts,send,recv);\nvar client_atom = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(null);\nvar t_chan = huginn.mqtt.tele_chan(opts);\nvar state_chan = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$0();\nreturn promesa.core.then(client_promise,((function (send,recv,kill,client_promise,client_atom,t_chan,state_chan){\nreturn (function (client){\ncljs.core.reset_BANG_(client_atom,client);\n\nhuginn.mqtt.publisher(client_atom,send);\n\n(huginn.mqtt.tele_send.cljs$core$IFn$_invoke$arity$3 ? huginn.mqtt.tele_send.cljs$core$IFn$_invoke$arity$3(opts,send,t_chan) : huginn.mqtt.tele_send.call(null,opts,send,t_chan));\n\n(huginn.mqtt.state_send.cljs$core$IFn$_invoke$arity$3 ? huginn.mqtt.state_send.cljs$core$IFn$_invoke$arity$3(opts,send,state_chan) : huginn.mqtt.state_send.call(null,opts,send,state_chan));\n\nreturn new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,\"send-chan\",\"send-chan\",1681189602),send,new cljs.core.Keyword(null,\"recv-chan\",\"recv-chan\",869238850),recv,new cljs.core.Keyword(null,\"state-chan\",\"state-chan\",-1042477017),state_chan,new cljs.core.Keyword(null,\"telemetry-chan\",\"telemetry-chan\",-1991836503),t_chan,new cljs.core.Keyword(null,\"client-atom\",\"client-atom\",-1733084110),client_atom], null);\n});})(send,recv,kill,client_promise,client_atom,t_chan,state_chan))\n);\n});\n/**\n * Feed the system promise to this and it will kill it\n */\nhuginn.mqtt.kill_it = (function huginn$mqtt$kill_it(system_promise){\nreturn promesa.core.then(system_promise,huginn.mqtt.clean_up);\n});\n","~:ns-info",["^ ","~:rename-macros",null,"~:renames",["^ "],"~:meta",["^ ","~:file","huginn/mqtt.cljs","~:line",1,"~:column",5,"~:end-line",1,"~:end-column",16],"~:ns-aliases",["^ ","~$jsonwebtoken","~$shadow.js.shim.module$jsonwebtoken","~$systeminformation","~$shadow.js.shim.module$systeminformation","~$clojure.core.async","~$cljs.core.async","~$raspicam","~$shadow.js.shim.module$raspicam"],"~:use-macros",["^ ","~$get-env","~$taoensso.timbre","~$log","^F","~$logf","^F","~$reportf","^F","~$fatalf","^F","~$warnf","^F","~$report","^F","~$spy","^F","~$warn","^F","~$trace","^F","~$debug","^F","~$debugf","^F","~$tracef","^F","~$infof","^F","~$fatal","^F","~$errorf","^F","~$info","^F","~$error","^F"],"~:excludes",["~#set",[]],"~:name","~$huginn.mqtt","~:js-aliases",["^ ","gcic-mqtt-client","~$shadow.js.shim.module$gcic_mqtt_client"],"~:op","~:ns","~:imports",null,"~:requires",["^ ","^12","^12","~$p","~$promesa.core","^17","^17","~$timbre","^F","~$a","^A","~$si","^?","~$huginn.config","^1:","~$orchestra-cljs.spec.test","^1;","~$cljs.core","^1<","~$goog","^1=","^A","^A","^>","^?","~$config","^1:","~$cljs.nodejs","^1?","~$huginn.jwt","^1@","~$nodejs","^1?","~$s","~$cljs.spec.alpha","~$mqtt","^12","~$jw","^1@","^F","^F","^?","^?","~$clojure.string","^1E","~$st","^1E","^1B","^1B","~$spec-test","^1;"],"~:seen",["^Y",["~:require"]],"~:uses",null,"~:require-macros",["^ ","^F","^F","^18","^F","^1<","^1<","~$a","^A","^1;","^1;","^A","^A","~$s","^1B","^1B","^1B","^1G","^1;"],"~:form",["~#list",["~$ns","^[",["^1M",["^1I",["^17","~:as","~$p"],["^1E","^1O","^1F"],["^1@","^1O","^1D"],["gcic-mqtt-client","^1O","^1C"],["^1;","^1O","^1G"],["^1:","^1O","^1>"],["^F","^1O","^18","~:refer-macros",["^G","^O","^P","^V","^N","^W","^T","^L","^H","^R","^Q","^S","^K","^U","^J","^I","^M","^E"]],["^A","^1O","~$a"],["^>","^1O","^19"],["^1B","^1O","~$s"],["^1?","^1O","^1A"]]]]],"~:flags",["^ ","^1I",["^Y",[]]],"~:js-deps",["^ ","^11",["^ ","^1O","^1C"]],"~:deps",["^1=","^1<","^17","^1E","^1@","^12","^1;","^1:","^F","^A","^?","^1B","^1?"]],"^14","^[","~:resource-id",["~:shadow.build.classpath/resource","huginn/mqtt.cljs"],"~:compiled-at",1540189270588,"~:resource-name","huginn/mqtt.cljs","~:warnings",[],"~:source","(ns huginn.mqtt\n  (:require\n   [promesa.core :as p]\n   [clojure.string :as st]\n   [huginn.jwt :as jw]\n   [\"gcic-mqtt-client\" :as mqtt]\n   [orchestra-cljs.spec.test :as spec-test]\n   [huginn.config :as config]\n   [taoensso.timbre :as timbre\n    :refer-macros [log  trace  debug  info  warn  error  fatal  report\n                   logf tracef debugf infof warnf errorf fatalf reportf\n                   spy get-env]]\n   [cljs.core.async :as a]\n   [systeminformation :as si]\n   [cljs.spec.alpha :as s]\n   [cljs.nodejs :as nodejs]))\n\n\n(spec-test/instrument)\n\n(s/def ::projectId string?)\n(s/def ::registryId string?)\n(s/def ::cloudRegion string?)\n(s/def ::deviceId string?)\n(s/def ::chan any?)\n\n(s/def ::topic-type #{\"events\" \"state\"})\n\n\n(s/def ::client-config (s/keys :req-un\n                               [::projectId\n                                ::registryId\n                                ::cloudRegion\n                                ::deviceId]))\n\n(s/def ::payload (s/and string? #(< ( count %) 200000)))\n(s/def ::subfolder (s/and string? #(< (count %) 200)))\n(s/def ::ts float?)\n(s/def ::qos #{0 1})\n(s/def ::mqtt-packet\n  (s/keys :req-un [::payload\n                   ::subfolder\n                   ::qos \n                   ::ts]))\n\n(s/fdef client-id\n  :args ::client-config\n  :ret  string?)\n\n\n(defn client-id\n  \"Builds a client id used to identify the device this message is\n  comming from\"\n  [{:keys [projectId registryId cloudRegion deviceId] :as opts}]\n  (str \"projects/\" projectId\n       \"/locations/\" cloudRegion\n       \"/registries/\" registryId\n       \"/devices/\" deviceId))\n\n(s/fdef config-chan\n  :args (s/cat :opts (s/keys :req-un [::deviceId]))\n  :ret string?)\n(defn config-chan\n  \"google give each device two channeles, a state channel (the config channel)\n  and a telemetry channel (the one that we push all our data over). The name of\n  these channels are determined by google iot core.\"\n  [{:keys [deviceId] :as opts}]\n  (str \"/devices/\" deviceId \"/config\"))\n\n(s/fdef client-handlers\n  :args (s/cat :success-fn fn?\n               :fail       fn?\n               :send       ::chan\n               :recv       ::chan))\n\n(defn client-handlers\n  \"builds a map of handels to attach to the mqtt object\"\n  [success-fn fail send recv]\n  {\"connect\" (fn [success]\n               (if success\n                 (do\n                   (success-fn))\n                 (do\n                   (debug \"client connection failure\")\n                   (fail))))\n   \"close\"   (fn [] )\n   \"reconnect\" (fn [] (info \"reconnecting\"))\n   \"error\"   (fn [err] (error \"error: \" err))\n   \"message\" (fn [topic message packet]\n               (a/go\n                 (a/>! recv {:topic topic\n                             :message message\n                             :packet packet})))})\n\n\n(defn add-handlers\n  \"takes a map of handlers and attaches them to the mqtt object\"\n  [client handlers]\n  (doseq [[key hand] handlers]\n    (.on client key hand)))\n\n(s/fdef build-client\n  :args (s/cat :opts ::client-config))\n\n(defn build-client [opts]\n  \"builds the mqtt client using the client-config\nthe mqtt client is responsible for holding on to\nauth to talk to google iot core. The mqtt client\nis also responsible for actually pushing the data\nto google iot core.\"\n  (let [conn-args (jw/google-iot-conn-args opts)\n        client    (mqtt. conn-args)]\n    {:client client}))\n\n;This function is referenced before it is defined so we\n;declare it\n(declare publish-async)\n\n(s/fdef init-client\n  :args (s/cat :opts ::client-config\n               :send ::chan\n               :recv ::chan)\n  :ret p/promise?)\n\n(defn init-client [opts send recv]\n  \"using client config and a channel to send and a channel to recv on,\nbuilds an mqtt client that will read from the send chan and push to google\n  and write to the recv chan when google pushes to it. This object is wrapped\nin a promise that returns when the client is ready\"\n  (p/promise\n   (fn [resolve reject]\n     (let [{:keys [client] :as init} (build-client opts)\n           handlers (client-handlers #(resolve client) #(reject :client-fail) send recv)]\n       (debug \"subscribe\")\n       (.subscribe client (config-chan opts))\n       (add-handlers client handlers)))))\n\n(defn payload-root\n  \"builds the prefix of the actual values being sent\n  (str (payload-root config) sensor-name /  sensor-value)\"\n  [{:keys [registryId userId deviceId] :as opts}]\n  (str registryId \"/\" userId \"/\" deviceId \"-payload\"))\n\n(s/fdef mqtt-topic\n    :args (s/cat :opts     ::client-config\n                 :msg-type ::topic-type)\n    :ret string?)\n\n(defn mqtt-topic\n  \"msg-type can be 'state' for state updates\n   or 'events' to publish telemetry\"\n  [{:keys [deviceId] :as opts} msg-type]\n  (str \"/devices/\" deviceId \"/\" msg-type))\n\n(s/fdef prep-temps\n  :args (s/cat :opts ::client-config :data any?)\n  :ret (s/coll-of ::mqtt-packet))\n(defn prep-temps\n  \"pulls the data out of the systeminformation library and wrapping them up\n  to be sent into mqtt\"\n  [opts data]\n  (let [pr (payload-root opts)\n        cores-raw (js->clj (.-cores data))\n        cores (map-indexed\n               (fn [index value]\n                 {:payload (str pr \"-core-temp-\" index \"/\" (str value))\n                  :subfolder (str \"metrics/core-temp-\" index)\n                  :qos 1\n                  :ts (jw/round-now)})\n               cores-raw)\n        main (when (.-main data)\n               {:payload (str pr \"-core-temp-main/\" (str (.-main data)))\n                :subfolder \"metrics/core-temp-main\"\n                :qos 1\n                :ts (jw/round-now)})\n        max (when (.-max data)\n              {:payload (str pr \"-core-temp-max/\" (str (.-max data)))\n               :subfolder \"metrics/core-temp-max\"\n               :qos 1\n               :ts (jw/round-now)})]\n    (concat [main] [max] cores)))\n\n(def stop (atom false))\n\n(s/fdef publish-one\n  :args (s/cat :client any? :packet (s/or :nil nil? :value ::mqtt-packet)))\n(defn publish-one\n  \"Publises one mqtt packet to the client\"\n  [client {:keys [topic payload qos] :as p}]\n  (when p\n    (.publishEvent client payload  1 topic)))\n\n\n(defn publisher\n  \"main loop that pushes packets added to the send-chan to google iot core\"\n  [client-atom send-chan]\n  (a/go-loop []\n    (let [to-send (a/<! send-chan)]\n      (publish-one @client-atom to-send)\n      (recur))))\n\n(defn client-refresher\n  \"loops and refreshs the client atom every token experation.\n  Mqtt requires that you refresh your token frequently (less then 20 mins)\"\n  [client-atom {:keys [tokenExpMins delayMs] :as opts} send recv]\n  ; make a mixer so that we can pause the data when switching clients\n  (let [client-send-chan (a/chan)\n        client-mixer (a/mix client-send-chan)]\n    (a/admix client-mixer send)\n   ;Loop forever waiting for the tokenExpMins, then building a new client\n    (a/go-loop []\n   ; use core.async/timeout to set up a channel that has a value every tokenExpMins\n      (let [wait (a/<! (a/timeout (* tokenExpMins 1000 60)))]\n        (info \"\\tRefreshing token after \" (* tokenExpMins 1000 60)  \"ms\")\n        (a/toggle client-mixer {send {:pause true}})\n        (.end @client-atom\n              #js {}\n              (fn []\n                (aset @client-atom \"password\" (clj->js (jw/create-jwt opts)))\n                (.reconnect @client-atom\n                            (fn []\n                              (a/toggle client-mixer {send {:pause false}})))))\n;        (let [wait-again (a/<! (a/timeout 100))]\n;          (p/then (init-client opts send recv)\n;                  (fn [new-client]\n;                    (reset! client-atom new-client)\n        (recur)))))\n\n(s/fdef tele-chan\n  :args (s/cat :opts  ::client-config)\n  :ret ::chan)\n(defn tele-chan\n  \"takes the client opts and builds a channel with system telementry\n  values on it (cpu tempratures specifically)\"\n  [opts]\n  (let [temp-chan (a/chan)\n        out-chan (a/chan)]\n    (a/go-loop []\n        (p/chain\n         (si/cpuTemperature)\n         #(prep-temps opts %)\n         (fn [mqtt-packets] (a/go\n                              (a/<! (a/timeout (* 1000 60 1)))\n                              (a/>! temp-chan mqtt-packets))))\n        (let [v (a/<! temp-chan)]\n          (a/>! out-chan v)\n          (recur)))\n    out-chan))\n\n\n(s/fdef sender\n  :args (s/cat :topic-name ::topic-type\n               :opts       ::client-config\n               :send       ::chan\n               :t-chan     ::chan))\n\n(defn sender\n  \"takes information for the tele-chan in the form of collections of\n  mqtt-packets and assignes a default topic if a subfolder is set,\n  adds a default qos. Then takes the resulting structures and puts\n  them on to the send channel. waits for :delayMs between collections \"\n  [topic-name opts send t-chan]\n  (a/go-loop []\n    (let [teles (a/<! t-chan)\n          topic (mqtt-topic opts topic-name)\n          qos #js {:qos 1}]\n\n      ;becuase this should rarely happen\n      (when (= \"state\" topic-name)\n        (debug \"pushing state\" topic))\n      (a/onto-chan\n       send\n       (map\n        (fn [{:keys [subfolder] :as mqtt-packet}]\n          (let [my-topic (if subfolder (str topic \"/\" subfolder) topic)]\n            (-> mqtt-packet\n                (assoc :topic my-topic)\n                (assoc :qos qos)))) teles)\n       false)\n      (a/<! (a/timeout (:delayMs opts)))\n      (recur))))\n\n(def state-send\n  (partial sender \"state\"))\n\n(def tele-send\n  (partial sender \"events\"))\n\n(defn clean-up\n  [{:keys [send-chan recv-chan telemetry-chan state-chan client-atom] :as system}]\n  (debug \"Killing system\")\n  \n     (doall\n      (map (fn [c] (a/close! c))\n           [send-chan recv-chan state-chan telemetry-chan]))\n     (debug \"killing client\")\n     (.end @client-atom  ))\n\n(defn system-function\n  \"the heart of the system lies here.\n  This function takes options (config/default-options works well)\n  It returns a map\n  This map has\n  :send-chan A channel you can use to directly send messages of mqtt, must be of the\n  form {:payload string? :qos #js {:qos #{0 1 2}} :topic (topics can be built with mqtt-topic)}\n  :recv-chan has items in the form of {:topic string? :message string? :packet buffer?}\n  :state-chan, send things of the form (coll-of {:payload string?}), onto the state channel\n  (google publishes these values to a differnt pubsub channel then device telemetry)\n  :telemetry-chan, sends (coll-of {:payload string?}), all the events in the collections\n  are sent in the same batch, the same is true for stat-chan.\n  :client-atom, contains the current version of the mqtt client. This is an atom so\n  that the client-refersher can refresh the authentication token and swap it.\n  this pattern also ensures only one client\n\n  payloads must be prefixed with a string describing where the data came (payload-root opts) will generate this for you\"\n  [opts]\n  (let [send (a/chan)\n        recv (a/chan)\n        kill (atom false)\n        client-promise (init-client opts send recv)\n        client-atom (atom nil)\n        t-chan (tele-chan opts)\n        state-chan (a/chan)]\n    (p/then\n     client-promise\n     (fn [client]\n       (reset! client-atom client)\n;       (client-refresher client-atom opts send recv)\n       (publisher client-atom send)\n       (tele-send opts send t-chan)\n       (state-send opts send state-chan)\n       {:send-chan send\n        :recv-chan recv\n        :state-chan state-chan\n        :telemetry-chan t-chan\n        :client-atom client-atom}))))\n\n\n;(def system-promise (system-function config/default-options))\n\n(defn kill-it\n  \"Feed the system promise to this and it will kill it\"\n  [system-promise]\n  (p/then system-promise\n          clean-up))\n\n;(kill-it system-promise)\n","~:reader-features",["^Y",["~:cljs"]],"~:cljc",false,"~:source-map-compact",["^ ","mappings","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","names",["opts18778","cljs.core.reduce.cljs$core$IFn$_invoke$arity$3","ret__15628__auto__","p__18779","vec__18780","___15629__auto__","cljs.core.nth.cljs$core$IFn$_invoke$arity$3","f__15630__auto__","sym__15631__auto__","G__18783","cljs.core.conj.cljs$core$IFn$_invoke$arity$2","orchestra-cljs.spec.test/distinct-by","cljs.core/first","cljs.core.filter.cljs$core$IFn$_invoke$arity$2","p1__15627__15632__auto__","G__18785","fexpr__18784","orchestra_cljs.spec.test.instrumentable_syms.cljs$core$IFn$_invoke$arity$1","cljs.core/zipmap","cljs.spec.alpha/def-impl","cljs.core/string?","cljs.core/any?","cljs.spec.alpha/map-spec-impl","G__18786","cljs.core/map?","cljs.core/contains?","cljs.spec.alpha/and-spec-impl","p1__18787#","cljs.core/count","p1__18788#","cljs.core/float?","G__18789","cljs.spec.alpha/fspec-impl","cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4","p__18790","map__18791","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","cljs.core.get.cljs$core$IFn$_invoke$arity$2","huginn.mqtt/client-id","projectId","registryId","cloudRegion","deviceId","opts","cljs.spec.alpha/cat-impl","G__18793","p__18794","map__18795","huginn.mqtt/config-chan","cljs.core/fn?","huginn.mqtt/client-handlers","success-fn","fail","send","recv","success","taoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$10","taoensso.timbre/*config*","cljs.core/Delay","err","topic","message","packet","c__15660__auto__","cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1","cljs.core.async.impl.dispatch/run","f__15661__auto__","switch__15468__auto__","state_18803","state_val_18804","inst_18797","inst_18798","inst_18799","cljs.core/PersistentHashMap","cljs.core.async.impl.ioc-helpers/put!","inst_18801","cljs.core.async.impl.ioc-helpers/return-chan","statearr-18805","state-machine__15469__auto__","ret-value__15470__auto__","result__15471__auto__","cljs.core/keyword-identical?","e18806","js/Object","ex__15472__auto__","statearr-18807","cljs.core.async.impl.ioc-helpers/process-exception","state__15662__auto__","statearr-18808","cljs.core.async.impl.ioc-helpers/USER-START-IDX","cljs.core.async.impl.ioc-helpers/run-state-machine-wrapped","huginn.mqtt/add-handlers","client","handlers","seq__18809","cljs.core/seq","chunk__18810","count__18811","i__18812","vec__18813","temp__5457__auto__","cljs.core/chunked-seq?","c__4351__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","vec__18816","cljs.core/next","key","hand","huginn.mqtt/build-client","conn-args","huginn.jwt/google-iot-conn-args","js/shadow.js.shim.module$gcic_mqtt_client","promesa.core/promise?","huginn.mqtt/init-client","promesa.core/promise","resolve","reject","map__18819","init","G__18821","p__18822","map__18823","huginn.mqtt/payload-root","userId","p__18825","map__18826","huginn.mqtt/mqtt-topic","msg-type","cljs.spec.alpha.every_impl.cljs$core$IFn$_invoke$arity$4","G__18828","cljs.core/coll?","huginn.mqtt/prep-temps","data","pr","cores-raw","cljs.core.js__GT_clj.cljs$core$IFn$_invoke$arity$1","cores","cljs.core.map_indexed.cljs$core$IFn$_invoke$arity$2","index","value","huginn.jwt/round-now","main","max","cljs.core.concat.cljs$core$IFn$_invoke$arity$variadic","huginn.mqtt/stop","cljs.core.atom.cljs$core$IFn$_invoke$arity$1","cljs.spec.alpha/or-spec-impl","cljs.core/nil?","p__18829","map__18830","huginn.mqtt/publish-one","payload","qos","p","huginn.mqtt/publisher","client-atom","send-chan","state_18841","state_val_18842","statearr-18843","cljs.core.async.impl.ioc-helpers/take!","inst_18839","inst_18834","inst_18835","cljs.core/deref","inst_18836","statearr-18844","statearr-18845","statearr-18846","e18847","statearr-18848","statearr-18849","p__18850","map__18851","huginn.mqtt/client-refresher","tokenExpMins","delayMs","client-send-chan","cljs.core.async.chan.cljs$core$IFn$_invoke$arity$0","client-mixer","cljs.core.async/mix","cljs.core.async/admix","state_18876","state_val_18877","statearr-18878","inst_18854","inst_18855","inst_18856","inst_18874","inst_18858","inst_18859","inst_18860","inst_18861","inst_18862","inst_18863","inst_18864","inst_18865","inst_18866","inst_18867","inst_18868","inst_18869","inst_18870","inst_18871","statearr-18879","statearr-18880","statearr-18881","e18882","statearr-18883","statearr-18884","wait","cljs.core.async/timeout","cljs.core.async/toggle","cljs.core/clj->js","huginn.jwt/create-jwt","huginn.mqtt/tele-chan","temp-chan","out-chan","state_18899","state_val_18900","statearr-18901","inst_18887","inst_18888","p1__18885#","inst_18889","inst_18890","statearr-18917","inst_18897","inst_18892","inst_18894","statearr-18918","statearr-18919","statearr-18920","e18921","statearr-18922","statearr-18923","promesa.core.chain.cljs$core$IFn$_invoke$arity$variadic","js/shadow.js.shim.module$systeminformation.cpuTemperature","mqtt-packets","state_18910","state_val_18911","inst_18902","inst_18903","inst_18904","inst_18906","statearr-18912","inst_18908","statearr-18913","e18914","statearr-18915","statearr-18916","huginn.mqtt/sender","topic-name","t-chan","state_18948","state_val_18949","statearr-18950","inst_18946","inst_18926","inst_18927","inst_18928","statearr-18951","statearr-18952","statearr-18953","inst_18930","inst_18931","inst_18932","statearr-18954","statearr-18955","inst_18935","inst_18937","inst_18938","inst_18939","inst_18940","inst_18941","statearr-18958","inst_18943","statearr-18959","statearr-18960","statearr-18961","e18962","statearr-18963","statearr-18964","teles","cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2","cljs.core.async.onto_chan.cljs$core$IFn$_invoke$arity$3","cljs.core.map.cljs$core$IFn$_invoke$arity$2","p__18936","map__18956","subfolder","mqtt-packet","my-topic","cljs.core.assoc.cljs$core$IFn$_invoke$arity$3","huginn.mqtt/state-send","cljs.core.partial.cljs$core$IFn$_invoke$arity$2","huginn.mqtt/tele-send","p__18965","map__18966","huginn.mqtt/clean-up","recv-chan","telemetry-chan","state-chan","system","cljs.core.doall.cljs$core$IFn$_invoke$arity$1","c","cljs.core.async/close!","huginn.mqtt/system-function","kill","client-promise","promesa.core/then","cljs.core/reset!","huginn.mqtt/kill-it","system-promise"]]],"~:cache-keys",["~#cmap",[["^1U","cljs_node_io/file.cljs"],[1537666007418,"^1=","^1<","~$goog.Uri","~$cljs-node-io.streams","~$cljs-node-io.fs","~$cljs-node-io.protocols"],["^1U","goog/dom/tagname.js"],[1530991559994,"^1=","~$goog.dom.HtmlElement"],["^1U","goog/async/freelist.js"],[1530991559994,"^1="],["^1U","cljs/core/async/impl/ioc_helpers.cljs"],[1534380136417,"^1=","^1<","~$cljs.core.async.impl.protocols"],["^1U","goog/labs/useragent/platform.js"],[1530991559994,"^1=","~$goog.labs.userAgent.util","~$goog.string"],["~:macro","^1<"],[1534380137000],["^1U","cljs/core/async.cljs"],[1534380136417,"^1=","^1<","^2;","~$cljs.core.async.impl.channels","~$cljs.core.async.impl.buffers","~$cljs.core.async.impl.timers","~$cljs.core.async.impl.dispatch","~$cljs.core.async.impl.ioc-helpers"],["^1U","goog/timer/timer.js"],[1530991559994,"^1=","~$goog.Promise","~$goog.events.EventTarget"],["^1U","orchestra_cljs/spec/test.cljs"],[1538695969819,"^1=","^1<","~$goog.object","~$goog.userAgent.product","^1E","~$cljs.stacktrace","~$cljs.pprint","^1B","~$cljs.spec.gen.alpha"],["^1U","cljs/nodejs.cljs"],[1534380137690,"^1=","^1<"],["^1U","cljs/spec/gen/alpha.cljs"],[1534380137690,"^1=","^1<","^26"],["^1U","cljs/tools/reader/impl/utils.cljs"],[1535586405375,"^1=","^1<","^1E","^2="],["^1U","cljs_node_io/fs.cljs"],[1537666007418,"^1=","^1<","^A","^2;"],["^1U","cljs_node_io/core.cljs"],[1537666007418,"^1=","^1<","^A","^2;","~$cljs-node-io.file","^27","^29","^26"],["^1U","goog/math/math.js"],[1530991559994,"^1=","~$goog.array","~$goog.asserts"],["^1U","goog/string/stringformat.js"],[1530991559994,"^1=","^2="],["^1U","goog/events/eventtype.js"],[1530991559994,"^1=","~$goog.userAgent"],["^1U","goog/labs/useragent/browser.js"],[1530991559994,"^1=","^2L","^2<","^2F","^2="],["^1U","goog/array/array.js"],[1530991559994,"^1=","^2M"],["^1U","huginn/mqtt.cljs"],[1540189166236,"^1=","^1<","^17","^1E","^1@","^12","^1;","^1:","^F","^A","^?","^1B","^1?"],["^1U","cljs_node_io/protocols.cljs"],[1537666007418,"^1=","^1<"],["^2>","~$cljs.core.async.macros"],[1534380136000],["^1U","cljs_node_io/streams.cljs"],[1537666007418,"^1=","^1<","^26","^A","^29"],["^1U","huginn/config.cljs"],[1540154895584,"^1=","^1<"],["^1U","goog/useragent/useragent.js"],[1530991559994,"^1=","~$goog.labs.userAgent.browser","~$goog.labs.userAgent.engine","~$goog.labs.userAgent.platform","^2<","~$goog.reflect","^2="],["^1U","goog/structs/prioritypool.js"],[1530991559994,"^1=","~$goog.structs.Pool","~$goog.structs.PriorityQueue"],["^2>","~$cljs.tools.reader.reader-types"],[1535586405000],["^1U","goog/async/run.js"],[1530991559994,"^1=","~$goog.async.WorkQueue","~$goog.async.nextTick","~$goog.async.throwException"],["^1U","taoensso/encore.cljs"],[1535586406568,"^1=","^1<","^1E","~$clojure.set","~$cljs.reader","~$cljs.tools.reader.edn","~$cljs.test","^2F","^2=","~$goog.string.format","~$goog.string.StringBuffer","~$goog.events","~$goog.net.XhrIo","~$goog.net.XhrIoPool","~$goog.Uri.QueryData","~$goog.structs","~$goog.net.EventType","~$goog.net.ErrorCode","~$taoensso.truss"],["^1U","goog/debug/error.js"],[1530991559994,"^1="],["^1U","goog/async/workqueue.js"],[1530991559994,"^1=","^2M","~$goog.async.FreeList"],["^1U","huginn/jwt.cljs"],[1540154806767,"^1=","^1<","^1E","^17","~$cljs-node-io.core","^1?","^="],["^1U","promesa/impl/scheduler.cljc"],[1535586406328,"^1=","^1<","~$promesa.protocols"],["^1U","goog/events/events.js"],[1530991559994,"^1=","^2M","~$goog.debug.entryPointRegistry","~$goog.events.BrowserEvent","~$goog.events.BrowserFeature","~$goog.events.Listenable","~$goog.events.ListenerMap"],["^1U","goog/promise/resolver.js"],[1530991559994,"^1="],["^1U","goog/events/browserfeature.js"],[1530991559994,"^1=","^2N"],["^1U","cljs/tools/reader/edn.cljs"],[1535586405375,"^1=","^1<","~$cljs.tools.reader.impl.errors","^2V","~$cljs.tools.reader.impl.utils","~$cljs.tools.reader.impl.commons","~$cljs.tools.reader","^2=","^33"],["^1U","goog/structs/priorityqueue.js"],[1530991559994,"^1=","~$goog.structs.Heap"],["^1U","goog/net/xhrio.js"],[1530991559994,"^1=","~$goog.Timer","^2L","^2M","^3?","^2E","~$goog.json.hybrid","~$goog.log","^3:","^39","~$goog.net.HttpStatus","~$goog.net.XmlHttp","^2=","^38","~$goog.structs.Map","~$goog.uri.utils","^2N"],["^1U","goog/promise/thenable.js"],[1530991559994,"^1="],["^1U","promesa/impl.cljc"],[1535586406328,"^1=","^1<","^3>","~$org.bluebird"],["^1U","goog/dom/nodetype.js"],[1530991559994,"^1="],["^2>","^F"],[1535586406000],["^1U","cljs/tools/reader/impl/inspect.cljs"],[1535586405375,"^1=","^1<"],["^1U","cljs/pprint.cljs"],[1534380137690,"^1=","^1<","^1E","^2=","^33"],["^2>","^2J"],[1534380137000],["^1U","cljs/tools/reader.cljs"],[1535586405375,"^1=","^1<","^2V","^3E","^3F","^3D","^2L","^2=","^33"],["^1U","goog/net/wrapperxmlhttpfactory.js"],[1530991559994,"^1=","~$goog.net.XhrLike","~$goog.net.XmlHttpFactory"],["^1U","goog/events/eventtarget.js"],[1530991559994,"^1=","~$goog.Disposable","^2M","^34","~$goog.events.Event","^3B","^3C","^2F"],["^1U","goog/disposable/disposable.js"],[1530991559994,"^1=","~$goog.disposable.IDisposable"],["^2>","^1;"],[1538695969000],["^1U","goog/object/object.js"],[1530991559994,"^1="],["^1U","goog/structs/set.js"],[1530991559994,"^1=","^38","~$goog.structs.Collection","^3N"],"~:SHADOW-TIMESTAMP",[1540077702000,1534380137000],["^1U","cljs/stacktrace.cljc"],[1534380137690,"^1=","^1<","^2=","^1E"],["^1U","goog/math/long.js"],[1530991559994,"^1=","^2M","^2S"],["^1U","goog/events/listener.js"],[1530991559994,"^1=","~$goog.events.ListenableKey"],["^1U","cljs/core/async/impl/channels.cljs"],[1534380136417,"^1=","^1<","^2;","^2B","^2@"],["^1U","goog/events/listenermap.js"],[1530991559994,"^1=","^2L","~$goog.events.Listener","^2F"],["^1U","goog/events/eventid.js"],[1530991559994,"^1="],["^1U","taoensso/truss.cljs"],[1535586406478,"^1=","^1<","~$taoensso.truss.impl"],["^1U","shadow/test/env.cljs"],[1540077702615,"^1=","^1<"],["^1U","goog/functions/functions.js"],[1530991559994,"^1="],["^1U","cljs/core/async/impl/dispatch.cljs"],[1534380136417,"^1=","^1<","^2@","^2X"],["^1U","taoensso/truss/impl.cljs"],[1535586406478,"^1=","^1<","^2Z"],["^1U","clojure/walk.cljs"],[1534380137690,"^1=","^1<"],["^1U","goog/useragent/product.js"],[1530991559994,"^1=","^2P","^2R","^2N"],["^1U","cljs/core/async/impl/protocols.cljs"],[1534380136417,"^1=","^1<"],["^1U","goog/net/eventtype.js"],[1530991559994,"^1="],["^1U","goog/structs/map.js"],[1530991559994,"^1=","~$goog.iter.Iterator","~$goog.iter.StopIteration","^2F"],["^1U","goog/net/xhriopool.js"],[1530991559994,"^1=","^35","~$goog.structs.PriorityPool"],["^1U","goog/structs/queue.js"],[1530991559994,"^1=","^2L"],["^1U","goog/labs/useragent/engine.js"],[1530991559994,"^1=","^2L","^2<","^2="],["^1U","taoensso/timbre/appenders/core.cljs"],[1535586406375,"^1=","^1<","^1E","~$taoensso.encore"],["^1U","cljs/reader.cljs"],[1534380137690,"^1=","^1<","^2F","^3G","^30","^33"],["~:shadow.build.js-support/require","bluebird"],["~$shadow.js.shim.module$bluebird","shadow.js.shim.module$bluebird.js","^1="],["^2>","~$cljs-node-io.macros"],[1537666007000],["^2>","^1B"],[1534380137000],["^1U","goog/asserts/asserts.js"],[1530991559994,"^1=","~$goog.debug.Error","~$goog.dom.NodeType","^2="],["^1U","cljs/core/async/impl/buffers.cljs"],[1534380136417,"^1=","^1<","^2;"],["^2>","^2I"],[1534380137000],["^1U","goog/debug/logbuffer.js"],[1530991559994,"^1=","^2M","~$goog.debug.LogRecord"],["^43","jsonwebtoken"],["^=","shadow.js.shim.module$jsonwebtoken.js","^1="],["^2>","^42"],[1535586406000],["^1U","goog/uri/uri.js"],[1530991559994,"^1=","^2L","^2M","^2=","^38","^3N","^3O","~$goog.uri.utils.ComponentIndex","~$goog.uri.utils.StandardQueryParam"],["^1U","goog/net/errorcode.js"],[1530991559994,"^1="],["^2>","^31"],[1534380137000],["^2>","^A"],[1534380136000],["^1U","goog/disposable/idisposable.js"],[1530991559994,"^1="],["^1U","goog/promise/promise.js"],[1530991559994,"^1=","~$goog.Thenable","^2M","^3<","~$goog.async.run","^2Y","^46","~$goog.promise.Resolver"],["^1U","cljs/core/async/impl/timers.cljs"],[1534380136417,"^1=","^1<","^2;","^2?","^2B"],["^1U","cljs/spec/alpha.cljs"],[1534380137690,"^1=","^1<","^2F","~$clojure.walk","^2J","^1E"],["^1U","goog/debug/logrecord.js"],[1530991559994,"^1="],["^1U","goog/base.js"],[1530991559994],["^1U","promesa/core.cljc"],[1535586406328,"^1=","^1<","^3>","~$promesa.impl","~$promesa.impl.scheduler"],["^1U","goog/json/hybrid.js"],[1530991559994,"^1=","^2M","~$goog.json"],["^1U","goog/structs/structs.js"],[1530991559994,"^1=","^2L","^2F"],["^1U","cljs/tools/reader/impl/errors.cljs"],[1535586405375,"^1=","^1<","^2V","^1E","~$cljs.tools.reader.impl.inspect"],["^1U","org/bluebird.cljs"],[1535669979047,"^1=","^1<","^44"],["^1U","clojure/string.cljs"],[1534380137690,"^1=","^1<","^2=","^33"],["^1U","goog/structs/pool.js"],[1530991559994,"^1=","^3S","~$goog.structs.Queue","~$goog.structs.Set"],["^1U","goog/net/httpstatus.js"],[1530991559994,"^1="],["^1U","goog/structs/heap.js"],[1530991559994,"^1=","^2L","^2F","~$goog.structs.Node"],["^1U","goog/debug/entrypointregistry.js"],[1530991559994,"^1=","^2M"],["^1U","goog/string/string.js"],[1530991559994,"^1="],["^1U","goog/reflect/reflect.js"],[1530991559994,"^1="],["^1U","goog/labs/useragent/util.js"],[1530991559994,"^1=","^2="],["^2>","~$clojure.template"],[1534380136000],["^2>","~$cljs.core.async.impl.ioc-macros"],[1534380136000],["^43","gcic-mqtt-client"],["^12","shadow.js.shim.module$gcic_mqtt_client.js","^1="],["^1U","goog/debug/debug.js"],[1530991559994,"^1=","^2L","~$goog.debug.errorcontext","^2N"],["^1U","goog/string/stringbuffer.js"],[1530991559994,"^1="],["^1U","goog/debug/errorcontext.js"],[1530991559994,"^1="],["^1U","cljs/tools/reader/reader_types.cljs"],[1535586405375,"^1=","^1<","^3E","^2=","^33"],["^1U","promesa/protocols.cljc"],[1535586406328,"^1=","^1<"],["^1U","goog/iter/iter.js"],[1530991559994,"^1=","^2L","^2M","~$goog.functions","~$goog.math"],["^1U","goog/async/nexttick.js"],[1530991559994,"^1=","^3?","~$goog.dom.TagName","^4I","^2P","^2Q"],["^1U","goog/debug/logger.js"],[1530991559994,"^1=","^2L","^2M","~$goog.debug","~$goog.debug.LogBuffer","^48"],["^1U","goog/events/event.js"],[1530991559994,"^1=","^3S","~$goog.events.EventId"],["^1U","cljs/tools/reader/impl/commons.cljs"],[1535586405375,"^1=","^1<","^3D","^2V","^3E"],["^43","systeminformation"],["^?","shadow.js.shim.module$systeminformation.js","^1="],["^1U","goog/dom/htmlelement.js"],[1530991559994,"^1="],["^1U","cljs/core.cljs"],[1534380137690,"~$goog.math.Long","~$goog.math.Integer","^2=","^2F","^2L","^26","^33"],["^1U","goog/log/log.js"],[1530991559994,"^1=","^4L","~$goog.debug.LogManager","^48","~$goog.debug.Logger"],["^1U","goog/structs/collection.js"],[1530991559994,"^1="],["^1U","goog/events/browserevent.js"],[1530991559994,"^1=","^3A","^3T","~$goog.events.EventType","^2S","^2N"],["^1U","goog/math/integer.js"],[1530991559994,"^1="],["^1U","goog/structs/node.js"],[1530991559994,"^1="],["^2>","^3Z"],[1535586406000],["^1U","clojure/set.cljs"],[1534380137690,"^1=","^1<"],["^1U","goog/uri/utils.js"],[1530991559994,"^1=","^2L","^2M","^2="],["^1U","taoensso/timbre.cljs"],[1535586406375,"^1=","^1<","^1E","^42","~$taoensso.timbre.appenders.core"],["^1U","goog/json/json.js"],[1530991559994,"^1="],["^1U","goog/events/listenable.js"],[1530991559994,"^1=","^4N"],["^1U","goog/net/xmlhttpfactory.js"],[1530991559994,"^1=","^3Q"],["^1U","goog/net/xmlhttp.js"],[1530991559994,"^1=","^2M","~$goog.net.WrapperXmlHttpFactory","^3R"],["^1U","cljs/test.cljs"],[1534380137690,"~$shadow.test.env","^1=","^1<","^1E","^2I"],["^1U","goog/net/xhrlike.js"],[1530991559994,"^1="],["^2>","^2["],[1534380137000]]],"~:analyzer",["^ ","^3",null,"^4",["^ "],"^5",["^ ","^6","huginn/mqtt.cljs","^7",1,"^8",5,"^9",1,"^:",16],"^;",["^ ","^<","^=","^>","^?","^@","^A","^B","^C"],"^D",["^ ","^E","^F","^G","^F","^H","^F","^I","^F","^J","^F","^K","^F","^L","^F","^M","^F","^N","^F","^O","^F","^P","^F","^Q","^F","^R","^F","^S","^F","^T","^F","^U","^F","^V","^F","^W","^F"],"^X",["^Y",[]],"~:shadow/js-access-properties",["^Y",["cpuTemperature"]],"^Z","^[","^10",["^ ","^11","^12"],"^15",null,"^16",["^ ","^12","^12","~$p","^17","^17","^17","^18","^F","~$a","^A","^19","^?","^1:","^1:","^1;","^1;","^1<","^1<","^1=","^1=","^A","^A","^>","^?","^1>","^1:","^1?","^1?","^1@","^1@","^1A","^1?","~$s","^1B","^1C","^12","^1D","^1@","^F","^F","^?","^?","^1E","^1E","^1F","^1E","^1B","^1B","^1G","^1;"],"^1H",["^Y",["^1I"]],"~:shadow/js-access-global",["^Y",["Object"]],"^1J",null,"~:defs",["^ ","~$tele-send",["^ ","^Z","~$huginn.mqtt/tele-send","^6","huginn/mqtt.cljs","^7",286,"^8",1,"^9",286,"^:",15,"^5",["^ ","^6","huginn/mqtt.cljs","^7",286,"^8",6,"^9",286,"^:",15],"~:tag","~$any"],"~$publish-async",["^ ","^Z","~$huginn.mqtt/publish-async","^6","huginn/mqtt.cljs","^7",117,"^8",1,"^9",117,"^:",23,"~:declared",true,"^5",["^ ","^6","huginn/mqtt.cljs","^7",117,"^8",10,"^9",117,"^:",23,"^55",true]],"~$build-client",["^ ","~:protocol-inline",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",105,"^8",7,"^9",105,"^:",19,"~:arglists",["^1M",["~$quote",["^1M",[["~$opts"]]]]]],"^Z","~$huginn.mqtt/build-client","~:variadic",false,"^6","huginn/mqtt.cljs","^:",19,"~:method-params",["^1M",[["^5:"]]],"~:protocol-impl",null,"~:arglists-meta",["^1M",[null,null]],"^8",1,"^7",105,"^9",105,"~:max-fixed-arity",1,"~:fn-var",true,"^58",["^1M",["^59",["^1M",[["^5:"]]]]]],"~$client-id",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",51,"^8",7,"^9",51,"^:",16,"^58",["^1M",["^59",["^1M",[[["^ ","~:keys",["~$projectId","~$registryId","~$cloudRegion","~$deviceId"],"^1O","^5:"]]]]]],"~:doc","Builds a client id used to identify the device this message is\n  comming from"],"^Z","~$huginn.mqtt/client-id","^5<",false,"^6","huginn/mqtt.cljs","^:",16,"^5=",["^1M",[["~$p__18790"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",51,"^9",51,"^5@",1,"^5A",true,"^58",["^1M",["^59",["^1M",[[["^ ","^5C",["^5D","^5E","^5F","^5G"],"^1O","^5:"]]]]]],"^5H","Builds a client id used to identify the device this message is\n  comming from"],"~$prep-temps",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",158,"^8",7,"^9",158,"^:",17,"^58",["^1M",["^59",["^1M",[["^5:","~$data"]]]]],"^5H","pulls the data out of the systeminformation library and wrapping them up\n  to be sent into mqtt"],"^Z","~$huginn.mqtt/prep-temps","^5<",false,"^6","huginn/mqtt.cljs","^:",17,"^5=",["^1M",[["^5:","^5L"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",158,"^9",158,"^5@",2,"^5A",true,"^58",["^1M",["^59",["^1M",[["^5:","^5L"]]]]],"^5H","pulls the data out of the systeminformation library and wrapping them up\n  to be sent into mqtt"],"~$publisher",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",194,"^8",7,"^9",194,"^:",16,"^58",["^1M",["^59",["^1M",[["~$client-atom","~$send-chan"]]]]],"^5H","main loop that pushes packets added to the send-chan to google iot core"],"^Z","~$huginn.mqtt/publisher","^5<",false,"^6","huginn/mqtt.cljs","^:",16,"^5=",["^1M",[["^5O","^5P"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",194,"^9",194,"^5@",2,"^5A",true,"^58",["^1M",["^59",["^1M",[["^5O","^5P"]]]]],"^5H","main loop that pushes packets added to the send-chan to google iot core"],"~$init-client",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",125,"^8",7,"^9",125,"^:",18,"^58",["^1M",["^59",["^1M",[["^5:","~$send","~$recv"]]]]]],"^Z","~$huginn.mqtt/init-client","^5<",false,"^6","huginn/mqtt.cljs","^:",18,"^5=",["^1M",[["^5:","^5S","^5T"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",125,"^9",125,"^5@",3,"^5A",true,"^58",["^1M",["^59",["^1M",[["^5:","^5S","^5T"]]]]]],"~$payload-root",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",138,"^8",7,"^9",138,"^:",19,"^58",["^1M",["^59",["^1M",[[["^ ","^5C",["^5E","~$userId","^5G"],"^1O","^5:"]]]]]],"^5H","builds the prefix of the actual values being sent\n  (str (payload-root config) sensor-name /  sensor-value)"],"^Z","~$huginn.mqtt/payload-root","^5<",false,"^6","huginn/mqtt.cljs","^:",19,"^5=",["^1M",[["~$p__18822"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",138,"^9",138,"^5@",1,"^5A",true,"^58",["^1M",["^59",["^1M",[[["^ ","^5C",["^5E","^5W","^5G"],"^1O","^5:"]]]]]],"^5H","builds the prefix of the actual values being sent\n  (str (payload-root config) sensor-name /  sensor-value)"],"~$config-chan",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",63,"^8",7,"^9",63,"^:",18,"^58",["^1M",["^59",["^1M",[[["^ ","^5C",["^5G"],"^1O","^5:"]]]]]],"^5H","google give each device two channeles, a state channel (the config channel)\n  and a telemetry channel (the one that we push all our data over). The name of\n  these channels are determined by google iot core."],"^Z","~$huginn.mqtt/config-chan","^5<",false,"^6","huginn/mqtt.cljs","^:",18,"^5=",["^1M",[["~$p__18794"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",63,"^9",63,"^5@",1,"^5A",true,"^58",["^1M",["^59",["^1M",[[["^ ","^5C",["^5G"],"^1O","^5:"]]]]]],"^5H","google give each device two channeles, a state channel (the config channel)\n  and a telemetry channel (the one that we push all our data over). The name of\n  these channels are determined by google iot core."],"~$mqtt-topic",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",149,"^8",7,"^9",149,"^:",17,"^58",["^1M",["^59",["^1M",[[["^ ","^5C",["^5G"],"^1O","^5:"],"~$msg-type"]]]]],"^5H","msg-type can be 'state' for state updates\n   or 'events' to publish telemetry"],"^Z","~$huginn.mqtt/mqtt-topic","^5<",false,"^6","huginn/mqtt.cljs","^:",17,"^5=",["^1M",[["~$p__18825","^62"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",149,"^9",149,"^5@",2,"^5A",true,"^58",["^1M",["^59",["^1M",[[["^ ","^5C",["^5G"],"^1O","^5:"],"^62"]]]]],"^5H","msg-type can be 'state' for state updates\n   or 'events' to publish telemetry"],"~$tele-chan",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",232,"^8",7,"^9",232,"^:",16,"^58",["^1M",["^59",["^1M",[["^5:"]]]]],"^5H","takes the client opts and builds a channel with system telementry\n  values on it (cpu tempratures specifically)"],"^Z","~$huginn.mqtt/tele-chan","^5<",false,"^6","huginn/mqtt.cljs","^:",16,"^5=",["^1M",[["^5:"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",232,"^9",232,"^5@",1,"^5A",true,"^58",["^1M",["^59",["^1M",[["^5:"]]]]],"^5H","takes the client opts and builds a channel with system telementry\n  values on it (cpu tempratures specifically)"],"~$client-handlers",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",76,"^8",7,"^9",76,"^:",22,"^58",["^1M",["^59",["^1M",[["~$success-fn","~$fail","^5S","^5T"]]]]],"^5H","builds a map of handels to attach to the mqtt object"],"^Z","~$huginn.mqtt/client-handlers","^5<",false,"^6","huginn/mqtt.cljs","^:",22,"^5=",["^1M",[["^68","^69","^5S","^5T"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",76,"^9",76,"^5@",4,"^5A",true,"^58",["^1M",["^59",["^1M",[["^68","^69","^5S","^5T"]]]]],"^5H","builds a map of handels to attach to the mqtt object"],"~$kill-it",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",341,"^8",7,"^9",341,"^:",14,"^58",["^1M",["^59",["^1M",[["~$system-promise"]]]]],"^5H","Feed the system promise to this and it will kill it"],"^Z","~$huginn.mqtt/kill-it","^5<",false,"^6","huginn/mqtt.cljs","^:",14,"^5=",["^1M",[["^6<"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",341,"^9",341,"^5@",1,"^5A",true,"^58",["^1M",["^59",["^1M",[["^6<"]]]]],"^5H","Feed the system promise to this and it will kill it"],"~$state-send",["^ ","^Z","~$huginn.mqtt/state-send","^6","huginn/mqtt.cljs","^7",283,"^8",1,"^9",283,"^:",16,"^5",["^ ","^6","huginn/mqtt.cljs","^7",283,"^8",6,"^9",283,"^:",16],"^51","^52"],"~$publish-one",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",187,"^8",7,"^9",187,"^:",18,"^58",["^1M",["^59",["^1M",[["~$client",["^ ","^5C",["~$topic","~$payload","~$qos"],"^1O","~$p"]]]]]],"^5H","Publises one mqtt packet to the client"],"^Z","~$huginn.mqtt/publish-one","^5<",false,"^6","huginn/mqtt.cljs","^:",18,"^5=",["^1M",[["^6A","~$p__18829"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",187,"^9",187,"^5@",2,"^5A",true,"^58",["^1M",["^59",["^1M",[["^6A",["^ ","^5C",["^6B","^6C","^6D"],"^1O","~$p"]]]]]],"^5H","Publises one mqtt packet to the client"],"~$system-function",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",299,"^8",7,"^9",299,"^:",22,"^58",["^1M",["^59",["^1M",[["^5:"]]]]],"^5H","the heart of the system lies here.\n  This function takes options (config/default-options works well)\n  It returns a map\n  This map has\n  :send-chan A channel you can use to directly send messages of mqtt, must be of the\n  form {:payload string? :qos #js {:qos #{0 1 2}} :topic (topics can be built with mqtt-topic)}\n  :recv-chan has items in the form of {:topic string? :message string? :packet buffer?}\n  :state-chan, send things of the form (coll-of {:payload string?}), onto the state channel\n  (google publishes these values to a differnt pubsub channel then device telemetry)\n  :telemetry-chan, sends (coll-of {:payload string?}), all the events in the collections\n  are sent in the same batch, the same is true for stat-chan.\n  :client-atom, contains the current version of the mqtt client. This is an atom so\n  that the client-refersher can refresh the authentication token and swap it.\n  this pattern also ensures only one client\n\n  payloads must be prefixed with a string describing where the data came (payload-root opts) will generate this for you"],"^Z","~$huginn.mqtt/system-function","^5<",false,"^6","huginn/mqtt.cljs","^:",22,"^5=",["^1M",[["^5:"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",299,"^9",299,"^5@",1,"^5A",true,"^58",["^1M",["^59",["^1M",[["^5:"]]]]],"^5H","the heart of the system lies here.\n  This function takes options (config/default-options works well)\n  It returns a map\n  This map has\n  :send-chan A channel you can use to directly send messages of mqtt, must be of the\n  form {:payload string? :qos #js {:qos #{0 1 2}} :topic (topics can be built with mqtt-topic)}\n  :recv-chan has items in the form of {:topic string? :message string? :packet buffer?}\n  :state-chan, send things of the form (coll-of {:payload string?}), onto the state channel\n  (google publishes these values to a differnt pubsub channel then device telemetry)\n  :telemetry-chan, sends (coll-of {:payload string?}), all the events in the collections\n  are sent in the same batch, the same is true for stat-chan.\n  :client-atom, contains the current version of the mqtt client. This is an atom so\n  that the client-refersher can refresh the authentication token and swap it.\n  this pattern also ensures only one client\n\n  payloads must be prefixed with a string describing where the data came (payload-root opts) will generate this for you"],"~$stop",["^ ","^Z","~$huginn.mqtt/stop","^6","huginn/mqtt.cljs","^7",183,"^8",1,"^9",183,"^:",10,"^5",["^ ","^6","huginn/mqtt.cljs","^7",183,"^8",6,"^9",183,"^:",10],"^51","^52"],"~$sender",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",257,"^8",7,"^9",257,"^:",13,"^58",["^1M",["^59",["^1M",[["~$topic-name","^5:","^5S","~$t-chan"]]]]],"^5H","takes information for the tele-chan in the form of collections of\n  mqtt-packets and assignes a default topic if a subfolder is set,\n  adds a default qos. Then takes the resulting structures and puts\n  them on to the send channel. waits for :delayMs between collections "],"^Z","~$huginn.mqtt/sender","^5<",false,"^6","huginn/mqtt.cljs","^:",13,"^5=",["^1M",[["^6L","^5:","^5S","^6M"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",257,"^9",257,"^5@",4,"^5A",true,"^58",["^1M",["^59",["^1M",[["^6L","^5:","^5S","^6M"]]]]],"^5H","takes information for the tele-chan in the form of collections of\n  mqtt-packets and assignes a default topic if a subfolder is set,\n  adds a default qos. Then takes the resulting structures and puts\n  them on to the send channel. waits for :delayMs between collections "],"~$client-refresher",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",202,"^8",7,"^9",202,"^:",23,"^58",["^1M",["^59",["^1M",[["^5O",["^ ","^5C",["~$tokenExpMins","~$delayMs"],"^1O","^5:"],"^5S","^5T"]]]]],"^5H","loops and refreshs the client atom every token experation.\n  Mqtt requires that you refresh your token frequently (less then 20 mins)"],"^Z","~$huginn.mqtt/client-refresher","^5<",false,"^6","huginn/mqtt.cljs","^:",23,"^5=",["^1M",[["^5O","~$p__18850","^5S","^5T"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",202,"^9",202,"^5@",4,"^5A",true,"^58",["^1M",["^59",["^1M",[["^5O",["^ ","^5C",["^6P","^6Q"],"^1O","^5:"],"^5S","^5T"]]]]],"^5H","loops and refreshs the client atom every token experation.\n  Mqtt requires that you refresh your token frequently (less then 20 mins)"],"~$add-handlers",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",96,"^8",7,"^9",96,"^:",19,"^58",["^1M",["^59",["^1M",[["^6A","~$handlers"]]]]],"^5H","takes a map of handlers and attaches them to the mqtt object"],"^Z","~$huginn.mqtt/add-handlers","^5<",false,"^6","huginn/mqtt.cljs","^:",19,"^5=",["^1M",[["^6A","^6U"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",96,"^9",96,"^5@",2,"^5A",true,"^58",["^1M",["^59",["^1M",[["^6A","^6U"]]]]],"^5H","takes a map of handlers and attaches them to the mqtt object"],"~$clean-up",["^ ","^57",null,"^5",["^ ","^6","huginn/mqtt.cljs","^7",289,"^8",7,"^9",289,"^:",15,"^58",["^1M",["^59",["^1M",[[["^ ","^5C",["^5P","~$recv-chan","~$telemetry-chan","~$state-chan","^5O"],"^1O","~$system"]]]]]]],"^Z","~$huginn.mqtt/clean-up","^5<",false,"^6","huginn/mqtt.cljs","^:",15,"^5=",["^1M",[["~$p__18965"]]],"^5>",null,"^5?",["^1M",[null,null]],"^8",1,"^7",289,"^9",289,"^5@",1,"^5A",true,"^58",["^1M",["^59",["^1M",[[["^ ","^5C",["^5P","^6X","^6Y","^6Z","^5O"],"^1O","^6["]]]]]]]],"^1K",["^ ","^F","^F","^18","^F","^1<","^1<","~$a","^A","^1;","^1;","^A","^A","~$s","^1B","^1B","^1B","^1G","^1;"],"~:cljs.analyzer/constants",["^ ","^1H",["^Y",["~:client-fail","~:args","~:req-un","~:opt-un","~:huginn.mqtt/payload","~:qos","~$cljs.core/<","~:recv-chan","~:ret","~:gfn","~:cloudRegion","~:send-chan","~:recv","~:pred-exprs","~:keys-pred","~:huginn.mqtt/client-config","^5U","~:payload","~:opt-keys","~:huginn.mqtt/cloudRegion","~:else","~:huginn.mqtt/qos","~$cljs.core/count","~:state-chan","~$cljs.spec.alpha/and","~$cljs.spec.alpha/coll-of","~$cljs.spec.alpha/cat","~:cljs.spec.alpha/kind-form","~:subfolder","^5I","~:delayMs","~:deviceId","~:telemetry-chan","~$cljs.core/string?","~:t-chan","~:req-specs","~$cljs.spec.alpha/or","~:value","~:huginn.mqtt/topic-type","~:registryId","~$p1__18787#","~:client","~$cljs.spec.alpha/fspec","~$p1__18788#","~:recur","~:debug","~:topic","~:huginn.mqtt/ts","~$cljs.core/contains?","^5;","~$cljs.core/map?","~:cljs.spec.alpha/cpred","~$%","~$cljs.core/float?","~:tokenExpMins","~$cljs.core/fn?","~:huginn.mqtt/chan","~:topic-name","~:ts","~$cljs.spec.alpha/keys","~:huginn.mqtt/projectId","^6N","~:req","~:client-atom","~:msg-type","~:fail","~:huginn.mqtt/mqtt-packet","~$fn*","^5[","^5M","^63","~:opts","~:nil","~$cljs.core/nil?","~:req-keys","~$cljs.core/fn","~:info","~:send","~:opt-specs","~:huginn.mqtt/registryId","~:userId","^6:","~:pred-forms","~:pause","~:error","~:projectId","~:huginn.mqtt/deviceId","~$promesa.core/promise?","~:auto","~:huginn.mqtt/subfolder","~:p","~:cljs.spec.alpha/conform-all","^6E","~:success-fn","~$cljs.core/any?","^66","~:message","~:packet","~:cljs.spec.alpha/describe","~:opt","~:data"]],"~:order",["^8?","^7R","^8N","^7E","^8T","^8;","^8Z","^7W","^7B","^8>","^75","^76","^7<","^7@","^7A","^7D","^7T","^8@","^8I","^8M","^8P","^92","^8S","^7X","^7=","^7P","^8J","~$%","^86","^85","^77","^7J","^8E","^7Y","^79","^7H","^8W","^80","^84","^88","^7G","^8D","^7C","^7N","^78","^8=","^5I","^7[","^74","^7;","^5[","^7L","^8F","^6:","^8Y","^8:","^8C","^8L","^7?","^82","~:p","^8V","^8K","^8R","^83","^8[","^90","^81","^7F","^5;","^7Z","^5U","^8U","^73","^8O","^63","^8B","^5M","^93","^7K","^7M","^87","^8X","^91","^6E","^7U","^8G","^8H","^7V","^89","^7O","^8Q","^66","^6N","^8<","^7S","^7>","^7:","^7Q","^7I","^8A"]],"^1Q",["^ ","^1I",["^Y",[]]],"^1R",["^ ","^11",["^ ","^1O","^1C"]],"^1S",["^1=","^1<","^17","^1E","^1@","^12","^1;","^1:","^F","^A","^?","^1B","^1?"]],"^14","^[","~:ns-specs",["^ ","^77",["^1M",["^7J","^7R",["^1M",["^8E",["^7Y"],["^1M",["^79",["^1M",["^7H","^7Y"]],200000]]]]]],"^7B",["^1M",["^8>","^75",["^8?","^8N","^7E","^8T"]]],"^5U",["^1M",["^7[","^74",["^1M",["^7L","^8F","^7B","^8L","^8;","^7?","^8;"]],"^7;","^8U"]],"^7E","^7R","^7G",["^Y",[0,1]],"^5I",["^1M",["^7[","^74","^7B","^7;","^7R"]],"^7W",["^Y",["events","state"]],"^84","^88","^5;",["^1M",["^7[","^74",["^1M",["^7L","^8F","^7B"]]]],"^8;","^8Z","^8?","^7R","^6N",["^1M",["^7[","^74",["^1M",["^7L","^8<","^7W","^8F","^7B","^8L","^8;","^7S","^8;"]]]],"^8D",["^1M",["^8>","^75",["^77","^8W","^7G","^84"]]],"^5[",["^1M",["^7[","^74",["^1M",["^7L","^8F",["^1M",["^8>","^75",["^8T"]]]]],"^7;","^7R"]],"^5M",["^1M",["^7[","^74",["^1M",["^7L","^8F","^7B","^93","^8Z"]],"^7;",["^1M",["^7K","^8D"]]]],"^63",["^1M",["^7[","^74",["^1M",["^7L","^8F","^7B","^8B","^7W"]],"^7;","^7R"]],"^8N","^7R","^6:",["^1M",["^7[","^74",["^1M",["^7L","^8Y","^8:","^8C","^8:","^8L","^8;","^7?","^8;"]]]],"^8T","^7R","^8W",["^1M",["^7J","^7R",["^1M",["^8E",["^80"],["^1M",["^79",["^1M",["^7H","^80"]],200]]]]]],"^6E",["^1M",["^7[","^74",["^1M",["^7L","^7Z","^8Z","^90",["^1M",["^7U","^8G","^8H","^7V","^8D"]]]]]],"^66",["^1M",["^7[","^74",["^1M",["^7L","^8F","^7B"]],"^7;","^8;"]]],"~:ns-speced-vars",["^5U","^5I","^5;","^6N","^5[","^5M","^63","^6:","^6E","^66"],"~:compiler-options",["^25",[["^97","~:static-fns"],true,["^97","~:elide-asserts"],false,["^97","~:optimize-constants"],null,["^97","~:external-config"],null,["^97","~:tooling-config"],null,["^97","~:emit-constants"],null,["^97","~:infer-externs"],true,["^97","^1Z"],null,["~:js-options","~:js-provider"],"^1I",["~:mode"],"~:dev",["^97","~:fn-invoke-direct"],null,["^97","~:source-map"],"/dev/null"]]]